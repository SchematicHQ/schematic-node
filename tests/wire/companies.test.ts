// This file was auto-generated by Fern from our API Definition.

import * as Schematic from "../../src/api/index";
import { SchematicClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("Companies", () => {
    test("listCompanies (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    add_ons: [{ id: "id", name: "name" }],
                    billing_credit_balances: { key: 1.1 },
                    billing_subscription: {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                    billing_subscriptions: [
                        {
                            cancel_at_period_end: true,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            discounts: [
                                {
                                    coupon_id: "coupon_id",
                                    coupon_name: "coupon_name",
                                    discount_external_id: "discount_external_id",
                                    duration: "duration",
                                    is_active: true,
                                    started_at: "2024-01-15T09:30:00Z",
                                    subscription_external_id: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            period_end: 1,
                            period_start: 1,
                            products: [
                                {
                                    billing_scheme: "billing_scheme",
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    package_size: 1,
                                    price: 1,
                                    price_external_id: "price_external_id",
                                    price_id: "price_id",
                                    price_tier: [{}],
                                    quantity: 1.1,
                                    subscription_id: "subscription_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    usage_type: "usage_type",
                                },
                            ],
                            status: "status",
                            subscription_external_id: "subscription_external_id",
                            total_price: 1,
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    default_payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "entity_type",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    metrics: [
                        {
                            account_id: "account_id",
                            captured_at_max: "2024-01-15T09:30:00Z",
                            captured_at_min: "2024-01-15T09:30:00Z",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            event_subtype: "event_subtype",
                            month_reset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    payment_methods: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    plan: { id: "id", name: "name" },
                    plans: [{ id: "id", name: "name" }],
                    rules: [
                        {
                            account_id: "account_id",
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            account_id: "account_id",
                                            condition_type: "condition_type",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resource_ids: ["resource_ids"],
                                            trait_value: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    account_id: "account_id",
                                    condition_type: "condition_type",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "operator",
                                    resource_ids: ["resource_ids"],
                                    trait_value: "trait_value",
                                },
                            ],
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "rule_type",
                            value: true,
                        },
                    ],
                    traits: { key: "value" },
                    updated_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
            ],
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                q: "q",
                with_subscription: true,
                without_feature_override_for: "without_feature_override_for",
                without_plan: true,
            },
        };
        server.mockEndpoint().get("/companies").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.listCompanies({
            plan_id: "plan_id",
            q: "q",
            without_feature_override_for: "without_feature_override_for",
            without_plan: true,
            with_subscription: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    add_ons: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    billing_credit_balances: {
                        key: 1.1,
                    },
                    billing_subscription: {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                    billing_subscriptions: [
                        {
                            cancel_at_period_end: true,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            discounts: [
                                {
                                    coupon_id: "coupon_id",
                                    coupon_name: "coupon_name",
                                    discount_external_id: "discount_external_id",
                                    duration: "duration",
                                    is_active: true,
                                    started_at: "2024-01-15T09:30:00Z",
                                    subscription_external_id: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            period_end: 1,
                            period_start: 1,
                            products: [
                                {
                                    billing_scheme: "billing_scheme",
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    package_size: 1,
                                    price: 1,
                                    price_external_id: "price_external_id",
                                    price_id: "price_id",
                                    price_tier: [{}],
                                    quantity: 1.1,
                                    subscription_id: "subscription_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    usage_type: "usage_type",
                                },
                            ],
                            status: "status",
                            subscription_external_id: "subscription_external_id",
                            total_price: 1,
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    default_payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "entity_type",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    metrics: [
                        {
                            account_id: "account_id",
                            captured_at_max: "2024-01-15T09:30:00Z",
                            captured_at_min: "2024-01-15T09:30:00Z",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            event_subtype: "event_subtype",
                            month_reset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    payment_methods: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    plan: {
                        id: "id",
                        name: "name",
                    },
                    plans: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    rules: [
                        {
                            account_id: "account_id",
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            account_id: "account_id",
                                            condition_type: "condition_type",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resource_ids: ["resource_ids"],
                                            trait_value: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    account_id: "account_id",
                                    condition_type: "condition_type",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "operator",
                                    resource_ids: ["resource_ids"],
                                    trait_value: "trait_value",
                                },
                            ],
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "rule_type",
                            value: true,
                        },
                    ],
                    traits: {
                        key: "value",
                    },
                    updated_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
            ],
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                q: "q",
                with_subscription: true,
                without_feature_override_for: "without_feature_override_for",
                without_plan: true,
            },
        });
    });

    test("listCompanies (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompanies();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listCompanies (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompanies();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listCompanies (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompanies();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listCompanies (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompanies();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listCompanies (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompanies();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("upsertCompany (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" } };
        const rawResponseBody = {
            data: {
                add_ons: [{ id: "id", name: "name" }],
                billing_credit_balances: { key: 1.1 },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: { key: "value" },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [{ id: "id", name: "name" }],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/companies")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.upsertCompany({
            keys: {
                key: "value",
            },
        });
        expect(response).toEqual({
            data: {
                add_ons: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                billing_credit_balances: {
                    key: 1.1,
                },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: {
                        key: "value",
                    },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertCompany (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertCompany (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertCompany (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertCompany (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertCompany (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getCompany (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                add_ons: [{ id: "id", name: "name" }],
                billing_credit_balances: { key: 1.1 },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: { key: "value" },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [{ id: "id", name: "name" }],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/companies/company_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.getCompany("company_id");
        expect(response).toEqual({
            data: {
                add_ons: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                billing_credit_balances: {
                    key: 1.1,
                },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: {
                        key: "value",
                    },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: {
                key: "value",
            },
        });
    });

    test("getCompany (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/companies/company_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getCompany("company_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getCompany (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/companies/company_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getCompany("company_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getCompany (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/companies/company_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getCompany("company_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getCompany (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/companies/company_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getCompany("company_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteCompany (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server
            .mockEndpoint()
            .delete("/companies/company_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.deleteCompany("company_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteCompany (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/companies/company_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompany("company_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteCompany (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/companies/company_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompany("company_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteCompany (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/companies/company_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompany("company_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteCompany (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/companies/company_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompany("company_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteCompany (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/companies/company_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompany("company_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countCompanies (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                q: "q",
                with_subscription: true,
                without_feature_override_for: "without_feature_override_for",
                without_plan: true,
            },
        };
        server.mockEndpoint().get("/companies/count").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.countCompanies({
            plan_id: "plan_id",
            q: "q",
            without_feature_override_for: "without_feature_override_for",
            without_plan: true,
            with_subscription: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                q: "q",
                with_subscription: true,
                without_feature_override_for: "without_feature_override_for",
                without_plan: true,
            },
        });
    });

    test("countCompanies (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompanies();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countCompanies (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompanies();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countCompanies (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompanies();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countCompanies (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompanies();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countCompanies (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompanies();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countCompaniesForAdvancedFilter (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: {
                credit_type_ids: ["credit_type_ids"],
                display_properties: ["display_properties"],
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                monetized_subscriptions: true,
                offset: 1,
                plan_ids: ["plan_ids"],
                q: "q",
                sort_order_column: "sort_order_column",
                sort_order_direction: "asc",
                subscription_statuses: ["subscription_statuses"],
                subscription_types: ["subscription_types"],
                without_plan: true,
                without_subscription: true,
            },
        };
        server.mockEndpoint().get("/companies/count2").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.countCompaniesForAdvancedFilter({
            monetized_subscriptions: true,
            q: "q",
            without_plan: true,
            without_subscription: true,
            sort_order_column: "sort_order_column",
            sort_order_direction: "asc",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                credit_type_ids: ["credit_type_ids"],
                display_properties: ["display_properties"],
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                monetized_subscriptions: true,
                offset: 1,
                plan_ids: ["plan_ids"],
                q: "q",
                sort_order_column: "sort_order_column",
                sort_order_direction: "asc",
                subscription_statuses: ["subscription_statuses"],
                subscription_types: ["subscription_types"],
                without_plan: true,
                without_subscription: true,
            },
        });
    });

    test("countCompaniesForAdvancedFilter (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count2").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countCompaniesForAdvancedFilter (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count2").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countCompaniesForAdvancedFilter (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count2").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countCompaniesForAdvancedFilter (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count2").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countCompaniesForAdvancedFilter (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/count2").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createCompany (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" } };
        const rawResponseBody = {
            data: {
                add_ons: [{ id: "id", name: "name" }],
                billing_credit_balances: { key: 1.1 },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: { key: "value" },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [{ id: "id", name: "name" }],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/companies/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.createCompany({
            keys: {
                key: "value",
            },
        });
        expect(response).toEqual({
            data: {
                add_ons: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                billing_credit_balances: {
                    key: 1.1,
                },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: {
                        key: "value",
                    },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: {
                key: "value",
            },
        });
    });

    test("createCompany (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createCompany (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createCompany (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createCompany (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createCompany (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteCompanyByKeys (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" } };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                name: "name",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/companies/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.deleteCompanyByKeys({
            keys: {
                key: "value",
            },
        });
        expect(response).toEqual({
            data: {
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                name: "name",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteCompanyByKeys (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteCompanyByKeys (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteCompanyByKeys (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteCompanyByKeys (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteCompanyByKeys (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/companies/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listCompaniesForAdvancedFilter (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    add_ons: [{ id: "id", name: "name" }],
                    billing_credit_balances: { key: 1.1 },
                    billing_subscription: {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                    billing_subscriptions: [
                        {
                            cancel_at_period_end: true,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            discounts: [
                                {
                                    coupon_id: "coupon_id",
                                    coupon_name: "coupon_name",
                                    discount_external_id: "discount_external_id",
                                    duration: "duration",
                                    is_active: true,
                                    started_at: "2024-01-15T09:30:00Z",
                                    subscription_external_id: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            period_end: 1,
                            period_start: 1,
                            products: [
                                {
                                    billing_scheme: "billing_scheme",
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    package_size: 1,
                                    price: 1,
                                    price_external_id: "price_external_id",
                                    price_id: "price_id",
                                    price_tier: [{}],
                                    quantity: 1.1,
                                    subscription_id: "subscription_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    usage_type: "usage_type",
                                },
                            ],
                            status: "status",
                            subscription_external_id: "subscription_external_id",
                            total_price: 1,
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    default_payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    feature_usage: [
                        {
                            entitlement_source: "entitlement_source",
                            entitlement_value_type: "entitlement_value_type",
                            feature_id: "feature_id",
                            feature_name: "feature_name",
                            feature_type: "feature_type",
                            hard_limit: "hard_limit",
                            has_access: true,
                            soft_limit: "soft_limit",
                            usage: "usage",
                        },
                    ],
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "entity_type",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    metrics: [
                        {
                            account_id: "account_id",
                            captured_at_max: "2024-01-15T09:30:00Z",
                            captured_at_min: "2024-01-15T09:30:00Z",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            event_subtype: "event_subtype",
                            month_reset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    payment_methods: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    plan: { id: "id", name: "name" },
                    plans: [{ id: "id", name: "name" }],
                    rules: [
                        {
                            account_id: "account_id",
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            account_id: "account_id",
                                            condition_type: "condition_type",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resource_ids: ["resource_ids"],
                                            trait_value: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    account_id: "account_id",
                                    condition_type: "condition_type",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "operator",
                                    resource_ids: ["resource_ids"],
                                    trait_value: "trait_value",
                                },
                            ],
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "rule_type",
                            value: true,
                        },
                    ],
                    traits: { key: "value" },
                    updated_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
            ],
            params: {
                credit_type_ids: ["credit_type_ids"],
                display_properties: ["display_properties"],
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                monetized_subscriptions: true,
                offset: 1,
                plan_ids: ["plan_ids"],
                q: "q",
                sort_order_column: "sort_order_column",
                sort_order_direction: "asc",
                subscription_statuses: ["subscription_statuses"],
                subscription_types: ["subscription_types"],
                without_plan: true,
                without_subscription: true,
            },
        };
        server.mockEndpoint().get("/companies/list2").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.listCompaniesForAdvancedFilter({
            monetized_subscriptions: true,
            q: "q",
            without_plan: true,
            without_subscription: true,
            sort_order_column: "sort_order_column",
            sort_order_direction: "asc",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    add_ons: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    billing_credit_balances: {
                        key: 1.1,
                    },
                    billing_subscription: {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                    billing_subscriptions: [
                        {
                            cancel_at_period_end: true,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            discounts: [
                                {
                                    coupon_id: "coupon_id",
                                    coupon_name: "coupon_name",
                                    discount_external_id: "discount_external_id",
                                    duration: "duration",
                                    is_active: true,
                                    started_at: "2024-01-15T09:30:00Z",
                                    subscription_external_id: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            period_end: 1,
                            period_start: 1,
                            products: [
                                {
                                    billing_scheme: "billing_scheme",
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    package_size: 1,
                                    price: 1,
                                    price_external_id: "price_external_id",
                                    price_id: "price_id",
                                    price_tier: [{}],
                                    quantity: 1.1,
                                    subscription_id: "subscription_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    usage_type: "usage_type",
                                },
                            ],
                            status: "status",
                            subscription_external_id: "subscription_external_id",
                            total_price: 1,
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    default_payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    feature_usage: [
                        {
                            entitlement_source: "entitlement_source",
                            entitlement_value_type: "entitlement_value_type",
                            feature_id: "feature_id",
                            feature_name: "feature_name",
                            feature_type: "feature_type",
                            hard_limit: "hard_limit",
                            has_access: true,
                            soft_limit: "soft_limit",
                            usage: "usage",
                        },
                    ],
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "entity_type",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    metrics: [
                        {
                            account_id: "account_id",
                            captured_at_max: "2024-01-15T09:30:00Z",
                            captured_at_min: "2024-01-15T09:30:00Z",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            event_subtype: "event_subtype",
                            month_reset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    payment_methods: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    plan: {
                        id: "id",
                        name: "name",
                    },
                    plans: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    rules: [
                        {
                            account_id: "account_id",
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            account_id: "account_id",
                                            condition_type: "condition_type",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resource_ids: ["resource_ids"],
                                            trait_value: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    account_id: "account_id",
                                    condition_type: "condition_type",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "operator",
                                    resource_ids: ["resource_ids"],
                                    trait_value: "trait_value",
                                },
                            ],
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "rule_type",
                            value: true,
                        },
                    ],
                    traits: {
                        key: "value",
                    },
                    updated_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
            ],
            params: {
                credit_type_ids: ["credit_type_ids"],
                display_properties: ["display_properties"],
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                monetized_subscriptions: true,
                offset: 1,
                plan_ids: ["plan_ids"],
                q: "q",
                sort_order_column: "sort_order_column",
                sort_order_direction: "asc",
                subscription_statuses: ["subscription_statuses"],
                subscription_types: ["subscription_types"],
                without_plan: true,
                without_subscription: true,
            },
        });
    });

    test("listCompaniesForAdvancedFilter (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/list2").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listCompaniesForAdvancedFilter (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/list2").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listCompaniesForAdvancedFilter (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/list2").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listCompaniesForAdvancedFilter (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/list2").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listCompaniesForAdvancedFilter (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/list2").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listCompaniesForAdvancedFilter();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("lookupCompany (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                add_ons: [
                    {
                        added_on: "2024-01-15T09:30:00Z",
                        billing_product_external_id: "billing_product_external_id",
                        billing_product_id: "billing_product_id",
                        description: "description",
                        id: "id",
                        image_url: "image_url",
                        name: "name",
                        plan_period: "plan_period",
                        plan_price: 1,
                    },
                    {
                        added_on: "2024-01-15T09:30:00Z",
                        billing_product_external_id: "billing_product_external_id",
                        billing_product_id: "billing_product_id",
                        description: "description",
                        id: "id",
                        image_url: "image_url",
                        name: "name",
                        plan_period: "plan_period",
                        plan_price: 1,
                    },
                ],
                billing_credit_balances: { billing_credit_balances: 1.1 },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            amount_off: 1,
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            currency: "currency",
                            customer_facing_code: "customer_facing_code",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            duration_in_months: 1,
                            ended_at: "2024-01-15T09:30:00Z",
                            is_active: true,
                            percent_off: 1.1,
                            promo_code_external_id: "promo_code_external_id",
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                        {
                            amount_off: 1,
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            currency: "currency",
                            customer_facing_code: "customer_facing_code",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            duration_in_months: 1,
                            ended_at: "2024-01-15T09:30:00Z",
                            is_active: true,
                            percent_off: 1.1,
                            promo_code_external_id: "promo_code_external_id",
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        due_date: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_external_id: "payment_method_external_id",
                        subscription_external_id: "subscription_external_id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                        url: "url",
                    },
                    metadata: { metadata: { key: "value" } },
                    payment_method: {
                        account_last4: "account_last4",
                        account_name: "account_name",
                        bank_name: "bank_name",
                        billing_email: "billing_email",
                        billing_name: "billing_name",
                        card_brand: "card_brand",
                        card_exp_month: 1,
                        card_exp_year: 1,
                        card_last4: "card_last4",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            billing_threshold: 1,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            meter_id: "meter_id",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            subscription_item_external_id: "subscription_item_external_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                        {
                            billing_scheme: "billing_scheme",
                            billing_threshold: 1,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            meter_id: "meter_id",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            subscription_item_external_id: "subscription_item_external_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at: 1,
                        cancel_at_period_end: true,
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        default_payment_method_id: "default_payment_method_id",
                        discounts: [
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        expired_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        interval: "interval",
                        latest_invoice: {
                            amount_due: 1,
                            amount_paid: 1,
                            amount_remaining: 1,
                            collection_method: "collection_method",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            due_date: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_external_id: "payment_method_external_id",
                            subscription_external_id: "subscription_external_id",
                            subtotal: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                            url: "url",
                        },
                        metadata: { metadata: { key: "value" } },
                        payment_method: {
                            account_last4: "account_last4",
                            account_name: "account_name",
                            bank_name: "bank_name",
                            billing_email: "billing_email",
                            billing_name: "billing_name",
                            card_brand: "card_brand",
                            card_exp_month: 1,
                            card_exp_year: 1,
                            card_last4: "card_last4",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                        trial_end: 1,
                        trial_end_setting: "trial_end_setting",
                    },
                    {
                        cancel_at: 1,
                        cancel_at_period_end: true,
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        default_payment_method_id: "default_payment_method_id",
                        discounts: [
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        expired_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        interval: "interval",
                        latest_invoice: {
                            amount_due: 1,
                            amount_paid: 1,
                            amount_remaining: 1,
                            collection_method: "collection_method",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            due_date: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_external_id: "payment_method_external_id",
                            subscription_external_id: "subscription_external_id",
                            subtotal: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                            url: "url",
                        },
                        metadata: { metadata: { key: "value" } },
                        payment_method: {
                            account_last4: "account_last4",
                            account_name: "account_name",
                            bank_name: "bank_name",
                            billing_email: "billing_email",
                            billing_name: "billing_name",
                            card_brand: "card_brand",
                            card_exp_month: 1,
                            card_exp_year: 1,
                            card_last4: "card_last4",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                        trial_end: 1,
                        trial_end_setting: "trial_end_setting",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        valid_until: "2024-01-15T09:30:00Z",
                        value: 1,
                    },
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        valid_until: "2024-01-15T09:30:00Z",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        account_last4: "account_last4",
                        account_name: "account_name",
                        bank_name: "bank_name",
                        billing_email: "billing_email",
                        billing_name: "billing_name",
                        card_brand: "card_brand",
                        card_exp_month: 1,
                        card_exp_year: 1,
                        card_last4: "card_last4",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    {
                        account_last4: "account_last4",
                        account_name: "account_name",
                        bank_name: "bank_name",
                        billing_email: "billing_email",
                        billing_name: "billing_name",
                        card_brand: "card_brand",
                        card_exp_month: 1,
                        card_exp_year: 1,
                        card_last4: "card_last4",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [
                    { description: "description", id: "id", image_url: "image_url", name: "name" },
                    { description: "description", id: "id", image_url: "image_url", name: "name" },
                ],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        flag_id: "flag_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        flag_id: "flag_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: { traits: { key: "value" } },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: { keys: { keys: "keys" } },
        };
        server.mockEndpoint().get("/companies/lookup").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.lookupCompany({
            keys: {
                keys: "keys",
            },
        });
        expect(response).toEqual({
            data: {
                add_ons: [
                    {
                        added_on: "2024-01-15T09:30:00Z",
                        billing_product_external_id: "billing_product_external_id",
                        billing_product_id: "billing_product_id",
                        description: "description",
                        id: "id",
                        image_url: "image_url",
                        name: "name",
                        plan_period: "plan_period",
                        plan_price: 1,
                    },
                    {
                        added_on: "2024-01-15T09:30:00Z",
                        billing_product_external_id: "billing_product_external_id",
                        billing_product_id: "billing_product_id",
                        description: "description",
                        id: "id",
                        image_url: "image_url",
                        name: "name",
                        plan_period: "plan_period",
                        plan_price: 1,
                    },
                ],
                billing_credit_balances: {
                    billing_credit_balances: 1.1,
                },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            amount_off: 1,
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            currency: "currency",
                            customer_facing_code: "customer_facing_code",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            duration_in_months: 1,
                            ended_at: "2024-01-15T09:30:00Z",
                            is_active: true,
                            percent_off: 1.1,
                            promo_code_external_id: "promo_code_external_id",
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                        {
                            amount_off: 1,
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            currency: "currency",
                            customer_facing_code: "customer_facing_code",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            duration_in_months: 1,
                            ended_at: "2024-01-15T09:30:00Z",
                            is_active: true,
                            percent_off: 1.1,
                            promo_code_external_id: "promo_code_external_id",
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        due_date: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_external_id: "payment_method_external_id",
                        subscription_external_id: "subscription_external_id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                        url: "url",
                    },
                    metadata: {
                        metadata: {
                            key: "value",
                        },
                    },
                    payment_method: {
                        account_last4: "account_last4",
                        account_name: "account_name",
                        bank_name: "bank_name",
                        billing_email: "billing_email",
                        billing_name: "billing_name",
                        card_brand: "card_brand",
                        card_exp_month: 1,
                        card_exp_year: 1,
                        card_last4: "card_last4",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            billing_threshold: 1,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            meter_id: "meter_id",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            subscription_item_external_id: "subscription_item_external_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                        {
                            billing_scheme: "billing_scheme",
                            billing_threshold: 1,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            meter_id: "meter_id",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            subscription_item_external_id: "subscription_item_external_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at: 1,
                        cancel_at_period_end: true,
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        default_payment_method_id: "default_payment_method_id",
                        discounts: [
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        expired_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        interval: "interval",
                        latest_invoice: {
                            amount_due: 1,
                            amount_paid: 1,
                            amount_remaining: 1,
                            collection_method: "collection_method",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            due_date: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_external_id: "payment_method_external_id",
                            subscription_external_id: "subscription_external_id",
                            subtotal: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                            url: "url",
                        },
                        metadata: {
                            metadata: {
                                key: "value",
                            },
                        },
                        payment_method: {
                            account_last4: "account_last4",
                            account_name: "account_name",
                            bank_name: "bank_name",
                            billing_email: "billing_email",
                            billing_name: "billing_name",
                            card_brand: "card_brand",
                            card_exp_month: 1,
                            card_exp_year: 1,
                            card_last4: "card_last4",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                        trial_end: 1,
                        trial_end_setting: "trial_end_setting",
                    },
                    {
                        cancel_at: 1,
                        cancel_at_period_end: true,
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        default_payment_method_id: "default_payment_method_id",
                        discounts: [
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                            {
                                amount_off: 1,
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                currency: "currency",
                                customer_facing_code: "customer_facing_code",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                duration_in_months: 1,
                                ended_at: "2024-01-15T09:30:00Z",
                                is_active: true,
                                percent_off: 1.1,
                                promo_code_external_id: "promo_code_external_id",
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        expired_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        interval: "interval",
                        latest_invoice: {
                            amount_due: 1,
                            amount_paid: 1,
                            amount_remaining: 1,
                            collection_method: "collection_method",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            due_date: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_external_id: "payment_method_external_id",
                            subscription_external_id: "subscription_external_id",
                            subtotal: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                            url: "url",
                        },
                        metadata: {
                            metadata: {
                                key: "value",
                            },
                        },
                        payment_method: {
                            account_last4: "account_last4",
                            account_name: "account_name",
                            bank_name: "bank_name",
                            billing_email: "billing_email",
                            billing_name: "billing_name",
                            card_brand: "card_brand",
                            card_exp_month: 1,
                            card_exp_year: 1,
                            card_last4: "card_last4",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                            {
                                billing_scheme: "billing_scheme",
                                billing_threshold: 1,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                meter_id: "meter_id",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                    {
                                        flat_amount: 1,
                                        per_unit_price: 1,
                                        per_unit_price_decimal: "per_unit_price_decimal",
                                        up_to: 1,
                                    },
                                ],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                subscription_item_external_id: "subscription_item_external_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                        trial_end: 1,
                        trial_end_setting: "trial_end_setting",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        valid_until: "2024-01-15T09:30:00Z",
                        value: 1,
                    },
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        valid_until: "2024-01-15T09:30:00Z",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        account_last4: "account_last4",
                        account_name: "account_name",
                        bank_name: "bank_name",
                        billing_email: "billing_email",
                        billing_name: "billing_name",
                        card_brand: "card_brand",
                        card_exp_month: 1,
                        card_exp_year: 1,
                        card_last4: "card_last4",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    {
                        account_last4: "account_last4",
                        account_name: "account_name",
                        bank_name: "bank_name",
                        billing_email: "billing_email",
                        billing_name: "billing_name",
                        card_brand: "card_brand",
                        card_exp_month: 1,
                        card_exp_year: 1,
                        card_last4: "card_last4",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [
                    {
                        description: "description",
                        id: "id",
                        image_url: "image_url",
                        name: "name",
                    },
                    {
                        description: "description",
                        id: "id",
                        image_url: "image_url",
                        name: "name",
                    },
                ],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        flag_id: "flag_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                    {
                                        account_id: "account_id",
                                        comparison_trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        condition_type: "condition_type",
                                        consumption_rate: 1.1,
                                        credit_id: "credit_id",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        id: "id",
                                        metric_period: "metric_period",
                                        metric_period_month_reset: "metric_period_month_reset",
                                        metric_value: 1,
                                        operator: "operator",
                                        resource_ids: ["resource_ids", "resource_ids"],
                                        trait_definition: {
                                            comparable_type: "comparable_type",
                                            entity_type: "entity_type",
                                            id: "id",
                                        },
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                            {
                                account_id: "account_id",
                                comparison_trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                condition_type: "condition_type",
                                consumption_rate: 1.1,
                                credit_id: "credit_id",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                id: "id",
                                metric_period: "metric_period",
                                metric_period_month_reset: "metric_period_month_reset",
                                metric_value: 1,
                                operator: "operator",
                                resource_ids: ["resource_ids", "resource_ids"],
                                trait_definition: {
                                    comparable_type: "comparable_type",
                                    entity_type: "entity_type",
                                    id: "id",
                                },
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        flag_id: "flag_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: {
                    traits: {
                        key: "value",
                    },
                },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: {
                keys: {
                    keys: "keys",
                },
            },
        });
    });

    test("lookupCompany (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/lookup").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("lookupCompany (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/lookup").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("lookupCompany (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/lookup").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("lookupCompany (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/companies/lookup").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getActiveDeals (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    deal_arr: "deal_arr",
                    deal_external_id: "deal_external_id",
                    deal_mrr: "deal_mrr",
                    deal_name: "deal_name",
                    line_items: [
                        {
                            billing_frequency: "billing_frequency",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            description: "description",
                            id: "id",
                            name: "name",
                            price: 1.1,
                            quantity: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                },
            ],
            params: { company_id: "company_id", deal_stage: "deal_stage", limit: 1, offset: 1 },
        };
        server.mockEndpoint().get("/company-crm-deals").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.getActiveDeals({
            company_id: "company_id",
            deal_stage: "deal_stage",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    deal_arr: "deal_arr",
                    deal_external_id: "deal_external_id",
                    deal_mrr: "deal_mrr",
                    deal_name: "deal_name",
                    line_items: [
                        {
                            billing_frequency: "billing_frequency",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            description: "description",
                            id: "id",
                            name: "name",
                            price: 1.1,
                            quantity: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                },
            ],
            params: {
                company_id: "company_id",
                deal_stage: "deal_stage",
                limit: 1,
                offset: 1,
            },
        });
    });

    test("getActiveDeals (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-crm-deals").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getActiveDeals({
                company_id: "company_id",
                deal_stage: "deal_stage",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("getActiveDeals (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-crm-deals").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getActiveDeals({
                company_id: "company_id",
                deal_stage: "deal_stage",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getActiveDeals (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-crm-deals").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getActiveDeals({
                company_id: "company_id",
                deal_stage: "deal_stage",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getActiveDeals (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-crm-deals").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getActiveDeals({
                company_id: "company_id",
                deal_stage: "deal_stage",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getActiveDeals (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-crm-deals").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getActiveDeals({
                company_id: "company_id",
                deal_stage: "deal_stage",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listCompanyMemberships (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    company: {
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    updated_at: "2024-01-15T09:30:00Z",
                    user_id: "user_id",
                },
            ],
            params: { company_id: "company_id", limit: 1, offset: 1, user_id: "user_id" },
        };
        server
            .mockEndpoint()
            .get("/company-memberships")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.listCompanyMemberships({
            company_id: "company_id",
            user_id: "user_id",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    company: {
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    updated_at: "2024-01-15T09:30:00Z",
                    user_id: "user_id",
                },
            ],
            params: {
                company_id: "company_id",
                limit: 1,
                offset: 1,
                user_id: "user_id",
            },
        });
    });

    test("listCompanyMemberships (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-memberships")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listCompanyMemberships();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listCompanyMemberships (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-memberships")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listCompanyMemberships();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listCompanyMemberships (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-memberships")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listCompanyMemberships();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listCompanyMemberships (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-memberships")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listCompanyMemberships();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listCompanyMemberships (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-memberships")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listCompanyMemberships();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getOrCreateCompanyMembership (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", user_id: "user_id" };
        const rawResponseBody = {
            data: {
                company: {
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    id: "id",
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    name: "name",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                company_id: "company_id",
                created_at: "2024-01-15T09:30:00Z",
                id: "id",
                updated_at: "2024-01-15T09:30:00Z",
                user_id: "user_id",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/company-memberships")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.getOrCreateCompanyMembership({
            company_id: "company_id",
            user_id: "user_id",
        });
        expect(response).toEqual({
            data: {
                company: {
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    id: "id",
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    name: "name",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                company_id: "company_id",
                created_at: "2024-01-15T09:30:00Z",
                id: "id",
                updated_at: "2024-01-15T09:30:00Z",
                user_id: "user_id",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getOrCreateCompanyMembership (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", user_id: "user_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-memberships")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateCompanyMembership({
                company_id: "company_id",
                user_id: "user_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("getOrCreateCompanyMembership (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", user_id: "user_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-memberships")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateCompanyMembership({
                company_id: "company_id",
                user_id: "user_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getOrCreateCompanyMembership (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", user_id: "user_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-memberships")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateCompanyMembership({
                company_id: "company_id",
                user_id: "user_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getOrCreateCompanyMembership (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", user_id: "user_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-memberships")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateCompanyMembership({
                company_id: "company_id",
                user_id: "user_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getOrCreateCompanyMembership (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", user_id: "user_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-memberships")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateCompanyMembership({
                company_id: "company_id",
                user_id: "user_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteCompanyMembership (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server
            .mockEndpoint()
            .delete("/company-memberships/company_membership_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.deleteCompanyMembership("company_membership_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteCompanyMembership (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-memberships/company_membership_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyMembership("company_membership_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteCompanyMembership (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-memberships/company_membership_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyMembership("company_membership_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteCompanyMembership (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-memberships/company_membership_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyMembership("company_membership_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteCompanyMembership (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-memberships/company_membership_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyMembership("company_membership_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteCompanyMembership (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-memberships/company_membership_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteCompanyMembership("company_membership_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getActiveCompanySubscription (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    cancel_at: "2024-01-15T09:30:00Z",
                    cancel_at_period_end: true,
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: "2024-01-15T09:30:00Z",
                },
            ],
            params: { company_id: "company_id", company_ids: ["company_ids"], limit: 1, offset: 1 },
        };
        server
            .mockEndpoint()
            .get("/company-subscriptions")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.getActiveCompanySubscription({
            company_id: "company_id",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    cancel_at: "2024-01-15T09:30:00Z",
                    cancel_at_period_end: true,
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                company_id: "company_id",
                company_ids: ["company_ids"],
                limit: 1,
                offset: 1,
            },
        });
    });

    test("getActiveCompanySubscription (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-subscriptions")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getActiveCompanySubscription();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("getActiveCompanySubscription (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-subscriptions")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getActiveCompanySubscription();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getActiveCompanySubscription (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-subscriptions")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getActiveCompanySubscription();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getActiveCompanySubscription (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-subscriptions")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getActiveCompanySubscription();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getActiveCompanySubscription (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-subscriptions")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getActiveCompanySubscription();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("upsertCompanyTrait (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" }, trait: "trait" };
        const rawResponseBody = {
            data: {
                add_ons: [{ id: "id", name: "name" }],
                billing_credit_balances: { key: 1.1 },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: { key: "value" },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [{ id: "id", name: "name" }],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/company-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.upsertCompanyTrait({
            keys: {
                key: "value",
            },
            trait: "trait",
        });
        expect(response).toEqual({
            data: {
                add_ons: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                billing_credit_balances: {
                    key: 1.1,
                },
                billing_subscription: {
                    cancel_at: 1,
                    cancel_at_period_end: true,
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    customer_external_id: "customer_external_id",
                    default_payment_method_id: "default_payment_method_id",
                    discounts: [
                        {
                            coupon_id: "coupon_id",
                            coupon_name: "coupon_name",
                            discount_external_id: "discount_external_id",
                            duration: "duration",
                            is_active: true,
                            started_at: "2024-01-15T09:30:00Z",
                            subscription_external_id: "subscription_external_id",
                        },
                    ],
                    expired_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    interval: "interval",
                    latest_invoice: {
                        amount_due: 1,
                        amount_paid: 1,
                        amount_remaining: 1,
                        collection_method: "collection_method",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        id: "id",
                        subtotal: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metadata: {
                        key: "value",
                    },
                    payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    period_end: 1,
                    period_start: 1,
                    products: [
                        {
                            billing_scheme: "billing_scheme",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            interval: "interval",
                            name: "name",
                            package_size: 1,
                            price: 1,
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [{}],
                            quantity: 1.1,
                            subscription_id: "subscription_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "usage_type",
                        },
                    ],
                    status: "status",
                    subscription_external_id: "subscription_external_id",
                    total_price: 1,
                    trial_end: 1,
                    trial_end_setting: "trial_end_setting",
                },
                billing_subscriptions: [
                    {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "billing_scheme",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "usage_type",
                            },
                        ],
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                default_payment_method: {
                    account_last4: "account_last4",
                    account_name: "account_name",
                    bank_name: "bank_name",
                    billing_email: "billing_email",
                    billing_name: "billing_name",
                    card_brand: "card_brand",
                    card_exp_month: 1,
                    card_exp_year: 1,
                    card_last4: "card_last4",
                    company_id: "company_id",
                    created_at: "2024-01-15T09:30:00Z",
                    customer_external_id: "customer_external_id",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    id: "id",
                    payment_method_type: "payment_method_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                logo_url: "logo_url",
                metrics: [
                    {
                        account_id: "account_id",
                        captured_at_max: "2024-01-15T09:30:00Z",
                        captured_at_min: "2024-01-15T09:30:00Z",
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        event_subtype: "event_subtype",
                        month_reset: "month_reset",
                        period: "period",
                        value: 1,
                    },
                ],
                name: "name",
                payment_methods: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                plan: {
                    added_on: "2024-01-15T09:30:00Z",
                    billing_product_external_id: "billing_product_external_id",
                    billing_product_id: "billing_product_id",
                    description: "description",
                    id: "id",
                    image_url: "image_url",
                    name: "name",
                    plan_period: "plan_period",
                    plan_price: 1,
                },
                plans: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                rules: [
                    {
                        account_id: "account_id",
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "condition_type",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                account_id: "account_id",
                                condition_type: "condition_type",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                trait_value: "trait_value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        value: true,
                    },
                ],
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
                user_count: 1,
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertCompanyTrait (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompanyTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertCompanyTrait (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompanyTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertCompanyTrait (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompanyTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertCompanyTrait (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompanyTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertCompanyTrait (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertCompanyTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listEntityKeyDefinitions (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    entity_type: "entity_type",
                    id: "id",
                    key: "key",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: { entity_type: "company", ids: ["ids"], limit: 1, offset: 1, q: "q" },
        };
        server
            .mockEndpoint()
            .get("/entity-key-definitions")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.listEntityKeyDefinitions({
            entity_type: "company",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    entity_type: "entity_type",
                    id: "id",
                    key: "key",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                entity_type: "company",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("listEntityKeyDefinitions (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listEntityKeyDefinitions (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listEntityKeyDefinitions (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listEntityKeyDefinitions (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listEntityKeyDefinitions (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countEntityKeyDefinitions (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: { entity_type: "company", ids: ["ids"], limit: 1, offset: 1, q: "q" },
        };
        server
            .mockEndpoint()
            .get("/entity-key-definitions/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.countEntityKeyDefinitions({
            entity_type: "company",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                entity_type: "company",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("countEntityKeyDefinitions (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countEntityKeyDefinitions (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countEntityKeyDefinitions (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countEntityKeyDefinitions (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countEntityKeyDefinitions (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-key-definitions/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityKeyDefinitions();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listEntityTraitDefinitions (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "entity_type",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "trait_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: { entity_type: "company", ids: ["ids"], limit: 1, offset: 1, q: "q", trait_type: "boolean" },
        };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.listEntityTraitDefinitions({
            entity_type: "company",
            q: "q",
            trait_type: "boolean",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "entity_type",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "trait_type",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                entity_type: "company",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                trait_type: "boolean",
            },
        });
    });

    test("listEntityTraitDefinitions (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listEntityTraitDefinitions (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listEntityTraitDefinitions (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listEntityTraitDefinitions (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listEntityTraitDefinitions (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.listEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getOrCreateEntityTraitDefinition (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { entity_type: "company", hierarchy: ["hierarchy"], trait_type: "boolean" };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                display_name: "display_name",
                entity_type: "entity_type",
                hierarchy: ["hierarchy"],
                id: "id",
                trait_type: "trait_type",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/entity-trait-definitions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.getOrCreateEntityTraitDefinition({
            entity_type: "company",
            hierarchy: ["hierarchy"],
            trait_type: "boolean",
        });
        expect(response).toEqual({
            data: {
                created_at: "2024-01-15T09:30:00Z",
                display_name: "display_name",
                entity_type: "entity_type",
                hierarchy: ["hierarchy"],
                id: "id",
                trait_type: "trait_type",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getOrCreateEntityTraitDefinition (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { entity_type: "company", hierarchy: ["hierarchy", "hierarchy"], trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/entity-trait-definitions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateEntityTraitDefinition({
                entity_type: "company",
                hierarchy: ["hierarchy", "hierarchy"],
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("getOrCreateEntityTraitDefinition (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { entity_type: "company", hierarchy: ["hierarchy", "hierarchy"], trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/entity-trait-definitions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateEntityTraitDefinition({
                entity_type: "company",
                hierarchy: ["hierarchy", "hierarchy"],
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getOrCreateEntityTraitDefinition (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { entity_type: "company", hierarchy: ["hierarchy", "hierarchy"], trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/entity-trait-definitions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateEntityTraitDefinition({
                entity_type: "company",
                hierarchy: ["hierarchy", "hierarchy"],
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getOrCreateEntityTraitDefinition (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { entity_type: "company", hierarchy: ["hierarchy", "hierarchy"], trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/entity-trait-definitions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateEntityTraitDefinition({
                entity_type: "company",
                hierarchy: ["hierarchy", "hierarchy"],
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getOrCreateEntityTraitDefinition (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { entity_type: "company", hierarchy: ["hierarchy", "hierarchy"], trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/entity-trait-definitions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getOrCreateEntityTraitDefinition({
                entity_type: "company",
                hierarchy: ["hierarchy", "hierarchy"],
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getEntityTraitDefinition (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                display_name: "display_name",
                entity_type: "entity_type",
                hierarchy: ["hierarchy"],
                id: "id",
                trait_type: "trait_type",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/entity_trait_definition_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.getEntityTraitDefinition("entity_trait_definition_id");
        expect(response).toEqual({
            data: {
                created_at: "2024-01-15T09:30:00Z",
                display_name: "display_name",
                entity_type: "entity_type",
                hierarchy: ["hierarchy"],
                id: "id",
                trait_type: "trait_type",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getEntityTraitDefinition (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/entity_trait_definition_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitDefinition("entity_trait_definition_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getEntityTraitDefinition (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/entity_trait_definition_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitDefinition("entity_trait_definition_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getEntityTraitDefinition (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/entity_trait_definition_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitDefinition("entity_trait_definition_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getEntityTraitDefinition (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/entity_trait_definition_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitDefinition("entity_trait_definition_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updateEntityTraitDefinition (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { trait_type: "boolean" };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                display_name: "display_name",
                entity_type: "entity_type",
                hierarchy: ["hierarchy"],
                id: "id",
                trait_type: "trait_type",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/entity-trait-definitions/entity_trait_definition_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.updateEntityTraitDefinition("entity_trait_definition_id", {
            trait_type: "boolean",
        });
        expect(response).toEqual({
            data: {
                created_at: "2024-01-15T09:30:00Z",
                display_name: "display_name",
                entity_type: "entity_type",
                hierarchy: ["hierarchy"],
                id: "id",
                trait_type: "trait_type",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("updateEntityTraitDefinition (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/entity-trait-definitions/entity_trait_definition_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updateEntityTraitDefinition("entity_trait_definition_id", {
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updateEntityTraitDefinition (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/entity-trait-definitions/entity_trait_definition_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updateEntityTraitDefinition("entity_trait_definition_id", {
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updateEntityTraitDefinition (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/entity-trait-definitions/entity_trait_definition_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updateEntityTraitDefinition("entity_trait_definition_id", {
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updateEntityTraitDefinition (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/entity-trait-definitions/entity_trait_definition_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updateEntityTraitDefinition("entity_trait_definition_id", {
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updateEntityTraitDefinition (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { trait_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/entity-trait-definitions/entity_trait_definition_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updateEntityTraitDefinition("entity_trait_definition_id", {
                trait_type: "boolean",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countEntityTraitDefinitions (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: { entity_type: "company", ids: ["ids"], limit: 1, offset: 1, q: "q", trait_type: "boolean" },
        };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.countEntityTraitDefinitions({
            entity_type: "company",
            q: "q",
            trait_type: "boolean",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                entity_type: "company",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                trait_type: "boolean",
            },
        });
    });

    test("countEntityTraitDefinitions (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countEntityTraitDefinitions (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countEntityTraitDefinitions (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countEntityTraitDefinitions (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countEntityTraitDefinitions (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-definitions/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.countEntityTraitDefinitions();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getEntityTraitValues (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [{ definition_id: "definition_id", value: "value" }],
            params: { definition_id: "definition_id", limit: 1, offset: 1, q: "q" },
        };
        server
            .mockEndpoint()
            .get("/entity-trait-values")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.getEntityTraitValues({
            definition_id: "definition_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    definition_id: "definition_id",
                    value: "value",
                },
            ],
            params: {
                definition_id: "definition_id",
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("getEntityTraitValues (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-values")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitValues({
                definition_id: "definition_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("getEntityTraitValues (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-values")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitValues({
                definition_id: "definition_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getEntityTraitValues (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-values")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitValues({
                definition_id: "definition_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getEntityTraitValues (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-values")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitValues({
                definition_id: "definition_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getEntityTraitValues (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/entity-trait-values")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getEntityTraitValues({
                definition_id: "definition_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listPlanTraits (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    id: "id",
                    plan_id: "plan_id",
                    plan_type: "plan_type",
                    trait_id: "trait_id",
                    trait_value: "trait_value",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_ids: ["trait_ids"],
            },
        };
        server.mockEndpoint().get("/plan-traits").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.listPlanTraits({
            plan_id: "plan_id",
            trait_id: "trait_id",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    id: "id",
                    plan_id: "plan_id",
                    plan_type: "plan_type",
                    trait_id: "trait_id",
                    trait_value: "trait_value",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_ids: ["trait_ids"],
            },
        });
    });

    test("listPlanTraits (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listPlanTraits();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listPlanTraits (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listPlanTraits();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listPlanTraits (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listPlanTraits();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listPlanTraits (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listPlanTraits();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listPlanTraits (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listPlanTraits();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createPlanTrait (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_id: "trait_id", trait_value: "trait_value" };
        const rawResponseBody = {
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                plan_id: "plan_id",
                plan_type: "plan_type",
                trait_id: "trait_id",
                trait_value: "trait_value",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/plan-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.createPlanTrait({
            plan_id: "plan_id",
            trait_id: "trait_id",
            trait_value: "trait_value",
        });
        expect(response).toEqual({
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                plan_id: "plan_id",
                plan_type: "plan_type",
                trait_id: "trait_id",
                trait_value: "trait_value",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("createPlanTrait (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_id: "trait_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createPlanTrait({
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createPlanTrait (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_id: "trait_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createPlanTrait({
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createPlanTrait (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_id: "trait_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createPlanTrait({
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createPlanTrait (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_id: "trait_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createPlanTrait({
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createPlanTrait (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_id: "trait_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createPlanTrait({
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getPlanTrait (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                plan_id: "plan_id",
                plan_type: "plan_type",
                trait_id: "trait_id",
                trait_value: "trait_value",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.getPlanTrait("plan_trait_id");
        expect(response).toEqual({
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                plan_id: "plan_id",
                plan_type: "plan_type",
                trait_id: "trait_id",
                trait_value: "trait_value",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getPlanTrait (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getPlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getPlanTrait (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getPlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getPlanTrait (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getPlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getPlanTrait (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.getPlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updatePlanTrait (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_value: "trait_value" };
        const rawResponseBody = {
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                plan_id: "plan_id",
                plan_type: "plan_type",
                trait_id: "trait_id",
                trait_value: "trait_value",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/plan-traits/plan_trait_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.updatePlanTrait("plan_trait_id", {
            plan_id: "plan_id",
            trait_value: "trait_value",
        });
        expect(response).toEqual({
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                plan_id: "plan_id",
                plan_type: "plan_type",
                trait_id: "trait_id",
                trait_value: "trait_value",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("updatePlanTrait (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-traits/plan_trait_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTrait("plan_trait_id", {
                plan_id: "plan_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updatePlanTrait (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-traits/plan_trait_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTrait("plan_trait_id", {
                plan_id: "plan_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updatePlanTrait (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-traits/plan_trait_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTrait("plan_trait_id", {
                plan_id: "plan_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updatePlanTrait (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-traits/plan_trait_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTrait("plan_trait_id", {
                plan_id: "plan_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updatePlanTrait (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", trait_value: "trait_value" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-traits/plan_trait_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTrait("plan_trait_id", {
                plan_id: "plan_id",
                trait_value: "trait_value",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deletePlanTrait (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server
            .mockEndpoint()
            .delete("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.deletePlanTrait("plan_trait_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deletePlanTrait (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deletePlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deletePlanTrait (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deletePlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deletePlanTrait (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deletePlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deletePlanTrait (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deletePlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deletePlanTrait (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-traits/plan_trait_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deletePlanTrait("plan_trait_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updatePlanTraitsBulk (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { plan_id: "plan_id", traits: [{ trait_id: "trait_id", trait_value: "trait_value" }] };
        const rawResponseBody = {
            data: [
                {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    id: "id",
                    plan_id: "plan_id",
                    plan_type: "plan_type",
                    trait_id: "trait_id",
                    trait_value: "trait_value",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/plan-traits/bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.updatePlanTraitsBulk({
            plan_id: "plan_id",
            traits: [
                {
                    trait_id: "trait_id",
                    trait_value: "trait_value",
                },
            ],
        });
        expect(response).toEqual({
            data: [
                {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    id: "id",
                    plan_id: "plan_id",
                    plan_type: "plan_type",
                    trait_id: "trait_id",
                    trait_value: "trait_value",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                key: "value",
            },
        });
    });

    test("updatePlanTraitsBulk (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            plan_id: "plan_id",
            traits: [
                { trait_id: "trait_id", trait_value: "trait_value" },
                { trait_id: "trait_id", trait_value: "trait_value" },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits/bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTraitsBulk({
                plan_id: "plan_id",
                traits: [
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                ],
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updatePlanTraitsBulk (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            plan_id: "plan_id",
            traits: [
                { trait_id: "trait_id", trait_value: "trait_value" },
                { trait_id: "trait_id", trait_value: "trait_value" },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits/bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTraitsBulk({
                plan_id: "plan_id",
                traits: [
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                ],
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updatePlanTraitsBulk (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            plan_id: "plan_id",
            traits: [
                { trait_id: "trait_id", trait_value: "trait_value" },
                { trait_id: "trait_id", trait_value: "trait_value" },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits/bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTraitsBulk({
                plan_id: "plan_id",
                traits: [
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                ],
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updatePlanTraitsBulk (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            plan_id: "plan_id",
            traits: [
                { trait_id: "trait_id", trait_value: "trait_value" },
                { trait_id: "trait_id", trait_value: "trait_value" },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits/bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTraitsBulk({
                plan_id: "plan_id",
                traits: [
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                ],
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updatePlanTraitsBulk (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            plan_id: "plan_id",
            traits: [
                { trait_id: "trait_id", trait_value: "trait_value" },
                { trait_id: "trait_id", trait_value: "trait_value" },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-traits/bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.updatePlanTraitsBulk({
                plan_id: "plan_id",
                traits: [
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                    {
                        trait_id: "trait_id",
                        trait_value: "trait_value",
                    },
                ],
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countPlanTraits (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_ids: ["trait_ids"],
            },
        };
        server.mockEndpoint().get("/plan-traits/count").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.countPlanTraits({
            plan_id: "plan_id",
            trait_id: "trait_id",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                trait_id: "trait_id",
                trait_ids: ["trait_ids"],
            },
        });
    });

    test("countPlanTraits (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits/count").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countPlanTraits();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countPlanTraits (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits/count").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countPlanTraits();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countPlanTraits (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits/count").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countPlanTraits();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countPlanTraits (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits/count").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countPlanTraits();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countPlanTraits (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-traits/count").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countPlanTraits();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("upsertUserTrait (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" }, trait: "trait" };
        const rawResponseBody = {
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/user-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.upsertUserTrait({
            keys: {
                key: "value",
            },
            trait: "trait",
        });
        expect(response).toEqual({
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertUserTrait (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/user-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUserTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertUserTrait (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/user-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUserTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertUserTrait (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/user-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUserTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertUserTrait (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/user-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUserTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertUserTrait (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" }, trait: "trait" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/user-traits")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUserTrait({
                keys: {
                    keys: "keys",
                },
                trait: "trait",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listUsers (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    company_memberships: [
                        {
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            user_id: "user_id",
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "entity_type",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    name: "name",
                    traits: { key: "value" },
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: { company_id: "company_id", ids: ["ids"], limit: 1, offset: 1, plan_id: "plan_id", q: "q" },
        };
        server.mockEndpoint().get("/users").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.listUsers({
            company_id: "company_id",
            plan_id: "plan_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    company_memberships: [
                        {
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            user_id: "user_id",
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "entity_type",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    name: "name",
                    traits: {
                        key: "value",
                    },
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                company_id: "company_id",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                q: "q",
            },
        });
    });

    test("listUsers (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listUsers();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listUsers (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listUsers();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listUsers (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listUsers();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listUsers (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listUsers();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listUsers (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.listUsers();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("upsertUser (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" } };
        const rawResponseBody = {
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/users")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.upsertUser({
            keys: {
                key: "value",
            },
        });
        expect(response).toEqual({
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertUser (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertUser (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertUser (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertUser (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertUser (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.upsertUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getUser (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server.mockEndpoint().get("/users/user_id").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.getUser("user_id");
        expect(response).toEqual({
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getUser (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/user_id").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getUser("user_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getUser (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/user_id").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getUser("user_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getUser (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/user_id").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getUser("user_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getUser (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/user_id").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.getUser("user_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteUser (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server.mockEndpoint().delete("/users/user_id").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.deleteUser("user_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteUser (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/users/user_id").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.deleteUser("user_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteUser (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/users/user_id").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.deleteUser("user_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteUser (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/users/user_id").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.deleteUser("user_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteUser (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/users/user_id").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.deleteUser("user_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteUser (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/users/user_id").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.deleteUser("user_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countUsers (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: { company_id: "company_id", ids: ["ids"], limit: 1, offset: 1, plan_id: "plan_id", q: "q" },
        };
        server.mockEndpoint().get("/users/count").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.countUsers({
            company_id: "company_id",
            plan_id: "plan_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                company_id: "company_id",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                q: "q",
            },
        });
    });

    test("countUsers (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/count").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countUsers();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countUsers (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/count").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countUsers();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countUsers (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/count").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countUsers();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countUsers (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/count").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countUsers();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countUsers (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/count").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.countUsers();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createUser (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" } };
        const rawResponseBody = {
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: { key: "value" },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/users/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.createUser({
            keys: {
                key: "value",
            },
        });
        expect(response).toEqual({
            data: {
                company_memberships: [
                    {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: {
                    key: "value",
                },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("createUser (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createUser (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createUser (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createUser (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createUser (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.createUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteUserByKeys (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { key: "value" } };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/users/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.companies.deleteUserByKeys({
            keys: {
                key: "value",
            },
        });
        expect(response).toEqual({
            data: {
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                id: "id",
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteUserByKeys (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteUserByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteUserByKeys (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteUserByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteUserByKeys (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteUserByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteUserByKeys (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteUserByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteUserByKeys (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { keys: { keys: "keys" } };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/users/delete")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.companies.deleteUserByKeys({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("lookupUser (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                company_memberships: [
                    {
                        company: {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            id: "id",
                            last_seen_at: "2024-01-15T09:30:00Z",
                            logo_url: "logo_url",
                            name: "name",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                    {
                        company: {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            id: "id",
                            last_seen_at: "2024-01-15T09:30:00Z",
                            logo_url: "logo_url",
                            name: "name",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: { traits: { key: "value" } },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { keys: { keys: "keys" } },
        };
        server.mockEndpoint().get("/users/lookup").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.companies.lookupUser({
            keys: {
                keys: "keys",
            },
        });
        expect(response).toEqual({
            data: {
                company_memberships: [
                    {
                        company: {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            id: "id",
                            last_seen_at: "2024-01-15T09:30:00Z",
                            logo_url: "logo_url",
                            name: "name",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                    {
                        company: {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            id: "id",
                            last_seen_at: "2024-01-15T09:30:00Z",
                            logo_url: "logo_url",
                            name: "name",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        user_id: "user_id",
                    },
                ],
                created_at: "2024-01-15T09:30:00Z",
                entity_traits: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            display_name: "display_name",
                            entity_type: "entity_type",
                            hierarchy: ["hierarchy", "hierarchy"],
                            id: "id",
                            trait_type: "trait_type",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        environment_id: "environment_id",
                        id: "id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                environment_id: "environment_id",
                id: "id",
                keys: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        definition: {
                            created_at: "2024-01-15T09:30:00Z",
                            entity_type: "entity_type",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        definition_id: "definition_id",
                        entity_id: "entity_id",
                        entity_type: "entity_type",
                        environment_id: "environment_id",
                        id: "id",
                        key: "key",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: "value",
                    },
                ],
                last_seen_at: "2024-01-15T09:30:00Z",
                name: "name",
                traits: {
                    traits: {
                        key: "value",
                    },
                },
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                keys: {
                    keys: "keys",
                },
            },
        });
    });

    test("lookupUser (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/lookup").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("lookupUser (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/lookup").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("lookupUser (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/lookup").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("lookupUser (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/users/lookup").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.companies.lookupUser({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });
});
