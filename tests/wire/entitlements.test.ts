// This file was auto-generated by Fern from our API Definition.

import * as Schematic from "../../src/api/index";
import { SchematicClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("EntitlementsClient", () => {
    test("listCompanyOverrides (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    company: {
                        add_ons: [
                            {
                                id: "id",
                                included_credit_grants: [
                                    {
                                        billing_credit_auto_topup_enabled: true,
                                        created_at: "2024-01-15T09:30:00Z",
                                        credit_amount: 1,
                                        credit_description: "credit_description",
                                        credit_id: "credit_id",
                                        credit_name: "credit_name",
                                        id: "id",
                                        plan_id: "plan_id",
                                        plan_name: "plan_name",
                                        reset_cadence: "daily",
                                        reset_start: "billing_period",
                                        reset_type: "no_reset",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                name: "name",
                            },
                        ],
                        billing_subscriptions: [
                            {
                                cancel_at_period_end: true,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                customer_external_id: "customer_external_id",
                                discounts: [
                                    {
                                        coupon_id: "coupon_id",
                                        coupon_name: "coupon_name",
                                        discount_external_id: "discount_external_id",
                                        duration: "duration",
                                        is_active: true,
                                        started_at: "2024-01-15T09:30:00Z",
                                        subscription_external_id: "subscription_external_id",
                                    },
                                ],
                                id: "id",
                                interval: "interval",
                                period_end: 1,
                                period_start: 1,
                                products: [
                                    {
                                        billing_scheme: "per_unit",
                                        created_at: "2024-01-15T09:30:00Z",
                                        currency: "currency",
                                        environment_id: "environment_id",
                                        external_id: "external_id",
                                        id: "id",
                                        interval: "interval",
                                        name: "name",
                                        package_size: 1,
                                        price: 1,
                                        price_external_id: "price_external_id",
                                        price_id: "price_id",
                                        price_tier: [{}],
                                        provider_type: "schematic",
                                        quantity: 1.1,
                                        subscription_id: "subscription_id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        usage_type: "licensed",
                                    },
                                ],
                                provider_type: "schematic",
                                status: "status",
                                subscription_external_id: "subscription_external_id",
                                total_price: 1,
                            },
                        ],
                        created_at: "2024-01-15T09:30:00Z",
                        entity_traits: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                definition_id: "definition_id",
                                environment_id: "environment_id",
                                id: "id",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: "value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        keys: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                definition_id: "definition_id",
                                entity_id: "entity_id",
                                entity_type: "company",
                                environment_id: "environment_id",
                                id: "id",
                                key: "key",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: "value",
                            },
                        ],
                        metrics: [
                            {
                                account_id: "account_id",
                                captured_at_max: "2024-01-15T09:30:00Z",
                                captured_at_min: "2024-01-15T09:30:00Z",
                                company_id: "company_id",
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                month_reset: "month_reset",
                                period: "period",
                                value: 1,
                            },
                        ],
                        name: "name",
                        payment_methods: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                customer_external_id: "customer_external_id",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                payment_method_type: "payment_method_type",
                                provider_type: "schematic",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        plans: [{ id: "id", name: "name" }],
                        rules: [
                            {
                                account_id: "account_id",
                                condition_groups: [
                                    {
                                        conditions: [
                                            {
                                                account_id: "account_id",
                                                condition_type: "base_plan",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "eq",
                                                resource_ids: ["resource_ids"],
                                                trait_value: "trait_value",
                                            },
                                        ],
                                    },
                                ],
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "base_plan",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "eq",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                                environment_id: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                rule_type: "default",
                                value: true,
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                        user_count: 1,
                    },
                    company_id: "company_id",
                    consumption_rate: 1.1,
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    expiration_date: "2024-01-15T09:30:00Z",
                    feature: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        feature_type: "boolean",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    feature_id: "feature_id",
                    id: "id",
                    metric_period: "metric_period",
                    metric_period_month_reset: "metric_period_month_reset",
                    notes: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            external_user_id: "external_user_id",
                            external_user_name: "external_user_name",
                            id: "id",
                            note: "note",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    rule_id: "rule_id",
                    rule_id_usage_exceeded: "rule_id_usage_exceeded",
                    updated_at: "2024-01-15T09:30:00Z",
                    value_bool: true,
                    value_numeric: 1,
                    value_trait: {
                        created_at: "2024-01-15T09:30:00Z",
                        display_name: "display_name",
                        entity_type: "company",
                        hierarchy: ["hierarchy"],
                        id: "id",
                        trait_type: "boolean",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    value_trait_id: "value_trait_id",
                    value_type: "boolean",
                },
            ],
            params: {
                company_id: "company_id",
                company_ids: ["company_ids"],
                feature_id: "feature_id",
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                without_expired: true,
            },
        };
        server.mockEndpoint().get("/company-overrides").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.entitlements.listCompanyOverrides({
            companyId: "company_id",
            featureId: "feature_id",
            withoutExpired: true,
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    company: {
                        addOns: [
                            {
                                id: "id",
                                includedCreditGrants: [
                                    {
                                        billingCreditAutoTopupEnabled: true,
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        creditAmount: 1,
                                        creditDescription: "credit_description",
                                        creditId: "credit_id",
                                        creditName: "credit_name",
                                        id: "id",
                                        planId: "plan_id",
                                        planName: "plan_name",
                                        resetCadence: "daily",
                                        resetStart: "billing_period",
                                        resetType: "no_reset",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                name: "name",
                            },
                        ],
                        billingSubscriptions: [
                            {
                                cancelAtPeriodEnd: true,
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                customerExternalId: "customer_external_id",
                                discounts: [
                                    {
                                        couponId: "coupon_id",
                                        couponName: "coupon_name",
                                        discountExternalId: "discount_external_id",
                                        duration: "duration",
                                        isActive: true,
                                        startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        subscriptionExternalId: "subscription_external_id",
                                    },
                                ],
                                id: "id",
                                interval: "interval",
                                periodEnd: 1,
                                periodStart: 1,
                                products: [
                                    {
                                        billingScheme: "per_unit",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        currency: "currency",
                                        environmentId: "environment_id",
                                        externalId: "external_id",
                                        id: "id",
                                        interval: "interval",
                                        name: "name",
                                        packageSize: 1,
                                        price: 1,
                                        priceExternalId: "price_external_id",
                                        priceId: "price_id",
                                        priceTier: [{}],
                                        providerType: "schematic",
                                        quantity: 1.1,
                                        subscriptionId: "subscription_id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        usageType: "licensed",
                                    },
                                ],
                                providerType: "schematic",
                                status: "status",
                                subscriptionExternalId: "subscription_external_id",
                                totalPrice: 1,
                            },
                        ],
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        entityTraits: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                definitionId: "definition_id",
                                environmentId: "environment_id",
                                id: "id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: "value",
                            },
                        ],
                        environmentId: "environment_id",
                        id: "id",
                        keys: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                definitionId: "definition_id",
                                entityId: "entity_id",
                                entityType: "company",
                                environmentId: "environment_id",
                                id: "id",
                                key: "key",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: "value",
                            },
                        ],
                        metrics: [
                            {
                                accountId: "account_id",
                                capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                                capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                                companyId: "company_id",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                eventSubtype: "event_subtype",
                                monthReset: "month_reset",
                                period: "period",
                                value: 1,
                            },
                        ],
                        name: "name",
                        paymentMethods: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                customerExternalId: "customer_external_id",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                id: "id",
                                paymentMethodType: "payment_method_type",
                                providerType: "schematic",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        plans: [
                            {
                                id: "id",
                                name: "name",
                            },
                        ],
                        rules: [
                            {
                                accountId: "account_id",
                                conditionGroups: [
                                    {
                                        conditions: [
                                            {
                                                accountId: "account_id",
                                                conditionType: "base_plan",
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "eq",
                                                resourceIds: ["resource_ids"],
                                                traitValue: "trait_value",
                                            },
                                        ],
                                    },
                                ],
                                conditions: [
                                    {
                                        accountId: "account_id",
                                        conditionType: "base_plan",
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "eq",
                                        resourceIds: ["resource_ids"],
                                        traitValue: "trait_value",
                                    },
                                ],
                                environmentId: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                ruleType: "default",
                                value: true,
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        userCount: 1,
                    },
                    companyId: "company_id",
                    consumptionRate: 1.1,
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    environmentId: "environment_id",
                    expirationDate: new Date("2024-01-15T09:30:00.000Z"),
                    feature: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        featureType: "boolean",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    featureId: "feature_id",
                    id: "id",
                    metricPeriod: "metric_period",
                    metricPeriodMonthReset: "metric_period_month_reset",
                    notes: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            externalUserId: "external_user_id",
                            externalUserName: "external_user_name",
                            id: "id",
                            note: "note",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    ruleId: "rule_id",
                    ruleIdUsageExceeded: "rule_id_usage_exceeded",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    valueBool: true,
                    valueNumeric: 1,
                    valueTrait: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        displayName: "display_name",
                        entityType: "company",
                        hierarchy: ["hierarchy"],
                        id: "id",
                        traitType: "boolean",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    valueTraitId: "value_trait_id",
                    valueType: "boolean",
                },
            ],
            params: {
                companyId: "company_id",
                companyIds: ["company_ids"],
                featureId: "feature_id",
                featureIds: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                withoutExpired: true,
            },
        });
    });

    test("listCompanyOverrides (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-overrides").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listCompanyOverrides();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listCompanyOverrides (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-overrides").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listCompanyOverrides();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listCompanyOverrides (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-overrides").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listCompanyOverrides();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listCompanyOverrides (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-overrides").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listCompanyOverrides();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listCompanyOverrides (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/company-overrides").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listCompanyOverrides();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createCompanyOverride (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", feature_id: "feature_id", value_type: "boolean" };
        const rawResponseBody = {
            data: {
                company: {
                    add_ons: [
                        {
                            id: "id",
                            included_credit_grants: [
                                {
                                    billing_credit_auto_topup_enabled: true,
                                    created_at: "2024-01-15T09:30:00Z",
                                    credit_amount: 1,
                                    credit_description: "credit_description",
                                    credit_id: "credit_id",
                                    credit_name: "credit_name",
                                    id: "id",
                                    plan_id: "plan_id",
                                    plan_name: "plan_name",
                                    reset_cadence: "daily",
                                    reset_start: "billing_period",
                                    reset_type: "no_reset",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            name: "name",
                        },
                    ],
                    billing_credit_balances: { key: 1.1 },
                    billing_subscription: {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "per_unit",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                provider_type: "schematic",
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "licensed",
                            },
                        ],
                        provider_type: "schematic",
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                    billing_subscriptions: [
                        {
                            cancel_at_period_end: true,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            discounts: [
                                {
                                    coupon_id: "coupon_id",
                                    coupon_name: "coupon_name",
                                    discount_external_id: "discount_external_id",
                                    duration: "duration",
                                    is_active: true,
                                    started_at: "2024-01-15T09:30:00Z",
                                    subscription_external_id: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            period_end: 1,
                            period_start: 1,
                            products: [
                                {
                                    billing_scheme: "per_unit",
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    package_size: 1,
                                    price: 1,
                                    price_external_id: "price_external_id",
                                    price_id: "price_id",
                                    price_tier: [{}],
                                    provider_type: "schematic",
                                    quantity: 1.1,
                                    subscription_id: "subscription_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    usage_type: "licensed",
                                },
                            ],
                            provider_type: "schematic",
                            status: "status",
                            subscription_external_id: "subscription_external_id",
                            total_price: 1,
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    default_payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "company",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    metrics: [
                        {
                            account_id: "account_id",
                            captured_at_max: "2024-01-15T09:30:00Z",
                            captured_at_min: "2024-01-15T09:30:00Z",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            event_subtype: "event_subtype",
                            month_reset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    payment_methods: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            provider_type: "schematic",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    plan: {
                        id: "id",
                        included_credit_grants: [
                            {
                                billing_credit_auto_topup_enabled: true,
                                created_at: "2024-01-15T09:30:00Z",
                                credit_amount: 1,
                                credit_description: "credit_description",
                                credit_id: "credit_id",
                                credit_name: "credit_name",
                                id: "id",
                                plan_id: "plan_id",
                                plan_name: "plan_name",
                                reset_cadence: "daily",
                                reset_start: "billing_period",
                                reset_type: "no_reset",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        name: "name",
                    },
                    plans: [{ id: "id", name: "name" }],
                    rules: [
                        {
                            account_id: "account_id",
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            account_id: "account_id",
                                            condition_type: "base_plan",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "eq",
                                            resource_ids: ["resource_ids"],
                                            trait_value: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    account_id: "account_id",
                                    condition_type: "base_plan",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "eq",
                                    resource_ids: ["resource_ids"],
                                    trait_value: "trait_value",
                                },
                            ],
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "default",
                            value: true,
                        },
                    ],
                    traits: { key: "value" },
                    updated_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
                company_id: "company_id",
                consumption_rate: 1.1,
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                expiration_date: "2024-01-15T09:30:00Z",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                id: "id",
                metric_period: "metric_period",
                metric_period_month_reset: "metric_period_month_reset",
                notes: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        external_user_id: "external_user_id",
                        external_user_name: "external_user_name",
                        id: "id",
                        note: "note",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                rule_id: "rule_id",
                rule_id_usage_exceeded: "rule_id_usage_exceeded",
                updated_at: "2024-01-15T09:30:00Z",
                value_bool: true,
                value_numeric: 1,
                value_trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_trait_id: "value_trait_id",
                value_type: "boolean",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/company-overrides")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.createCompanyOverride({
            companyId: "company_id",
            featureId: "feature_id",
            valueType: "boolean",
        });
        expect(response).toEqual({
            data: {
                company: {
                    addOns: [
                        {
                            id: "id",
                            includedCreditGrants: [
                                {
                                    billingCreditAutoTopupEnabled: true,
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    creditAmount: 1,
                                    creditDescription: "credit_description",
                                    creditId: "credit_id",
                                    creditName: "credit_name",
                                    id: "id",
                                    planId: "plan_id",
                                    planName: "plan_name",
                                    resetCadence: "daily",
                                    resetStart: "billing_period",
                                    resetType: "no_reset",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            name: "name",
                        },
                    ],
                    billingCreditBalances: {
                        key: 1.1,
                    },
                    billingSubscription: {
                        cancelAtPeriodEnd: true,
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        customerExternalId: "customer_external_id",
                        discounts: [
                            {
                                couponId: "coupon_id",
                                couponName: "coupon_name",
                                discountExternalId: "discount_external_id",
                                duration: "duration",
                                isActive: true,
                                startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                subscriptionExternalId: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        periodEnd: 1,
                        periodStart: 1,
                        products: [
                            {
                                billingScheme: "per_unit",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                packageSize: 1,
                                price: 1,
                                priceExternalId: "price_external_id",
                                priceId: "price_id",
                                priceTier: [{}],
                                providerType: "schematic",
                                quantity: 1.1,
                                subscriptionId: "subscription_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                usageType: "licensed",
                            },
                        ],
                        providerType: "schematic",
                        status: "status",
                        subscriptionExternalId: "subscription_external_id",
                        totalPrice: 1,
                    },
                    billingSubscriptions: [
                        {
                            cancelAtPeriodEnd: true,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            currency: "currency",
                            customerExternalId: "customer_external_id",
                            discounts: [
                                {
                                    couponId: "coupon_id",
                                    couponName: "coupon_name",
                                    discountExternalId: "discount_external_id",
                                    duration: "duration",
                                    isActive: true,
                                    startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    subscriptionExternalId: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            periodEnd: 1,
                            periodStart: 1,
                            products: [
                                {
                                    billingScheme: "per_unit",
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    currency: "currency",
                                    environmentId: "environment_id",
                                    externalId: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    packageSize: 1,
                                    price: 1,
                                    priceExternalId: "price_external_id",
                                    priceId: "price_id",
                                    priceTier: [{}],
                                    providerType: "schematic",
                                    quantity: 1.1,
                                    subscriptionId: "subscription_id",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    usageType: "licensed",
                                },
                            ],
                            providerType: "schematic",
                            status: "status",
                            subscriptionExternalId: "subscription_external_id",
                            totalPrice: 1,
                        },
                    ],
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultPaymentMethod: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        customerExternalId: "customer_external_id",
                        environmentId: "environment_id",
                        externalId: "external_id",
                        id: "id",
                        paymentMethodType: "payment_method_type",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    entityTraits: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            definitionId: "definition_id",
                            environmentId: "environment_id",
                            id: "id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            value: "value",
                        },
                    ],
                    environmentId: "environment_id",
                    id: "id",
                    keys: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            definitionId: "definition_id",
                            entityId: "entity_id",
                            entityType: "company",
                            environmentId: "environment_id",
                            id: "id",
                            key: "key",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            value: "value",
                        },
                    ],
                    lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                    logoUrl: "logo_url",
                    metrics: [
                        {
                            accountId: "account_id",
                            capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                            capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                            companyId: "company_id",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            eventSubtype: "event_subtype",
                            monthReset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    paymentMethods: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            customerExternalId: "customer_external_id",
                            environmentId: "environment_id",
                            externalId: "external_id",
                            id: "id",
                            paymentMethodType: "payment_method_type",
                            providerType: "schematic",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    plan: {
                        id: "id",
                        includedCreditGrants: [
                            {
                                billingCreditAutoTopupEnabled: true,
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                creditAmount: 1,
                                creditDescription: "credit_description",
                                creditId: "credit_id",
                                creditName: "credit_name",
                                id: "id",
                                planId: "plan_id",
                                planName: "plan_name",
                                resetCadence: "daily",
                                resetStart: "billing_period",
                                resetType: "no_reset",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        name: "name",
                    },
                    plans: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    rules: [
                        {
                            accountId: "account_id",
                            conditionGroups: [
                                {
                                    conditions: [
                                        {
                                            accountId: "account_id",
                                            conditionType: "base_plan",
                                            environmentId: "environment_id",
                                            id: "id",
                                            operator: "eq",
                                            resourceIds: ["resource_ids"],
                                            traitValue: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    accountId: "account_id",
                                    conditionType: "base_plan",
                                    environmentId: "environment_id",
                                    id: "id",
                                    operator: "eq",
                                    resourceIds: ["resource_ids"],
                                    traitValue: "trait_value",
                                },
                            ],
                            environmentId: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            ruleType: "default",
                            value: true,
                        },
                    ],
                    traits: {
                        key: "value",
                    },
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    userCount: 1,
                },
                companyId: "company_id",
                consumptionRate: 1.1,
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                environmentId: "environment_id",
                expirationDate: new Date("2024-01-15T09:30:00.000Z"),
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                id: "id",
                metricPeriod: "metric_period",
                metricPeriodMonthReset: "metric_period_month_reset",
                notes: [
                    {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        externalUserId: "external_user_id",
                        externalUserName: "external_user_name",
                        id: "id",
                        note: "note",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                ruleId: "rule_id",
                ruleIdUsageExceeded: "rule_id_usage_exceeded",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                valueBool: true,
                valueNumeric: 1,
                valueTrait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueTraitId: "value_trait_id",
                valueType: "boolean",
            },
            params: {
                key: "value",
            },
        });
    });

    test("createCompanyOverride (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", feature_id: "feature_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-overrides")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createCompanyOverride({
                companyId: "company_id",
                featureId: "feature_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createCompanyOverride (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", feature_id: "feature_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-overrides")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createCompanyOverride({
                companyId: "company_id",
                featureId: "feature_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createCompanyOverride (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", feature_id: "feature_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-overrides")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createCompanyOverride({
                companyId: "company_id",
                featureId: "feature_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createCompanyOverride (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", feature_id: "feature_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-overrides")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createCompanyOverride({
                companyId: "company_id",
                featureId: "feature_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createCompanyOverride (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { company_id: "company_id", feature_id: "feature_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/company-overrides")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createCompanyOverride({
                companyId: "company_id",
                featureId: "feature_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getCompanyOverride (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                company: {
                    add_ons: [
                        {
                            id: "id",
                            included_credit_grants: [
                                {
                                    billing_credit_auto_topup_enabled: true,
                                    created_at: "2024-01-15T09:30:00Z",
                                    credit_amount: 1,
                                    credit_description: "credit_description",
                                    credit_id: "credit_id",
                                    credit_name: "credit_name",
                                    id: "id",
                                    plan_id: "plan_id",
                                    plan_name: "plan_name",
                                    reset_cadence: "daily",
                                    reset_start: "billing_period",
                                    reset_type: "no_reset",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            name: "name",
                        },
                    ],
                    billing_credit_balances: { key: 1.1 },
                    billing_subscription: {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "per_unit",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                provider_type: "schematic",
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "licensed",
                            },
                        ],
                        provider_type: "schematic",
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                    billing_subscriptions: [
                        {
                            cancel_at_period_end: true,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            discounts: [
                                {
                                    coupon_id: "coupon_id",
                                    coupon_name: "coupon_name",
                                    discount_external_id: "discount_external_id",
                                    duration: "duration",
                                    is_active: true,
                                    started_at: "2024-01-15T09:30:00Z",
                                    subscription_external_id: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            period_end: 1,
                            period_start: 1,
                            products: [
                                {
                                    billing_scheme: "per_unit",
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    package_size: 1,
                                    price: 1,
                                    price_external_id: "price_external_id",
                                    price_id: "price_id",
                                    price_tier: [{}],
                                    provider_type: "schematic",
                                    quantity: 1.1,
                                    subscription_id: "subscription_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    usage_type: "licensed",
                                },
                            ],
                            provider_type: "schematic",
                            status: "status",
                            subscription_external_id: "subscription_external_id",
                            total_price: 1,
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    default_payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "company",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    metrics: [
                        {
                            account_id: "account_id",
                            captured_at_max: "2024-01-15T09:30:00Z",
                            captured_at_min: "2024-01-15T09:30:00Z",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            event_subtype: "event_subtype",
                            month_reset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    payment_methods: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            provider_type: "schematic",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    plan: {
                        id: "id",
                        included_credit_grants: [
                            {
                                billing_credit_auto_topup_enabled: true,
                                created_at: "2024-01-15T09:30:00Z",
                                credit_amount: 1,
                                credit_description: "credit_description",
                                credit_id: "credit_id",
                                credit_name: "credit_name",
                                id: "id",
                                plan_id: "plan_id",
                                plan_name: "plan_name",
                                reset_cadence: "daily",
                                reset_start: "billing_period",
                                reset_type: "no_reset",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        name: "name",
                    },
                    plans: [{ id: "id", name: "name" }],
                    rules: [
                        {
                            account_id: "account_id",
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            account_id: "account_id",
                                            condition_type: "base_plan",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "eq",
                                            resource_ids: ["resource_ids"],
                                            trait_value: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    account_id: "account_id",
                                    condition_type: "base_plan",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "eq",
                                    resource_ids: ["resource_ids"],
                                    trait_value: "trait_value",
                                },
                            ],
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "default",
                            value: true,
                        },
                    ],
                    traits: { key: "value" },
                    updated_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
                company_id: "company_id",
                consumption_rate: 1.1,
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                expiration_date: "2024-01-15T09:30:00Z",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                id: "id",
                metric_period: "metric_period",
                metric_period_month_reset: "metric_period_month_reset",
                notes: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        external_user_id: "external_user_id",
                        external_user_name: "external_user_name",
                        id: "id",
                        note: "note",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                rule_id: "rule_id",
                rule_id_usage_exceeded: "rule_id_usage_exceeded",
                updated_at: "2024-01-15T09:30:00Z",
                value_bool: true,
                value_numeric: 1,
                value_trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_trait_id: "value_trait_id",
                value_type: "boolean",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.getCompanyOverride("company_override_id");
        expect(response).toEqual({
            data: {
                company: {
                    addOns: [
                        {
                            id: "id",
                            includedCreditGrants: [
                                {
                                    billingCreditAutoTopupEnabled: true,
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    creditAmount: 1,
                                    creditDescription: "credit_description",
                                    creditId: "credit_id",
                                    creditName: "credit_name",
                                    id: "id",
                                    planId: "plan_id",
                                    planName: "plan_name",
                                    resetCadence: "daily",
                                    resetStart: "billing_period",
                                    resetType: "no_reset",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            name: "name",
                        },
                    ],
                    billingCreditBalances: {
                        key: 1.1,
                    },
                    billingSubscription: {
                        cancelAtPeriodEnd: true,
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        customerExternalId: "customer_external_id",
                        discounts: [
                            {
                                couponId: "coupon_id",
                                couponName: "coupon_name",
                                discountExternalId: "discount_external_id",
                                duration: "duration",
                                isActive: true,
                                startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                subscriptionExternalId: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        periodEnd: 1,
                        periodStart: 1,
                        products: [
                            {
                                billingScheme: "per_unit",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                packageSize: 1,
                                price: 1,
                                priceExternalId: "price_external_id",
                                priceId: "price_id",
                                priceTier: [{}],
                                providerType: "schematic",
                                quantity: 1.1,
                                subscriptionId: "subscription_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                usageType: "licensed",
                            },
                        ],
                        providerType: "schematic",
                        status: "status",
                        subscriptionExternalId: "subscription_external_id",
                        totalPrice: 1,
                    },
                    billingSubscriptions: [
                        {
                            cancelAtPeriodEnd: true,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            currency: "currency",
                            customerExternalId: "customer_external_id",
                            discounts: [
                                {
                                    couponId: "coupon_id",
                                    couponName: "coupon_name",
                                    discountExternalId: "discount_external_id",
                                    duration: "duration",
                                    isActive: true,
                                    startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    subscriptionExternalId: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            periodEnd: 1,
                            periodStart: 1,
                            products: [
                                {
                                    billingScheme: "per_unit",
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    currency: "currency",
                                    environmentId: "environment_id",
                                    externalId: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    packageSize: 1,
                                    price: 1,
                                    priceExternalId: "price_external_id",
                                    priceId: "price_id",
                                    priceTier: [{}],
                                    providerType: "schematic",
                                    quantity: 1.1,
                                    subscriptionId: "subscription_id",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    usageType: "licensed",
                                },
                            ],
                            providerType: "schematic",
                            status: "status",
                            subscriptionExternalId: "subscription_external_id",
                            totalPrice: 1,
                        },
                    ],
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultPaymentMethod: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        customerExternalId: "customer_external_id",
                        environmentId: "environment_id",
                        externalId: "external_id",
                        id: "id",
                        paymentMethodType: "payment_method_type",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    entityTraits: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            definitionId: "definition_id",
                            environmentId: "environment_id",
                            id: "id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            value: "value",
                        },
                    ],
                    environmentId: "environment_id",
                    id: "id",
                    keys: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            definitionId: "definition_id",
                            entityId: "entity_id",
                            entityType: "company",
                            environmentId: "environment_id",
                            id: "id",
                            key: "key",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            value: "value",
                        },
                    ],
                    lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                    logoUrl: "logo_url",
                    metrics: [
                        {
                            accountId: "account_id",
                            capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                            capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                            companyId: "company_id",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            eventSubtype: "event_subtype",
                            monthReset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    paymentMethods: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            customerExternalId: "customer_external_id",
                            environmentId: "environment_id",
                            externalId: "external_id",
                            id: "id",
                            paymentMethodType: "payment_method_type",
                            providerType: "schematic",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    plan: {
                        id: "id",
                        includedCreditGrants: [
                            {
                                billingCreditAutoTopupEnabled: true,
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                creditAmount: 1,
                                creditDescription: "credit_description",
                                creditId: "credit_id",
                                creditName: "credit_name",
                                id: "id",
                                planId: "plan_id",
                                planName: "plan_name",
                                resetCadence: "daily",
                                resetStart: "billing_period",
                                resetType: "no_reset",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        name: "name",
                    },
                    plans: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    rules: [
                        {
                            accountId: "account_id",
                            conditionGroups: [
                                {
                                    conditions: [
                                        {
                                            accountId: "account_id",
                                            conditionType: "base_plan",
                                            environmentId: "environment_id",
                                            id: "id",
                                            operator: "eq",
                                            resourceIds: ["resource_ids"],
                                            traitValue: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    accountId: "account_id",
                                    conditionType: "base_plan",
                                    environmentId: "environment_id",
                                    id: "id",
                                    operator: "eq",
                                    resourceIds: ["resource_ids"],
                                    traitValue: "trait_value",
                                },
                            ],
                            environmentId: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            ruleType: "default",
                            value: true,
                        },
                    ],
                    traits: {
                        key: "value",
                    },
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    userCount: 1,
                },
                companyId: "company_id",
                consumptionRate: 1.1,
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                environmentId: "environment_id",
                expirationDate: new Date("2024-01-15T09:30:00.000Z"),
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                id: "id",
                metricPeriod: "metric_period",
                metricPeriodMonthReset: "metric_period_month_reset",
                notes: [
                    {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        externalUserId: "external_user_id",
                        externalUserName: "external_user_name",
                        id: "id",
                        note: "note",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                ruleId: "rule_id",
                ruleIdUsageExceeded: "rule_id_usage_exceeded",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                valueBool: true,
                valueNumeric: 1,
                valueTrait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueTraitId: "value_trait_id",
                valueType: "boolean",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getCompanyOverride (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getCompanyOverride (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getCompanyOverride (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getCompanyOverride (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updateCompanyOverride (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = {
            data: {
                company: {
                    add_ons: [
                        {
                            id: "id",
                            included_credit_grants: [
                                {
                                    billing_credit_auto_topup_enabled: true,
                                    created_at: "2024-01-15T09:30:00Z",
                                    credit_amount: 1,
                                    credit_description: "credit_description",
                                    credit_id: "credit_id",
                                    credit_name: "credit_name",
                                    id: "id",
                                    plan_id: "plan_id",
                                    plan_name: "plan_name",
                                    reset_cadence: "daily",
                                    reset_start: "billing_period",
                                    reset_type: "no_reset",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            name: "name",
                        },
                    ],
                    billing_credit_balances: { key: 1.1 },
                    billing_subscription: {
                        cancel_at_period_end: true,
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        customer_external_id: "customer_external_id",
                        discounts: [
                            {
                                coupon_id: "coupon_id",
                                coupon_name: "coupon_name",
                                discount_external_id: "discount_external_id",
                                duration: "duration",
                                is_active: true,
                                started_at: "2024-01-15T09:30:00Z",
                                subscription_external_id: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        period_end: 1,
                        period_start: 1,
                        products: [
                            {
                                billing_scheme: "per_unit",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                package_size: 1,
                                price: 1,
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}],
                                provider_type: "schematic",
                                quantity: 1.1,
                                subscription_id: "subscription_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "licensed",
                            },
                        ],
                        provider_type: "schematic",
                        status: "status",
                        subscription_external_id: "subscription_external_id",
                        total_price: 1,
                    },
                    billing_subscriptions: [
                        {
                            cancel_at_period_end: true,
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            customer_external_id: "customer_external_id",
                            discounts: [
                                {
                                    coupon_id: "coupon_id",
                                    coupon_name: "coupon_name",
                                    discount_external_id: "discount_external_id",
                                    duration: "duration",
                                    is_active: true,
                                    started_at: "2024-01-15T09:30:00Z",
                                    subscription_external_id: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            period_end: 1,
                            period_start: 1,
                            products: [
                                {
                                    billing_scheme: "per_unit",
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    package_size: 1,
                                    price: 1,
                                    price_external_id: "price_external_id",
                                    price_id: "price_id",
                                    price_tier: [{}],
                                    provider_type: "schematic",
                                    quantity: 1.1,
                                    subscription_id: "subscription_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    usage_type: "licensed",
                                },
                            ],
                            provider_type: "schematic",
                            status: "status",
                            subscription_external_id: "subscription_external_id",
                            total_price: 1,
                        },
                    ],
                    created_at: "2024-01-15T09:30:00Z",
                    default_payment_method: {
                        created_at: "2024-01-15T09:30:00Z",
                        customer_external_id: "customer_external_id",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        id: "id",
                        payment_method_type: "payment_method_type",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    entity_traits: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            environment_id: "environment_id",
                            id: "id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    environment_id: "environment_id",
                    id: "id",
                    keys: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            definition_id: "definition_id",
                            entity_id: "entity_id",
                            entity_type: "company",
                            environment_id: "environment_id",
                            id: "id",
                            key: "key",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: "value",
                        },
                    ],
                    last_seen_at: "2024-01-15T09:30:00Z",
                    logo_url: "logo_url",
                    metrics: [
                        {
                            account_id: "account_id",
                            captured_at_max: "2024-01-15T09:30:00Z",
                            captured_at_min: "2024-01-15T09:30:00Z",
                            company_id: "company_id",
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            event_subtype: "event_subtype",
                            month_reset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    payment_methods: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            customer_external_id: "customer_external_id",
                            environment_id: "environment_id",
                            external_id: "external_id",
                            id: "id",
                            payment_method_type: "payment_method_type",
                            provider_type: "schematic",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    plan: {
                        id: "id",
                        included_credit_grants: [
                            {
                                billing_credit_auto_topup_enabled: true,
                                created_at: "2024-01-15T09:30:00Z",
                                credit_amount: 1,
                                credit_description: "credit_description",
                                credit_id: "credit_id",
                                credit_name: "credit_name",
                                id: "id",
                                plan_id: "plan_id",
                                plan_name: "plan_name",
                                reset_cadence: "daily",
                                reset_start: "billing_period",
                                reset_type: "no_reset",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        name: "name",
                    },
                    plans: [{ id: "id", name: "name" }],
                    rules: [
                        {
                            account_id: "account_id",
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            account_id: "account_id",
                                            condition_type: "base_plan",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "eq",
                                            resource_ids: ["resource_ids"],
                                            trait_value: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    account_id: "account_id",
                                    condition_type: "base_plan",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "eq",
                                    resource_ids: ["resource_ids"],
                                    trait_value: "trait_value",
                                },
                            ],
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "default",
                            value: true,
                        },
                    ],
                    traits: { key: "value" },
                    updated_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
                company_id: "company_id",
                consumption_rate: 1.1,
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                expiration_date: "2024-01-15T09:30:00Z",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                id: "id",
                metric_period: "metric_period",
                metric_period_month_reset: "metric_period_month_reset",
                notes: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        external_user_id: "external_user_id",
                        external_user_name: "external_user_name",
                        id: "id",
                        note: "note",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                rule_id: "rule_id",
                rule_id_usage_exceeded: "rule_id_usage_exceeded",
                updated_at: "2024-01-15T09:30:00Z",
                value_bool: true,
                value_numeric: 1,
                value_trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_trait_id: "value_trait_id",
                value_type: "boolean",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/company-overrides/company_override_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.updateCompanyOverride("company_override_id", {
            valueType: "boolean",
        });
        expect(response).toEqual({
            data: {
                company: {
                    addOns: [
                        {
                            id: "id",
                            includedCreditGrants: [
                                {
                                    billingCreditAutoTopupEnabled: true,
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    creditAmount: 1,
                                    creditDescription: "credit_description",
                                    creditId: "credit_id",
                                    creditName: "credit_name",
                                    id: "id",
                                    planId: "plan_id",
                                    planName: "plan_name",
                                    resetCadence: "daily",
                                    resetStart: "billing_period",
                                    resetType: "no_reset",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            name: "name",
                        },
                    ],
                    billingCreditBalances: {
                        key: 1.1,
                    },
                    billingSubscription: {
                        cancelAtPeriodEnd: true,
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        customerExternalId: "customer_external_id",
                        discounts: [
                            {
                                couponId: "coupon_id",
                                couponName: "coupon_name",
                                discountExternalId: "discount_external_id",
                                duration: "duration",
                                isActive: true,
                                startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                subscriptionExternalId: "subscription_external_id",
                            },
                        ],
                        id: "id",
                        interval: "interval",
                        periodEnd: 1,
                        periodStart: 1,
                        products: [
                            {
                                billingScheme: "per_unit",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                id: "id",
                                interval: "interval",
                                name: "name",
                                packageSize: 1,
                                price: 1,
                                priceExternalId: "price_external_id",
                                priceId: "price_id",
                                priceTier: [{}],
                                providerType: "schematic",
                                quantity: 1.1,
                                subscriptionId: "subscription_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                usageType: "licensed",
                            },
                        ],
                        providerType: "schematic",
                        status: "status",
                        subscriptionExternalId: "subscription_external_id",
                        totalPrice: 1,
                    },
                    billingSubscriptions: [
                        {
                            cancelAtPeriodEnd: true,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            currency: "currency",
                            customerExternalId: "customer_external_id",
                            discounts: [
                                {
                                    couponId: "coupon_id",
                                    couponName: "coupon_name",
                                    discountExternalId: "discount_external_id",
                                    duration: "duration",
                                    isActive: true,
                                    startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    subscriptionExternalId: "subscription_external_id",
                                },
                            ],
                            id: "id",
                            interval: "interval",
                            periodEnd: 1,
                            periodStart: 1,
                            products: [
                                {
                                    billingScheme: "per_unit",
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    currency: "currency",
                                    environmentId: "environment_id",
                                    externalId: "external_id",
                                    id: "id",
                                    interval: "interval",
                                    name: "name",
                                    packageSize: 1,
                                    price: 1,
                                    priceExternalId: "price_external_id",
                                    priceId: "price_id",
                                    priceTier: [{}],
                                    providerType: "schematic",
                                    quantity: 1.1,
                                    subscriptionId: "subscription_id",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    usageType: "licensed",
                                },
                            ],
                            providerType: "schematic",
                            status: "status",
                            subscriptionExternalId: "subscription_external_id",
                            totalPrice: 1,
                        },
                    ],
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultPaymentMethod: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        customerExternalId: "customer_external_id",
                        environmentId: "environment_id",
                        externalId: "external_id",
                        id: "id",
                        paymentMethodType: "payment_method_type",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    entityTraits: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            definitionId: "definition_id",
                            environmentId: "environment_id",
                            id: "id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            value: "value",
                        },
                    ],
                    environmentId: "environment_id",
                    id: "id",
                    keys: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            definitionId: "definition_id",
                            entityId: "entity_id",
                            entityType: "company",
                            environmentId: "environment_id",
                            id: "id",
                            key: "key",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            value: "value",
                        },
                    ],
                    lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                    logoUrl: "logo_url",
                    metrics: [
                        {
                            accountId: "account_id",
                            capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                            capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                            companyId: "company_id",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            eventSubtype: "event_subtype",
                            monthReset: "month_reset",
                            period: "period",
                            value: 1,
                        },
                    ],
                    name: "name",
                    paymentMethods: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            customerExternalId: "customer_external_id",
                            environmentId: "environment_id",
                            externalId: "external_id",
                            id: "id",
                            paymentMethodType: "payment_method_type",
                            providerType: "schematic",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    plan: {
                        id: "id",
                        includedCreditGrants: [
                            {
                                billingCreditAutoTopupEnabled: true,
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                creditAmount: 1,
                                creditDescription: "credit_description",
                                creditId: "credit_id",
                                creditName: "credit_name",
                                id: "id",
                                planId: "plan_id",
                                planName: "plan_name",
                                resetCadence: "daily",
                                resetStart: "billing_period",
                                resetType: "no_reset",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        name: "name",
                    },
                    plans: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    rules: [
                        {
                            accountId: "account_id",
                            conditionGroups: [
                                {
                                    conditions: [
                                        {
                                            accountId: "account_id",
                                            conditionType: "base_plan",
                                            environmentId: "environment_id",
                                            id: "id",
                                            operator: "eq",
                                            resourceIds: ["resource_ids"],
                                            traitValue: "trait_value",
                                        },
                                    ],
                                },
                            ],
                            conditions: [
                                {
                                    accountId: "account_id",
                                    conditionType: "base_plan",
                                    environmentId: "environment_id",
                                    id: "id",
                                    operator: "eq",
                                    resourceIds: ["resource_ids"],
                                    traitValue: "trait_value",
                                },
                            ],
                            environmentId: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            ruleType: "default",
                            value: true,
                        },
                    ],
                    traits: {
                        key: "value",
                    },
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    userCount: 1,
                },
                companyId: "company_id",
                consumptionRate: 1.1,
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                environmentId: "environment_id",
                expirationDate: new Date("2024-01-15T09:30:00.000Z"),
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                id: "id",
                metricPeriod: "metric_period",
                metricPeriodMonthReset: "metric_period_month_reset",
                notes: [
                    {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        externalUserId: "external_user_id",
                        externalUserName: "external_user_name",
                        id: "id",
                        note: "note",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                ruleId: "rule_id",
                ruleIdUsageExceeded: "rule_id_usage_exceeded",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                valueBool: true,
                valueNumeric: 1,
                valueTrait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueTraitId: "value_trait_id",
                valueType: "boolean",
            },
            params: {
                key: "value",
            },
        });
    });

    test("updateCompanyOverride (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/company-overrides/company_override_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updateCompanyOverride("company_override_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updateCompanyOverride (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/company-overrides/company_override_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updateCompanyOverride("company_override_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updateCompanyOverride (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/company-overrides/company_override_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updateCompanyOverride("company_override_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updateCompanyOverride (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/company-overrides/company_override_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updateCompanyOverride("company_override_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updateCompanyOverride (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/company-overrides/company_override_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updateCompanyOverride("company_override_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteCompanyOverride (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server
            .mockEndpoint()
            .delete("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.deleteCompanyOverride("company_override_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteCompanyOverride (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deleteCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteCompanyOverride (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deleteCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteCompanyOverride (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deleteCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteCompanyOverride (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deleteCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteCompanyOverride (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/company-overrides/company_override_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deleteCompanyOverride("company_override_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countCompanyOverrides (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: {
                company_id: "company_id",
                company_ids: ["company_ids"],
                feature_id: "feature_id",
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                without_expired: true,
            },
        };
        server
            .mockEndpoint()
            .get("/company-overrides/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.countCompanyOverrides({
            companyId: "company_id",
            featureId: "feature_id",
            withoutExpired: true,
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                companyId: "company_id",
                companyIds: ["company_ids"],
                featureId: "feature_id",
                featureIds: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                withoutExpired: true,
            },
        });
    });

    test("countCompanyOverrides (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countCompanyOverrides();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countCompanyOverrides (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countCompanyOverrides();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countCompanyOverrides (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countCompanyOverrides();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countCompanyOverrides (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countCompanyOverrides();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countCompanyOverrides (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/company-overrides/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countCompanyOverrides();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listFeatureCompanies (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    access: true,
                    allocation: 1,
                    allocation_type: "boolean",
                    company: {
                        add_ons: [
                            {
                                id: "id",
                                included_credit_grants: [
                                    {
                                        billing_credit_auto_topup_enabled: true,
                                        created_at: "2024-01-15T09:30:00Z",
                                        credit_amount: 1,
                                        credit_description: "credit_description",
                                        credit_id: "credit_id",
                                        credit_name: "credit_name",
                                        id: "id",
                                        plan_id: "plan_id",
                                        plan_name: "plan_name",
                                        reset_cadence: "daily",
                                        reset_start: "billing_period",
                                        reset_type: "no_reset",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                name: "name",
                            },
                        ],
                        billing_subscriptions: [
                            {
                                cancel_at_period_end: true,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                customer_external_id: "customer_external_id",
                                discounts: [
                                    {
                                        coupon_id: "coupon_id",
                                        coupon_name: "coupon_name",
                                        discount_external_id: "discount_external_id",
                                        duration: "duration",
                                        is_active: true,
                                        started_at: "2024-01-15T09:30:00Z",
                                        subscription_external_id: "subscription_external_id",
                                    },
                                ],
                                id: "id",
                                interval: "interval",
                                period_end: 1,
                                period_start: 1,
                                products: [
                                    {
                                        billing_scheme: "per_unit",
                                        created_at: "2024-01-15T09:30:00Z",
                                        currency: "currency",
                                        environment_id: "environment_id",
                                        external_id: "external_id",
                                        id: "id",
                                        interval: "interval",
                                        name: "name",
                                        package_size: 1,
                                        price: 1,
                                        price_external_id: "price_external_id",
                                        price_id: "price_id",
                                        price_tier: [{}],
                                        provider_type: "schematic",
                                        quantity: 1.1,
                                        subscription_id: "subscription_id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        usage_type: "licensed",
                                    },
                                ],
                                provider_type: "schematic",
                                status: "status",
                                subscription_external_id: "subscription_external_id",
                                total_price: 1,
                            },
                        ],
                        created_at: "2024-01-15T09:30:00Z",
                        entity_traits: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                definition_id: "definition_id",
                                environment_id: "environment_id",
                                id: "id",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: "value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        keys: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                definition_id: "definition_id",
                                entity_id: "entity_id",
                                entity_type: "company",
                                environment_id: "environment_id",
                                id: "id",
                                key: "key",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: "value",
                            },
                        ],
                        metrics: [
                            {
                                account_id: "account_id",
                                captured_at_max: "2024-01-15T09:30:00Z",
                                captured_at_min: "2024-01-15T09:30:00Z",
                                company_id: "company_id",
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                month_reset: "month_reset",
                                period: "period",
                                value: 1,
                            },
                        ],
                        name: "name",
                        payment_methods: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                customer_external_id: "customer_external_id",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                payment_method_type: "payment_method_type",
                                provider_type: "schematic",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        plans: [{ id: "id", name: "name" }],
                        rules: [
                            {
                                account_id: "account_id",
                                condition_groups: [
                                    {
                                        conditions: [
                                            {
                                                account_id: "account_id",
                                                condition_type: "base_plan",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "eq",
                                                resource_ids: ["resource_ids"],
                                                trait_value: "trait_value",
                                            },
                                        ],
                                    },
                                ],
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "base_plan",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "eq",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                                environment_id: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                rule_type: "default",
                                value: true,
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                        user_count: 1,
                    },
                    company_override: {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        feature_id: "feature_id",
                        id: "id",
                        notes: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                external_user_id: "external_user_id",
                                external_user_name: "external_user_name",
                                id: "id",
                                note: "note",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                        value_type: "boolean",
                    },
                    credit_consumption_rate: 1.1,
                    credit_grant_counts: { key: 1.1 },
                    credit_grant_details: [{ grant_reason: "billing_credit_auto_topup", quantity: 1.1 }],
                    credit_grant_reason: "billing_credit_auto_topup",
                    credit_remaining: 1.1,
                    credit_type_icon: "credit_type_icon",
                    credit_used: 1.1,
                    effective_limit: 1,
                    effective_price: 1.1,
                    entitlement_expiration_date: "2024-01-15T09:30:00Z",
                    entitlement_id: "entitlement_id",
                    entitlement_source: "entitlement_source",
                    entitlement_type: "company_override",
                    feature: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        feature_type: "boolean",
                        flags: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                default_value: true,
                                description: "description",
                                flag_type: "boolean",
                                id: "id",
                                key: "key",
                                name: "name",
                                rules: [
                                    {
                                        condition_groups: [
                                            {
                                                conditions: [
                                                    {
                                                        condition_type: "condition_type",
                                                        created_at: "2024-01-15T09:30:00Z",
                                                        environment_id: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resource_ids: ["resource_ids"],
                                                        resources: [{ id: "id", name: "name" }],
                                                        rule_id: "rule_id",
                                                        trait_value: "trait_value",
                                                        updated_at: "2024-01-15T09:30:00Z",
                                                    },
                                                ],
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                rule_id: "rule_id",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        conditions: [
                                            {
                                                condition_type: "condition_type",
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resource_ids: ["resource_ids"],
                                                resources: [{ id: "id", name: "name" }],
                                                rule_id: "rule_id",
                                                trait_value: "trait_value",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        rule_type: "rule_type",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: true,
                                    },
                                ],
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plans: [{ id: "id", name: "name" }],
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    has_valid_allocation: true,
                    is_unlimited: true,
                    metric_reset_at: "2024-01-15T09:30:00Z",
                    month_reset: "month_reset",
                    monthly_usage_based_price: {
                        billing_scheme: "per_unit",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        is_active: true,
                        package_size: 1,
                        price: 1,
                        price_external_id: "price_external_id",
                        price_id: "price_id",
                        price_tier: [{}],
                        product_external_id: "product_external_id",
                        product_id: "product_id",
                        product_name: "product_name",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                        usage_type: "licensed",
                    },
                    overuse: 1,
                    percent_used: 1.1,
                    period: "period",
                    plan: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plan_type: "plan",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    plan_entitlement: {
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        feature_id: "feature_id",
                        id: "id",
                        plan_id: "plan_id",
                        rule_id: "rule_id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value_type: "boolean",
                    },
                    price_behavior: "credit_burndown",
                    soft_limit: 1,
                    usage: 1,
                    yearly_usage_based_price: {
                        billing_scheme: "per_unit",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        is_active: true,
                        package_size: 1,
                        price: 1,
                        price_external_id: "price_external_id",
                        price_id: "price_id",
                        price_tier: [{}],
                        product_external_id: "product_external_id",
                        product_id: "product_id",
                        product_name: "product_name",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                        usage_type: "licensed",
                    },
                },
            ],
            params: { feature_id: "feature_id", limit: 1, offset: 1, q: "q" },
        };
        server.mockEndpoint().get("/feature-companies").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.entitlements.listFeatureCompanies({
            featureId: "feature_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    access: true,
                    allocation: 1,
                    allocationType: "boolean",
                    company: {
                        addOns: [
                            {
                                id: "id",
                                includedCreditGrants: [
                                    {
                                        billingCreditAutoTopupEnabled: true,
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        creditAmount: 1,
                                        creditDescription: "credit_description",
                                        creditId: "credit_id",
                                        creditName: "credit_name",
                                        id: "id",
                                        planId: "plan_id",
                                        planName: "plan_name",
                                        resetCadence: "daily",
                                        resetStart: "billing_period",
                                        resetType: "no_reset",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                name: "name",
                            },
                        ],
                        billingSubscriptions: [
                            {
                                cancelAtPeriodEnd: true,
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                customerExternalId: "customer_external_id",
                                discounts: [
                                    {
                                        couponId: "coupon_id",
                                        couponName: "coupon_name",
                                        discountExternalId: "discount_external_id",
                                        duration: "duration",
                                        isActive: true,
                                        startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        subscriptionExternalId: "subscription_external_id",
                                    },
                                ],
                                id: "id",
                                interval: "interval",
                                periodEnd: 1,
                                periodStart: 1,
                                products: [
                                    {
                                        billingScheme: "per_unit",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        currency: "currency",
                                        environmentId: "environment_id",
                                        externalId: "external_id",
                                        id: "id",
                                        interval: "interval",
                                        name: "name",
                                        packageSize: 1,
                                        price: 1,
                                        priceExternalId: "price_external_id",
                                        priceId: "price_id",
                                        priceTier: [{}],
                                        providerType: "schematic",
                                        quantity: 1.1,
                                        subscriptionId: "subscription_id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        usageType: "licensed",
                                    },
                                ],
                                providerType: "schematic",
                                status: "status",
                                subscriptionExternalId: "subscription_external_id",
                                totalPrice: 1,
                            },
                        ],
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        entityTraits: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                definitionId: "definition_id",
                                environmentId: "environment_id",
                                id: "id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: "value",
                            },
                        ],
                        environmentId: "environment_id",
                        id: "id",
                        keys: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                definitionId: "definition_id",
                                entityId: "entity_id",
                                entityType: "company",
                                environmentId: "environment_id",
                                id: "id",
                                key: "key",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: "value",
                            },
                        ],
                        metrics: [
                            {
                                accountId: "account_id",
                                capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                                capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                                companyId: "company_id",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                eventSubtype: "event_subtype",
                                monthReset: "month_reset",
                                period: "period",
                                value: 1,
                            },
                        ],
                        name: "name",
                        paymentMethods: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                customerExternalId: "customer_external_id",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                id: "id",
                                paymentMethodType: "payment_method_type",
                                providerType: "schematic",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        plans: [
                            {
                                id: "id",
                                name: "name",
                            },
                        ],
                        rules: [
                            {
                                accountId: "account_id",
                                conditionGroups: [
                                    {
                                        conditions: [
                                            {
                                                accountId: "account_id",
                                                conditionType: "base_plan",
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "eq",
                                                resourceIds: ["resource_ids"],
                                                traitValue: "trait_value",
                                            },
                                        ],
                                    },
                                ],
                                conditions: [
                                    {
                                        accountId: "account_id",
                                        conditionType: "base_plan",
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "eq",
                                        resourceIds: ["resource_ids"],
                                        traitValue: "trait_value",
                                    },
                                ],
                                environmentId: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                ruleType: "default",
                                value: true,
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        userCount: 1,
                    },
                    companyOverride: {
                        companyId: "company_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        featureId: "feature_id",
                        id: "id",
                        notes: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                externalUserId: "external_user_id",
                                externalUserName: "external_user_name",
                                id: "id",
                                note: "note",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        valueType: "boolean",
                    },
                    creditConsumptionRate: 1.1,
                    creditGrantCounts: {
                        key: 1.1,
                    },
                    creditGrantDetails: [
                        {
                            grantReason: "billing_credit_auto_topup",
                            quantity: 1.1,
                        },
                    ],
                    creditGrantReason: "billing_credit_auto_topup",
                    creditRemaining: 1.1,
                    creditTypeIcon: "credit_type_icon",
                    creditUsed: 1.1,
                    effectiveLimit: 1,
                    effectivePrice: 1.1,
                    entitlementExpirationDate: new Date("2024-01-15T09:30:00.000Z"),
                    entitlementId: "entitlement_id",
                    entitlementSource: "entitlement_source",
                    entitlementType: "company_override",
                    feature: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        featureType: "boolean",
                        flags: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                defaultValue: true,
                                description: "description",
                                flagType: "boolean",
                                id: "id",
                                key: "key",
                                name: "name",
                                rules: [
                                    {
                                        conditionGroups: [
                                            {
                                                conditions: [
                                                    {
                                                        conditionType: "condition_type",
                                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        environmentId: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resourceIds: ["resource_ids"],
                                                        resources: [
                                                            {
                                                                id: "id",
                                                                name: "name",
                                                            },
                                                        ],
                                                        ruleId: "rule_id",
                                                        traitValue: "trait_value",
                                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    },
                                                ],
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                ruleId: "rule_id",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        conditions: [
                                            {
                                                conditionType: "condition_type",
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resourceIds: ["resource_ids"],
                                                resources: [
                                                    {
                                                        id: "id",
                                                        name: "name",
                                                    },
                                                ],
                                                ruleId: "rule_id",
                                                traitValue: "trait_value",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        ruleType: "rule_type",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: true,
                                    },
                                ],
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plans: [
                            {
                                id: "id",
                                name: "name",
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    hasValidAllocation: true,
                    isUnlimited: true,
                    metricResetAt: new Date("2024-01-15T09:30:00.000Z"),
                    monthReset: "month_reset",
                    monthlyUsageBasedPrice: {
                        billingScheme: "per_unit",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        isActive: true,
                        packageSize: 1,
                        price: 1,
                        priceExternalId: "price_external_id",
                        priceId: "price_id",
                        priceTier: [{}],
                        productExternalId: "product_external_id",
                        productId: "product_id",
                        productName: "product_name",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        usageType: "licensed",
                    },
                    overuse: 1,
                    percentUsed: 1.1,
                    period: "period",
                    plan: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        planType: "plan",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    planEntitlement: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        featureId: "feature_id",
                        id: "id",
                        planId: "plan_id",
                        ruleId: "rule_id",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        valueType: "boolean",
                    },
                    priceBehavior: "credit_burndown",
                    softLimit: 1,
                    usage: 1,
                    yearlyUsageBasedPrice: {
                        billingScheme: "per_unit",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        isActive: true,
                        packageSize: 1,
                        price: 1,
                        priceExternalId: "price_external_id",
                        priceId: "price_id",
                        priceTier: [{}],
                        productExternalId: "product_external_id",
                        productId: "product_id",
                        productName: "product_name",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        usageType: "licensed",
                    },
                },
            ],
            params: {
                featureId: "feature_id",
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("listFeatureCompanies (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-companies").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listFeatureCompanies (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-companies").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listFeatureCompanies (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-companies").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listFeatureCompanies (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-companies").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listFeatureCompanies (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-companies").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countFeatureCompanies (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: { feature_id: "feature_id", limit: 1, offset: 1, q: "q" },
        };
        server
            .mockEndpoint()
            .get("/feature-companies/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.countFeatureCompanies({
            featureId: "feature_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                featureId: "feature_id",
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("countFeatureCompanies (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-companies/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countFeatureCompanies (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-companies/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countFeatureCompanies (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-companies/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countFeatureCompanies (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-companies/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countFeatureCompanies (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-companies/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureCompanies({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listFeatureUsage (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    access: true,
                    allocation: 1,
                    allocation_type: "boolean",
                    company_override: {
                        company_id: "company_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        feature_id: "feature_id",
                        id: "id",
                        notes: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                external_user_id: "external_user_id",
                                external_user_name: "external_user_name",
                                id: "id",
                                note: "note",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                        value_type: "boolean",
                    },
                    credit_consumption_rate: 1.1,
                    credit_grant_counts: { key: 1.1 },
                    credit_grant_details: [{ grant_reason: "billing_credit_auto_topup", quantity: 1.1 }],
                    credit_grant_reason: "billing_credit_auto_topup",
                    credit_remaining: 1.1,
                    credit_type_icon: "credit_type_icon",
                    credit_used: 1.1,
                    effective_limit: 1,
                    effective_price: 1.1,
                    entitlement_expiration_date: "2024-01-15T09:30:00Z",
                    entitlement_id: "entitlement_id",
                    entitlement_source: "entitlement_source",
                    entitlement_type: "company_override",
                    feature: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        feature_type: "boolean",
                        flags: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                default_value: true,
                                description: "description",
                                flag_type: "boolean",
                                id: "id",
                                key: "key",
                                name: "name",
                                rules: [
                                    {
                                        condition_groups: [
                                            {
                                                conditions: [
                                                    {
                                                        condition_type: "condition_type",
                                                        created_at: "2024-01-15T09:30:00Z",
                                                        environment_id: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resource_ids: ["resource_ids"],
                                                        resources: [{ id: "id", name: "name" }],
                                                        rule_id: "rule_id",
                                                        trait_value: "trait_value",
                                                        updated_at: "2024-01-15T09:30:00Z",
                                                    },
                                                ],
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                rule_id: "rule_id",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        conditions: [
                                            {
                                                condition_type: "condition_type",
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resource_ids: ["resource_ids"],
                                                resources: [{ id: "id", name: "name" }],
                                                rule_id: "rule_id",
                                                trait_value: "trait_value",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        rule_type: "rule_type",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: true,
                                    },
                                ],
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plans: [{ id: "id", name: "name" }],
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    has_valid_allocation: true,
                    is_unlimited: true,
                    metric_reset_at: "2024-01-15T09:30:00Z",
                    month_reset: "month_reset",
                    monthly_usage_based_price: {
                        billing_scheme: "per_unit",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        is_active: true,
                        package_size: 1,
                        price: 1,
                        price_external_id: "price_external_id",
                        price_id: "price_id",
                        price_tier: [{}],
                        product_external_id: "product_external_id",
                        product_id: "product_id",
                        product_name: "product_name",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                        usage_type: "licensed",
                    },
                    overuse: 1,
                    percent_used: 1.1,
                    period: "period",
                    plan: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plan_type: "plan",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    plan_entitlement: {
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        feature_id: "feature_id",
                        id: "id",
                        plan_id: "plan_id",
                        rule_id: "rule_id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value_type: "boolean",
                    },
                    price_behavior: "credit_burndown",
                    soft_limit: 1,
                    usage: 1,
                    yearly_usage_based_price: {
                        billing_scheme: "per_unit",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        is_active: true,
                        package_size: 1,
                        price: 1,
                        price_external_id: "price_external_id",
                        price_id: "price_id",
                        price_tier: [{}],
                        product_external_id: "product_external_id",
                        product_id: "product_id",
                        product_name: "product_name",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                        usage_type: "licensed",
                    },
                },
            ],
            params: {
                company_id: "company_id",
                company_keys: { key: "value" },
                feature_ids: ["feature_ids"],
                include_usage_aggregation: true,
                limit: 1,
                offset: 1,
                q: "q",
                without_negative_entitlements: true,
            },
        };
        server.mockEndpoint().get("/feature-usage").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.entitlements.listFeatureUsage({
            companyId: "company_id",
            includeUsageAggregation: true,
            q: "q",
            withoutNegativeEntitlements: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    access: true,
                    allocation: 1,
                    allocationType: "boolean",
                    companyOverride: {
                        companyId: "company_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        featureId: "feature_id",
                        id: "id",
                        notes: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                externalUserId: "external_user_id",
                                externalUserName: "external_user_name",
                                id: "id",
                                note: "note",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        valueType: "boolean",
                    },
                    creditConsumptionRate: 1.1,
                    creditGrantCounts: {
                        key: 1.1,
                    },
                    creditGrantDetails: [
                        {
                            grantReason: "billing_credit_auto_topup",
                            quantity: 1.1,
                        },
                    ],
                    creditGrantReason: "billing_credit_auto_topup",
                    creditRemaining: 1.1,
                    creditTypeIcon: "credit_type_icon",
                    creditUsed: 1.1,
                    effectiveLimit: 1,
                    effectivePrice: 1.1,
                    entitlementExpirationDate: new Date("2024-01-15T09:30:00.000Z"),
                    entitlementId: "entitlement_id",
                    entitlementSource: "entitlement_source",
                    entitlementType: "company_override",
                    feature: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        featureType: "boolean",
                        flags: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                defaultValue: true,
                                description: "description",
                                flagType: "boolean",
                                id: "id",
                                key: "key",
                                name: "name",
                                rules: [
                                    {
                                        conditionGroups: [
                                            {
                                                conditions: [
                                                    {
                                                        conditionType: "condition_type",
                                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        environmentId: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resourceIds: ["resource_ids"],
                                                        resources: [
                                                            {
                                                                id: "id",
                                                                name: "name",
                                                            },
                                                        ],
                                                        ruleId: "rule_id",
                                                        traitValue: "trait_value",
                                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    },
                                                ],
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                ruleId: "rule_id",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        conditions: [
                                            {
                                                conditionType: "condition_type",
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resourceIds: ["resource_ids"],
                                                resources: [
                                                    {
                                                        id: "id",
                                                        name: "name",
                                                    },
                                                ],
                                                ruleId: "rule_id",
                                                traitValue: "trait_value",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        ruleType: "rule_type",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: true,
                                    },
                                ],
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plans: [
                            {
                                id: "id",
                                name: "name",
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    hasValidAllocation: true,
                    isUnlimited: true,
                    metricResetAt: new Date("2024-01-15T09:30:00.000Z"),
                    monthReset: "month_reset",
                    monthlyUsageBasedPrice: {
                        billingScheme: "per_unit",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        isActive: true,
                        packageSize: 1,
                        price: 1,
                        priceExternalId: "price_external_id",
                        priceId: "price_id",
                        priceTier: [{}],
                        productExternalId: "product_external_id",
                        productId: "product_id",
                        productName: "product_name",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        usageType: "licensed",
                    },
                    overuse: 1,
                    percentUsed: 1.1,
                    period: "period",
                    plan: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        planType: "plan",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    planEntitlement: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        featureId: "feature_id",
                        id: "id",
                        planId: "plan_id",
                        ruleId: "rule_id",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        valueType: "boolean",
                    },
                    priceBehavior: "credit_burndown",
                    softLimit: 1,
                    usage: 1,
                    yearlyUsageBasedPrice: {
                        billingScheme: "per_unit",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        isActive: true,
                        packageSize: 1,
                        price: 1,
                        priceExternalId: "price_external_id",
                        priceId: "price_id",
                        priceTier: [{}],
                        productExternalId: "product_external_id",
                        productId: "product_id",
                        productName: "product_name",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        usageType: "licensed",
                    },
                },
            ],
            params: {
                companyId: "company_id",
                companyKeys: {
                    key: "value",
                },
                featureIds: ["feature_ids"],
                includeUsageAggregation: true,
                limit: 1,
                offset: 1,
                q: "q",
                withoutNegativeEntitlements: true,
            },
        });
    });

    test("listFeatureUsage (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-usage").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsage();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listFeatureUsage (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-usage").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsage();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listFeatureUsage (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-usage").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsage();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listFeatureUsage (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-usage").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsage();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listFeatureUsage (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-usage").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsage();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countFeatureUsage (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: {
                company_id: "company_id",
                company_keys: { key: "value" },
                feature_ids: ["feature_ids"],
                include_usage_aggregation: true,
                limit: 1,
                offset: 1,
                q: "q",
                without_negative_entitlements: true,
            },
        };
        server
            .mockEndpoint()
            .get("/feature-usage/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.countFeatureUsage({
            companyId: "company_id",
            includeUsageAggregation: true,
            q: "q",
            withoutNegativeEntitlements: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                companyId: "company_id",
                companyKeys: {
                    key: "value",
                },
                featureIds: ["feature_ids"],
                includeUsageAggregation: true,
                limit: 1,
                offset: 1,
                q: "q",
                withoutNegativeEntitlements: true,
            },
        });
    });

    test("countFeatureUsage (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-usage/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsage();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countFeatureUsage (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-usage/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsage();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countFeatureUsage (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-usage/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsage();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countFeatureUsage (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-usage/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsage();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countFeatureUsage (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-usage/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsage();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listFeatureUsers (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    access: true,
                    allocation: 1,
                    allocation_type: "boolean",
                    company: {
                        add_ons: [
                            {
                                id: "id",
                                included_credit_grants: [
                                    {
                                        billing_credit_auto_topup_enabled: true,
                                        created_at: "2024-01-15T09:30:00Z",
                                        credit_amount: 1,
                                        credit_description: "credit_description",
                                        credit_id: "credit_id",
                                        credit_name: "credit_name",
                                        id: "id",
                                        plan_id: "plan_id",
                                        plan_name: "plan_name",
                                        reset_cadence: "daily",
                                        reset_start: "billing_period",
                                        reset_type: "no_reset",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                name: "name",
                            },
                        ],
                        billing_subscriptions: [
                            {
                                cancel_at_period_end: true,
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                customer_external_id: "customer_external_id",
                                discounts: [
                                    {
                                        coupon_id: "coupon_id",
                                        coupon_name: "coupon_name",
                                        discount_external_id: "discount_external_id",
                                        duration: "duration",
                                        is_active: true,
                                        started_at: "2024-01-15T09:30:00Z",
                                        subscription_external_id: "subscription_external_id",
                                    },
                                ],
                                id: "id",
                                interval: "interval",
                                period_end: 1,
                                period_start: 1,
                                products: [
                                    {
                                        billing_scheme: "per_unit",
                                        created_at: "2024-01-15T09:30:00Z",
                                        currency: "currency",
                                        environment_id: "environment_id",
                                        external_id: "external_id",
                                        id: "id",
                                        interval: "interval",
                                        name: "name",
                                        package_size: 1,
                                        price: 1,
                                        price_external_id: "price_external_id",
                                        price_id: "price_id",
                                        price_tier: [{}],
                                        provider_type: "schematic",
                                        quantity: 1.1,
                                        subscription_id: "subscription_id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        usage_type: "licensed",
                                    },
                                ],
                                provider_type: "schematic",
                                status: "status",
                                subscription_external_id: "subscription_external_id",
                                total_price: 1,
                            },
                        ],
                        created_at: "2024-01-15T09:30:00Z",
                        entity_traits: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                definition_id: "definition_id",
                                environment_id: "environment_id",
                                id: "id",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: "value",
                            },
                        ],
                        environment_id: "environment_id",
                        id: "id",
                        keys: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                definition_id: "definition_id",
                                entity_id: "entity_id",
                                entity_type: "company",
                                environment_id: "environment_id",
                                id: "id",
                                key: "key",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: "value",
                            },
                        ],
                        metrics: [
                            {
                                account_id: "account_id",
                                captured_at_max: "2024-01-15T09:30:00Z",
                                captured_at_min: "2024-01-15T09:30:00Z",
                                company_id: "company_id",
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                event_subtype: "event_subtype",
                                month_reset: "month_reset",
                                period: "period",
                                value: 1,
                            },
                        ],
                        name: "name",
                        payment_methods: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                customer_external_id: "customer_external_id",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                id: "id",
                                payment_method_type: "payment_method_type",
                                provider_type: "schematic",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        plans: [{ id: "id", name: "name" }],
                        rules: [
                            {
                                account_id: "account_id",
                                condition_groups: [
                                    {
                                        conditions: [
                                            {
                                                account_id: "account_id",
                                                condition_type: "base_plan",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "eq",
                                                resource_ids: ["resource_ids"],
                                                trait_value: "trait_value",
                                            },
                                        ],
                                    },
                                ],
                                conditions: [
                                    {
                                        account_id: "account_id",
                                        condition_type: "base_plan",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "eq",
                                        resource_ids: ["resource_ids"],
                                        trait_value: "trait_value",
                                    },
                                ],
                                environment_id: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                rule_type: "default",
                                value: true,
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                        user_count: 1,
                    },
                    entitlement_id: "entitlement_id",
                    entitlement_type: "company_override",
                    feature: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        feature_type: "boolean",
                        flags: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                default_value: true,
                                description: "description",
                                flag_type: "boolean",
                                id: "id",
                                key: "key",
                                name: "name",
                                rules: [
                                    {
                                        condition_groups: [
                                            {
                                                conditions: [
                                                    {
                                                        condition_type: "condition_type",
                                                        created_at: "2024-01-15T09:30:00Z",
                                                        environment_id: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resource_ids: ["resource_ids"],
                                                        resources: [{ id: "id", name: "name" }],
                                                        rule_id: "rule_id",
                                                        trait_value: "trait_value",
                                                        updated_at: "2024-01-15T09:30:00Z",
                                                    },
                                                ],
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                rule_id: "rule_id",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        conditions: [
                                            {
                                                condition_type: "condition_type",
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resource_ids: ["resource_ids"],
                                                resources: [{ id: "id", name: "name" }],
                                                rule_id: "rule_id",
                                                trait_value: "trait_value",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        rule_type: "rule_type",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: true,
                                    },
                                ],
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plans: [{ id: "id", name: "name" }],
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    metric_reset_at: "2024-01-15T09:30:00Z",
                    month_reset: "month_reset",
                    period: "period",
                    plan: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plan_type: "plan",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    usage: 1,
                    user: {
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                },
            ],
            params: { feature_id: "feature_id", limit: 1, offset: 1, q: "q" },
        };
        server.mockEndpoint().get("/feature-users").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.entitlements.listFeatureUsers({
            featureId: "feature_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    access: true,
                    allocation: 1,
                    allocationType: "boolean",
                    company: {
                        addOns: [
                            {
                                id: "id",
                                includedCreditGrants: [
                                    {
                                        billingCreditAutoTopupEnabled: true,
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        creditAmount: 1,
                                        creditDescription: "credit_description",
                                        creditId: "credit_id",
                                        creditName: "credit_name",
                                        id: "id",
                                        planId: "plan_id",
                                        planName: "plan_name",
                                        resetCadence: "daily",
                                        resetStart: "billing_period",
                                        resetType: "no_reset",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                name: "name",
                            },
                        ],
                        billingSubscriptions: [
                            {
                                cancelAtPeriodEnd: true,
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                customerExternalId: "customer_external_id",
                                discounts: [
                                    {
                                        couponId: "coupon_id",
                                        couponName: "coupon_name",
                                        discountExternalId: "discount_external_id",
                                        duration: "duration",
                                        isActive: true,
                                        startedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        subscriptionExternalId: "subscription_external_id",
                                    },
                                ],
                                id: "id",
                                interval: "interval",
                                periodEnd: 1,
                                periodStart: 1,
                                products: [
                                    {
                                        billingScheme: "per_unit",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        currency: "currency",
                                        environmentId: "environment_id",
                                        externalId: "external_id",
                                        id: "id",
                                        interval: "interval",
                                        name: "name",
                                        packageSize: 1,
                                        price: 1,
                                        priceExternalId: "price_external_id",
                                        priceId: "price_id",
                                        priceTier: [{}],
                                        providerType: "schematic",
                                        quantity: 1.1,
                                        subscriptionId: "subscription_id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        usageType: "licensed",
                                    },
                                ],
                                providerType: "schematic",
                                status: "status",
                                subscriptionExternalId: "subscription_external_id",
                                totalPrice: 1,
                            },
                        ],
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        entityTraits: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                definitionId: "definition_id",
                                environmentId: "environment_id",
                                id: "id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: "value",
                            },
                        ],
                        environmentId: "environment_id",
                        id: "id",
                        keys: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                definitionId: "definition_id",
                                entityId: "entity_id",
                                entityType: "company",
                                environmentId: "environment_id",
                                id: "id",
                                key: "key",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: "value",
                            },
                        ],
                        metrics: [
                            {
                                accountId: "account_id",
                                capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                                capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                                companyId: "company_id",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                eventSubtype: "event_subtype",
                                monthReset: "month_reset",
                                period: "period",
                                value: 1,
                            },
                        ],
                        name: "name",
                        paymentMethods: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                customerExternalId: "customer_external_id",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                id: "id",
                                paymentMethodType: "payment_method_type",
                                providerType: "schematic",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        plans: [
                            {
                                id: "id",
                                name: "name",
                            },
                        ],
                        rules: [
                            {
                                accountId: "account_id",
                                conditionGroups: [
                                    {
                                        conditions: [
                                            {
                                                accountId: "account_id",
                                                conditionType: "base_plan",
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "eq",
                                                resourceIds: ["resource_ids"],
                                                traitValue: "trait_value",
                                            },
                                        ],
                                    },
                                ],
                                conditions: [
                                    {
                                        accountId: "account_id",
                                        conditionType: "base_plan",
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "eq",
                                        resourceIds: ["resource_ids"],
                                        traitValue: "trait_value",
                                    },
                                ],
                                environmentId: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                ruleType: "default",
                                value: true,
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        userCount: 1,
                    },
                    entitlementId: "entitlement_id",
                    entitlementType: "company_override",
                    feature: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        featureType: "boolean",
                        flags: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                defaultValue: true,
                                description: "description",
                                flagType: "boolean",
                                id: "id",
                                key: "key",
                                name: "name",
                                rules: [
                                    {
                                        conditionGroups: [
                                            {
                                                conditions: [
                                                    {
                                                        conditionType: "condition_type",
                                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        environmentId: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resourceIds: ["resource_ids"],
                                                        resources: [
                                                            {
                                                                id: "id",
                                                                name: "name",
                                                            },
                                                        ],
                                                        ruleId: "rule_id",
                                                        traitValue: "trait_value",
                                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    },
                                                ],
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                ruleId: "rule_id",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        conditions: [
                                            {
                                                conditionType: "condition_type",
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resourceIds: ["resource_ids"],
                                                resources: [
                                                    {
                                                        id: "id",
                                                        name: "name",
                                                    },
                                                ],
                                                ruleId: "rule_id",
                                                traitValue: "trait_value",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        ruleType: "rule_type",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: true,
                                    },
                                ],
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plans: [
                            {
                                id: "id",
                                name: "name",
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    metricResetAt: new Date("2024-01-15T09:30:00.000Z"),
                    monthReset: "month_reset",
                    period: "period",
                    plan: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        planType: "plan",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    usage: 1,
                    user: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        id: "id",
                        name: "name",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                },
            ],
            params: {
                featureId: "feature_id",
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("listFeatureUsers (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-users").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listFeatureUsers (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-users").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listFeatureUsers (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-users").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listFeatureUsers (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-users").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listFeatureUsers (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/feature-users").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countFeatureUsers (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: { feature_id: "feature_id", limit: 1, offset: 1, q: "q" },
        };
        server
            .mockEndpoint()
            .get("/feature-users/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.countFeatureUsers({
            featureId: "feature_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                featureId: "feature_id",
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("countFeatureUsers (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-users/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countFeatureUsers (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-users/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countFeatureUsers (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-users/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countFeatureUsers (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-users/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countFeatureUsers (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/feature-users/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countFeatureUsers({
                featureId: "feature_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listPlanEntitlements (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    billing_threshold: 1,
                    consumption_rate: 1.1,
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    feature: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        feature_type: "boolean",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    feature_id: "feature_id",
                    id: "id",
                    metered_monthly_price: {
                        billing_scheme: "per_unit",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        is_active: true,
                        package_size: 1,
                        price: 1,
                        price_external_id: "price_external_id",
                        price_id: "price_id",
                        price_tier: [{}],
                        product_external_id: "product_external_id",
                        product_id: "product_id",
                        product_name: "product_name",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                        usage_type: "licensed",
                    },
                    metered_yearly_price: {
                        billing_scheme: "per_unit",
                        created_at: "2024-01-15T09:30:00Z",
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        is_active: true,
                        package_size: 1,
                        price: 1,
                        price_external_id: "price_external_id",
                        price_id: "price_id",
                        price_tier: [{}],
                        product_external_id: "product_external_id",
                        product_id: "product_id",
                        product_name: "product_name",
                        provider_type: "schematic",
                        updated_at: "2024-01-15T09:30:00Z",
                        usage_type: "licensed",
                    },
                    metric_period: "metric_period",
                    metric_period_month_reset: "metric_period_month_reset",
                    plan: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        plan_type: "plan",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    plan_id: "plan_id",
                    price_behavior: "credit_burndown",
                    rule_id: "rule_id",
                    rule_id_usage_exceeded: "rule_id_usage_exceeded",
                    soft_limit: 1,
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_based_product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        product_id: "product_id",
                        provider_type: "schematic",
                        quantity: 1.1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    value_bool: true,
                    value_credit: {
                        burn_strategy: "expiration_priority",
                        created_at: "2024-01-15T09:30:00Z",
                        default_expiry_unit: "billing_periods",
                        default_rollover_policy: "expire",
                        description: "description",
                        id: "id",
                        name: "name",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    value_numeric: 1,
                    value_trait: {
                        created_at: "2024-01-15T09:30:00Z",
                        display_name: "display_name",
                        entity_type: "company",
                        hierarchy: ["hierarchy"],
                        id: "id",
                        trait_type: "boolean",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    value_trait_id: "value_trait_id",
                    value_type: "boolean",
                },
            ],
            params: {
                feature_id: "feature_id",
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                plan_ids: ["plan_ids"],
                q: "q",
                with_metered_products: true,
            },
        };
        server.mockEndpoint().get("/plan-entitlements").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.entitlements.listPlanEntitlements({
            featureId: "feature_id",
            planId: "plan_id",
            q: "q",
            withMeteredProducts: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    billingThreshold: 1,
                    consumptionRate: 1.1,
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    environmentId: "environment_id",
                    feature: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        featureType: "boolean",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    featureId: "feature_id",
                    id: "id",
                    meteredMonthlyPrice: {
                        billingScheme: "per_unit",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        isActive: true,
                        packageSize: 1,
                        price: 1,
                        priceExternalId: "price_external_id",
                        priceId: "price_id",
                        priceTier: [{}],
                        productExternalId: "product_external_id",
                        productId: "product_id",
                        productName: "product_name",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        usageType: "licensed",
                    },
                    meteredYearlyPrice: {
                        billingScheme: "per_unit",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        currency: "currency",
                        id: "id",
                        interval: "day",
                        isActive: true,
                        packageSize: 1,
                        price: 1,
                        priceExternalId: "price_external_id",
                        priceId: "price_id",
                        priceTier: [{}],
                        productExternalId: "product_external_id",
                        productId: "product_id",
                        productName: "product_name",
                        providerType: "schematic",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        usageType: "licensed",
                    },
                    metricPeriod: "metric_period",
                    metricPeriodMonthReset: "metric_period_month_reset",
                    plan: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        planType: "plan",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    planId: "plan_id",
                    priceBehavior: "credit_burndown",
                    ruleId: "rule_id",
                    ruleIdUsageExceeded: "rule_id_usage_exceeded",
                    softLimit: 1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageBasedProduct: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        productId: "product_id",
                        providerType: "schematic",
                        quantity: 1.1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    valueBool: true,
                    valueCredit: {
                        burnStrategy: "expiration_priority",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        defaultExpiryUnit: "billing_periods",
                        defaultRolloverPolicy: "expire",
                        description: "description",
                        id: "id",
                        name: "name",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    valueNumeric: 1,
                    valueTrait: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        displayName: "display_name",
                        entityType: "company",
                        hierarchy: ["hierarchy"],
                        id: "id",
                        traitType: "boolean",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    valueTraitId: "value_trait_id",
                    valueType: "boolean",
                },
            ],
            params: {
                featureId: "feature_id",
                featureIds: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                planId: "plan_id",
                planIds: ["plan_ids"],
                q: "q",
                withMeteredProducts: true,
            },
        });
    });

    test("listPlanEntitlements (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-entitlements").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listPlanEntitlements();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listPlanEntitlements (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-entitlements").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listPlanEntitlements();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listPlanEntitlements (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-entitlements").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listPlanEntitlements();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listPlanEntitlements (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-entitlements").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listPlanEntitlements();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listPlanEntitlements (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-entitlements").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.listPlanEntitlements();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createPlanEntitlement (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { feature_id: "feature_id", plan_id: "plan_id", value_type: "boolean" };
        const rawResponseBody = {
            data: {
                billing_threshold: 1,
                consumption_rate: 1.1,
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                id: "id",
                metered_monthly_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    provider_type: "schematic",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                metered_yearly_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    provider_type: "schematic",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                metric_period: "metric_period",
                metric_period_month_reset: "metric_period_month_reset",
                plan: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    plan_type: "plan",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                plan_id: "plan_id",
                price_behavior: "credit_burndown",
                rule_id: "rule_id",
                rule_id_usage_exceeded: "rule_id_usage_exceeded",
                soft_limit: 1,
                updated_at: "2024-01-15T09:30:00Z",
                usage_based_product: {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    is_active: true,
                    name: "name",
                    price: 1.1,
                    price_decimal: "price_decimal",
                    product_id: "product_id",
                    provider_type: "schematic",
                    quantity: 1.1,
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_bool: true,
                value_credit: {
                    burn_strategy: "expiration_priority",
                    created_at: "2024-01-15T09:30:00Z",
                    default_expiry_unit: "billing_periods",
                    default_expiry_unit_count: 1,
                    default_rollover_policy: "expire",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    plural_name: "plural_name",
                    price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        provider_type: "schematic",
                        scheme: "per_unit",
                    },
                    product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        product_id: "product_id",
                        provider_type: "schematic",
                        quantity: 1.1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    singular_name: "singular_name",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_numeric: 1,
                value_trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_trait_id: "value_trait_id",
                value_type: "boolean",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/plan-entitlements")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.createPlanEntitlement({
            featureId: "feature_id",
            planId: "plan_id",
            valueType: "boolean",
        });
        expect(response).toEqual({
            data: {
                billingThreshold: 1,
                consumptionRate: 1.1,
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                environmentId: "environment_id",
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                id: "id",
                meteredMonthlyPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    providerType: "schematic",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                meteredYearlyPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    providerType: "schematic",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                metricPeriod: "metric_period",
                metricPeriodMonthReset: "metric_period_month_reset",
                plan: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    planType: "plan",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                planId: "plan_id",
                priceBehavior: "credit_burndown",
                ruleId: "rule_id",
                ruleIdUsageExceeded: "rule_id_usage_exceeded",
                softLimit: 1,
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                usageBasedProduct: {
                    accountId: "account_id",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    environmentId: "environment_id",
                    externalId: "external_id",
                    isActive: true,
                    name: "name",
                    price: 1.1,
                    priceDecimal: "price_decimal",
                    productId: "product_id",
                    providerType: "schematic",
                    quantity: 1.1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueBool: true,
                valueCredit: {
                    burnStrategy: "expiration_priority",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultExpiryUnit: "billing_periods",
                    defaultExpiryUnitCount: 1,
                    defaultRolloverPolicy: "expire",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    pluralName: "plural_name",
                    price: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        providerType: "schematic",
                        scheme: "per_unit",
                    },
                    product: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        productId: "product_id",
                        providerType: "schematic",
                        quantity: 1.1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    singularName: "singular_name",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueNumeric: 1,
                valueTrait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueTraitId: "value_trait_id",
                valueType: "boolean",
            },
            params: {
                key: "value",
            },
        });
    });

    test("createPlanEntitlement (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { feature_id: "feature_id", plan_id: "plan_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createPlanEntitlement({
                featureId: "feature_id",
                planId: "plan_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createPlanEntitlement (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { feature_id: "feature_id", plan_id: "plan_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createPlanEntitlement({
                featureId: "feature_id",
                planId: "plan_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createPlanEntitlement (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { feature_id: "feature_id", plan_id: "plan_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createPlanEntitlement({
                featureId: "feature_id",
                planId: "plan_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createPlanEntitlement (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { feature_id: "feature_id", plan_id: "plan_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createPlanEntitlement({
                featureId: "feature_id",
                planId: "plan_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createPlanEntitlement (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { feature_id: "feature_id", plan_id: "plan_id", value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.createPlanEntitlement({
                featureId: "feature_id",
                planId: "plan_id",
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getPlanEntitlement (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                billing_threshold: 1,
                consumption_rate: 1.1,
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                id: "id",
                metered_monthly_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    provider_type: "schematic",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                metered_yearly_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    provider_type: "schematic",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                metric_period: "metric_period",
                metric_period_month_reset: "metric_period_month_reset",
                plan: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    plan_type: "plan",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                plan_id: "plan_id",
                price_behavior: "credit_burndown",
                rule_id: "rule_id",
                rule_id_usage_exceeded: "rule_id_usage_exceeded",
                soft_limit: 1,
                updated_at: "2024-01-15T09:30:00Z",
                usage_based_product: {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    is_active: true,
                    name: "name",
                    price: 1.1,
                    price_decimal: "price_decimal",
                    product_id: "product_id",
                    provider_type: "schematic",
                    quantity: 1.1,
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_bool: true,
                value_credit: {
                    burn_strategy: "expiration_priority",
                    created_at: "2024-01-15T09:30:00Z",
                    default_expiry_unit: "billing_periods",
                    default_expiry_unit_count: 1,
                    default_rollover_policy: "expire",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    plural_name: "plural_name",
                    price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        provider_type: "schematic",
                        scheme: "per_unit",
                    },
                    product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        product_id: "product_id",
                        provider_type: "schematic",
                        quantity: 1.1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    singular_name: "singular_name",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_numeric: 1,
                value_trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_trait_id: "value_trait_id",
                value_type: "boolean",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.getPlanEntitlement("plan_entitlement_id");
        expect(response).toEqual({
            data: {
                billingThreshold: 1,
                consumptionRate: 1.1,
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                environmentId: "environment_id",
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                id: "id",
                meteredMonthlyPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    providerType: "schematic",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                meteredYearlyPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    providerType: "schematic",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                metricPeriod: "metric_period",
                metricPeriodMonthReset: "metric_period_month_reset",
                plan: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    planType: "plan",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                planId: "plan_id",
                priceBehavior: "credit_burndown",
                ruleId: "rule_id",
                ruleIdUsageExceeded: "rule_id_usage_exceeded",
                softLimit: 1,
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                usageBasedProduct: {
                    accountId: "account_id",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    environmentId: "environment_id",
                    externalId: "external_id",
                    isActive: true,
                    name: "name",
                    price: 1.1,
                    priceDecimal: "price_decimal",
                    productId: "product_id",
                    providerType: "schematic",
                    quantity: 1.1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueBool: true,
                valueCredit: {
                    burnStrategy: "expiration_priority",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultExpiryUnit: "billing_periods",
                    defaultExpiryUnitCount: 1,
                    defaultRolloverPolicy: "expire",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    pluralName: "plural_name",
                    price: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        providerType: "schematic",
                        scheme: "per_unit",
                    },
                    product: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        productId: "product_id",
                        providerType: "schematic",
                        quantity: 1.1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    singularName: "singular_name",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueNumeric: 1,
                valueTrait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueTraitId: "value_trait_id",
                valueType: "boolean",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getPlanEntitlement (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getPlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getPlanEntitlement (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getPlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getPlanEntitlement (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getPlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getPlanEntitlement (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.getPlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updatePlanEntitlement (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = {
            data: {
                billing_threshold: 1,
                consumption_rate: 1.1,
                created_at: "2024-01-15T09:30:00Z",
                environment_id: "environment_id",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                id: "id",
                metered_monthly_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    provider_type: "schematic",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                metered_yearly_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    provider_type: "schematic",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                metric_period: "metric_period",
                metric_period_month_reset: "metric_period_month_reset",
                plan: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    plan_type: "plan",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                plan_id: "plan_id",
                price_behavior: "credit_burndown",
                rule_id: "rule_id",
                rule_id_usage_exceeded: "rule_id_usage_exceeded",
                soft_limit: 1,
                updated_at: "2024-01-15T09:30:00Z",
                usage_based_product: {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    is_active: true,
                    name: "name",
                    price: 1.1,
                    price_decimal: "price_decimal",
                    product_id: "product_id",
                    provider_type: "schematic",
                    quantity: 1.1,
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_bool: true,
                value_credit: {
                    burn_strategy: "expiration_priority",
                    created_at: "2024-01-15T09:30:00Z",
                    default_expiry_unit: "billing_periods",
                    default_expiry_unit_count: 1,
                    default_rollover_policy: "expire",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    plural_name: "plural_name",
                    price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        provider_type: "schematic",
                        scheme: "per_unit",
                    },
                    product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        product_id: "product_id",
                        provider_type: "schematic",
                        quantity: 1.1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    singular_name: "singular_name",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_numeric: 1,
                value_trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                value_trait_id: "value_trait_id",
                value_type: "boolean",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/plan-entitlements/plan_entitlement_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.updatePlanEntitlement("plan_entitlement_id", {
            valueType: "boolean",
        });
        expect(response).toEqual({
            data: {
                billingThreshold: 1,
                consumptionRate: 1.1,
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                environmentId: "environment_id",
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                id: "id",
                meteredMonthlyPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    providerType: "schematic",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                meteredYearlyPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    providerType: "schematic",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                metricPeriod: "metric_period",
                metricPeriodMonthReset: "metric_period_month_reset",
                plan: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    planType: "plan",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                planId: "plan_id",
                priceBehavior: "credit_burndown",
                ruleId: "rule_id",
                ruleIdUsageExceeded: "rule_id_usage_exceeded",
                softLimit: 1,
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                usageBasedProduct: {
                    accountId: "account_id",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    environmentId: "environment_id",
                    externalId: "external_id",
                    isActive: true,
                    name: "name",
                    price: 1.1,
                    priceDecimal: "price_decimal",
                    productId: "product_id",
                    providerType: "schematic",
                    quantity: 1.1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueBool: true,
                valueCredit: {
                    burnStrategy: "expiration_priority",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultExpiryUnit: "billing_periods",
                    defaultExpiryUnitCount: 1,
                    defaultRolloverPolicy: "expire",
                    description: "description",
                    icon: "icon",
                    id: "id",
                    name: "name",
                    pluralName: "plural_name",
                    price: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        providerType: "schematic",
                        scheme: "per_unit",
                    },
                    product: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        productId: "product_id",
                        providerType: "schematic",
                        quantity: 1.1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    singularName: "singular_name",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueNumeric: 1,
                valueTrait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                valueTraitId: "value_trait_id",
                valueType: "boolean",
            },
            params: {
                key: "value",
            },
        });
    });

    test("updatePlanEntitlement (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-entitlements/plan_entitlement_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updatePlanEntitlement("plan_entitlement_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updatePlanEntitlement (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-entitlements/plan_entitlement_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updatePlanEntitlement("plan_entitlement_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updatePlanEntitlement (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-entitlements/plan_entitlement_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updatePlanEntitlement("plan_entitlement_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updatePlanEntitlement (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-entitlements/plan_entitlement_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updatePlanEntitlement("plan_entitlement_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updatePlanEntitlement (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { value_type: "boolean" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-entitlements/plan_entitlement_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.updatePlanEntitlement("plan_entitlement_id", {
                valueType: "boolean",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deletePlanEntitlement (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server
            .mockEndpoint()
            .delete("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.deletePlanEntitlement("plan_entitlement_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deletePlanEntitlement (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deletePlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deletePlanEntitlement (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deletePlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deletePlanEntitlement (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deletePlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deletePlanEntitlement (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deletePlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deletePlanEntitlement (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/plan-entitlements/plan_entitlement_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.deletePlanEntitlement("plan_entitlement_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countPlanEntitlements (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: {
                feature_id: "feature_id",
                feature_ids: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                plan_id: "plan_id",
                plan_ids: ["plan_ids"],
                q: "q",
                with_metered_products: true,
            },
        };
        server
            .mockEndpoint()
            .get("/plan-entitlements/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.countPlanEntitlements({
            featureId: "feature_id",
            planId: "plan_id",
            q: "q",
            withMeteredProducts: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                featureId: "feature_id",
                featureIds: ["feature_ids"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                planId: "plan_id",
                planIds: ["plan_ids"],
                q: "q",
                withMeteredProducts: true,
            },
        });
    });

    test("countPlanEntitlements (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countPlanEntitlements();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countPlanEntitlements (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countPlanEntitlements();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countPlanEntitlements (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countPlanEntitlements();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countPlanEntitlements (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countPlanEntitlements();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countPlanEntitlements (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/plan-entitlements/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.countPlanEntitlements();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("duplicatePlanEntitlements (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { source_plan_id: "source_plan_id", target_plan_id: "target_plan_id" };
        const rawResponseBody = {
            data: {
                data: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        feature_id: "feature_id",
                        id: "id",
                        plan_id: "plan_id",
                        rule_id: "rule_id",
                        updated_at: "2024-01-15T09:30:00Z",
                        value_type: "boolean",
                    },
                ],
                skipped: [
                    {
                        entitlement_id: "entitlement_id",
                        errors: [{ message: "message" }],
                        feature_id: "feature_id",
                        feature_name: "feature_name",
                    },
                ],
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/plan-entitlements/duplicate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entitlements.duplicatePlanEntitlements({
            sourcePlanId: "source_plan_id",
            targetPlanId: "target_plan_id",
        });
        expect(response).toEqual({
            data: {
                data: [
                    {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        featureId: "feature_id",
                        id: "id",
                        planId: "plan_id",
                        ruleId: "rule_id",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        valueType: "boolean",
                    },
                ],
                skipped: [
                    {
                        entitlementId: "entitlement_id",
                        errors: [
                            {
                                message: "message",
                            },
                        ],
                        featureId: "feature_id",
                        featureName: "feature_name",
                    },
                ],
            },
            params: {
                key: "value",
            },
        });
    });

    test("duplicatePlanEntitlements (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { source_plan_id: "source_plan_id", target_plan_id: "target_plan_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements/duplicate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.duplicatePlanEntitlements({
                sourcePlanId: "source_plan_id",
                targetPlanId: "target_plan_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("duplicatePlanEntitlements (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { source_plan_id: "source_plan_id", target_plan_id: "target_plan_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements/duplicate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.duplicatePlanEntitlements({
                sourcePlanId: "source_plan_id",
                targetPlanId: "target_plan_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("duplicatePlanEntitlements (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { source_plan_id: "source_plan_id", target_plan_id: "target_plan_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements/duplicate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.duplicatePlanEntitlements({
                sourcePlanId: "source_plan_id",
                targetPlanId: "target_plan_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("duplicatePlanEntitlements (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { source_plan_id: "source_plan_id", target_plan_id: "target_plan_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements/duplicate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.duplicatePlanEntitlements({
                sourcePlanId: "source_plan_id",
                targetPlanId: "target_plan_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("duplicatePlanEntitlements (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { source_plan_id: "source_plan_id", target_plan_id: "target_plan_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-entitlements/duplicate")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.entitlements.duplicatePlanEntitlements({
                sourcePlanId: "source_plan_id",
                targetPlanId: "target_plan_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getFeatureUsageByCompany (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                features: [
                    {
                        access: true,
                        allocation: 1,
                        allocation_type: "boolean",
                        company_override: {
                            company: {
                                add_ons: [
                                    { id: "id", included_credit_grants: [], name: "name" },
                                    { id: "id", included_credit_grants: [], name: "name" },
                                ],
                                billing_credit_balances: { billing_credit_balances: 1.1 },
                                billing_subscription: {
                                    cancel_at_period_end: true,
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    customer_external_id: "customer_external_id",
                                    discounts: [],
                                    id: "id",
                                    interval: "interval",
                                    period_end: 1,
                                    period_start: 1,
                                    products: [],
                                    provider_type: "schematic",
                                    status: "status",
                                    subscription_external_id: "subscription_external_id",
                                    total_price: 1,
                                },
                                billing_subscriptions: [
                                    {
                                        cancel_at_period_end: true,
                                        created_at: "2024-01-15T09:30:00Z",
                                        currency: "currency",
                                        customer_external_id: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        period_end: 1,
                                        period_start: 1,
                                        products: [],
                                        provider_type: "schematic",
                                        status: "status",
                                        subscription_external_id: "subscription_external_id",
                                        total_price: 1,
                                    },
                                    {
                                        cancel_at_period_end: true,
                                        created_at: "2024-01-15T09:30:00Z",
                                        currency: "currency",
                                        customer_external_id: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        period_end: 1,
                                        period_start: 1,
                                        products: [],
                                        provider_type: "schematic",
                                        status: "status",
                                        subscription_external_id: "subscription_external_id",
                                        total_price: 1,
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                default_payment_method: {
                                    created_at: "2024-01-15T09:30:00Z",
                                    customer_external_id: "customer_external_id",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    payment_method_type: "payment_method_type",
                                    provider_type: "schematic",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                entity_traits: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        environment_id: "environment_id",
                                        id: "id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        environment_id: "environment_id",
                                        id: "id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                ],
                                environment_id: "environment_id",
                                id: "id",
                                keys: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        entity_id: "entity_id",
                                        entity_type: "company",
                                        environment_id: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        entity_id: "entity_id",
                                        entity_type: "company",
                                        environment_id: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                ],
                                last_seen_at: "2024-01-15T09:30:00Z",
                                logo_url: "logo_url",
                                metrics: [
                                    {
                                        account_id: "account_id",
                                        captured_at_max: "2024-01-15T09:30:00Z",
                                        captured_at_min: "2024-01-15T09:30:00Z",
                                        company_id: "company_id",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        month_reset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                    {
                                        account_id: "account_id",
                                        captured_at_max: "2024-01-15T09:30:00Z",
                                        captured_at_min: "2024-01-15T09:30:00Z",
                                        company_id: "company_id",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        month_reset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                ],
                                name: "name",
                                payment_methods: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        customer_external_id: "customer_external_id",
                                        environment_id: "environment_id",
                                        external_id: "external_id",
                                        id: "id",
                                        payment_method_type: "payment_method_type",
                                        provider_type: "schematic",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        customer_external_id: "customer_external_id",
                                        environment_id: "environment_id",
                                        external_id: "external_id",
                                        id: "id",
                                        payment_method_type: "payment_method_type",
                                        provider_type: "schematic",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                plan: { id: "id", included_credit_grants: [], name: "name" },
                                plans: [
                                    { id: "id", name: "name" },
                                    { id: "id", name: "name" },
                                ],
                                rules: [
                                    {
                                        account_id: "account_id",
                                        condition_groups: [],
                                        conditions: [],
                                        environment_id: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        rule_type: "default",
                                        value: true,
                                    },
                                    {
                                        account_id: "account_id",
                                        condition_groups: [],
                                        conditions: [],
                                        environment_id: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        rule_type: "default",
                                        value: true,
                                    },
                                ],
                                traits: { traits: { key: "value" } },
                                updated_at: "2024-01-15T09:30:00Z",
                                user_count: 1,
                            },
                            company_id: "company_id",
                            consumption_rate: 1.1,
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            expiration_date: "2024-01-15T09:30:00Z",
                            feature: {
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                event_subtype: "event_subtype",
                                feature_type: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecycle_phase: "add_on",
                                maintainer_id: "maintainer_id",
                                name: "name",
                                plural_name: "plural_name",
                                singular_name: "singular_name",
                                trait_id: "trait_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            feature_id: "feature_id",
                            id: "id",
                            metric_period: "metric_period",
                            metric_period_month_reset: "metric_period_month_reset",
                            notes: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    external_user_id: "external_user_id",
                                    external_user_name: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    external_user_id: "external_user_id",
                                    external_user_name: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            rule_id: "rule_id",
                            rule_id_usage_exceeded: "rule_id_usage_exceeded",
                            updated_at: "2024-01-15T09:30:00Z",
                            value_bool: true,
                            value_numeric: 1,
                            value_trait: {
                                created_at: "2024-01-15T09:30:00Z",
                                display_name: "display_name",
                                entity_type: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                trait_type: "boolean",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_trait_id: "value_trait_id",
                            value_type: "boolean",
                        },
                        credit_consumption_rate: 1.1,
                        credit_grant_counts: { credit_grant_counts: 1.1 },
                        credit_grant_details: [
                            {
                                credit_type_icon: "credit_type_icon",
                                expires_at: "2024-01-15T09:30:00Z",
                                grant_reason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                            {
                                credit_type_icon: "credit_type_icon",
                                expires_at: "2024-01-15T09:30:00Z",
                                grant_reason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                        ],
                        credit_grant_reason: "billing_credit_auto_topup",
                        credit_remaining: 1.1,
                        credit_total: 1.1,
                        credit_type_icon: "credit_type_icon",
                        credit_usage_aggregation: {
                            usage_this_billing_period: 1.1,
                            usage_this_calendar_month: 1.1,
                            usage_this_week: 1.1,
                            usage_today: 1.1,
                        },
                        credit_used: 1.1,
                        effective_limit: 1,
                        effective_price: 1.1,
                        entitlement_expiration_date: "2024-01-15T09:30:00Z",
                        entitlement_id: "entitlement_id",
                        entitlement_source: "entitlement_source",
                        entitlement_type: "company_override",
                        feature: {
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            event_subtype: "event_subtype",
                            event_summary: {
                                company_count: 1,
                                environment_id: "environment_id",
                                event_count: 1,
                                event_subtype: "event_subtype",
                                last_seen_at: "2024-01-15T09:30:00Z",
                                user_count: 1,
                            },
                            feature_type: "boolean",
                            flags: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    feature: {
                                        created_at: "2024-01-15T09:30:00Z",
                                        description: "description",
                                        feature_type: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                    feature_id: "feature_id",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    last_checked_at: "2024-01-15T09:30:00Z",
                                    maintainer_id: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    feature: {
                                        created_at: "2024-01-15T09:30:00Z",
                                        description: "description",
                                        feature_type: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                    feature_id: "feature_id",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    last_checked_at: "2024-01-15T09:30:00Z",
                                    maintainer_id: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            lifecycle_phase: "add_on",
                            maintainer_id: "maintainer_id",
                            name: "name",
                            plans: [
                                { description: "description", id: "id", image_url: "image_url", name: "name" },
                                { description: "description", id: "id", image_url: "image_url", name: "name" },
                            ],
                            plural_name: "plural_name",
                            singular_name: "singular_name",
                            trait: {
                                created_at: "2024-01-15T09:30:00Z",
                                display_name: "display_name",
                                entity_type: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                trait_type: "boolean",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            trait_id: "trait_id",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        has_valid_allocation: true,
                        is_unlimited: true,
                        metric_reset_at: "2024-01-15T09:30:00Z",
                        month_reset: "month_reset",
                        monthly_usage_based_price: {
                            billing_scheme: "per_unit",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            is_active: true,
                            meter_event_name: "meter_event_name",
                            meter_event_payload_key: "meter_event_payload_key",
                            meter_id: "meter_id",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            product_external_id: "product_external_id",
                            product_id: "product_id",
                            product_name: "product_name",
                            provider_type: "schematic",
                            tiers_mode: "graduated",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "licensed",
                        },
                        overuse: 1,
                        percent_used: 1.1,
                        period: "period",
                        plan: {
                            audience_type: "audience_type",
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plan_type: "plan",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        plan_entitlement: {
                            billing_threshold: 1,
                            consumption_rate: 1.1,
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            feature: {
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                event_subtype: "event_subtype",
                                feature_type: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecycle_phase: "add_on",
                                maintainer_id: "maintainer_id",
                                name: "name",
                                plural_name: "plural_name",
                                singular_name: "singular_name",
                                trait_id: "trait_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            feature_id: "feature_id",
                            id: "id",
                            metered_monthly_price: {
                                billing_scheme: "per_unit",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                is_active: true,
                                meter_event_name: "meter_event_name",
                                meter_event_payload_key: "meter_event_payload_key",
                                meter_id: "meter_id",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}, {}],
                                product_external_id: "product_external_id",
                                product_id: "product_id",
                                product_name: "product_name",
                                provider_type: "schematic",
                                tiers_mode: "graduated",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "licensed",
                            },
                            metered_yearly_price: {
                                billing_scheme: "per_unit",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                is_active: true,
                                meter_event_name: "meter_event_name",
                                meter_event_payload_key: "meter_event_payload_key",
                                meter_id: "meter_id",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}, {}],
                                product_external_id: "product_external_id",
                                product_id: "product_id",
                                product_name: "product_name",
                                provider_type: "schematic",
                                tiers_mode: "graduated",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "licensed",
                            },
                            metric_period: "metric_period",
                            metric_period_month_reset: "metric_period_month_reset",
                            plan: {
                                audience_type: "audience_type",
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plan_type: "plan",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            plan_id: "plan_id",
                            price_behavior: "credit_burndown",
                            rule_id: "rule_id",
                            rule_id_usage_exceeded: "rule_id_usage_exceeded",
                            soft_limit: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_based_product: {
                                account_id: "account_id",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                is_active: true,
                                name: "name",
                                price: 1.1,
                                price_decimal: "price_decimal",
                                product_id: "product_id",
                                provider_type: "schematic",
                                quantity: 1.1,
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_bool: true,
                            value_credit: {
                                burn_strategy: "expiration_priority",
                                created_at: "2024-01-15T09:30:00Z",
                                default_expiry_unit: "billing_periods",
                                default_expiry_unit_count: 1,
                                default_rollover_policy: "expire",
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plural_name: "plural_name",
                                price: {
                                    currency: "currency",
                                    external_price_id: "external_price_id",
                                    id: "id",
                                    interval: "day",
                                    price: 1,
                                    provider_type: "schematic",
                                    scheme: "per_unit",
                                },
                                product: {
                                    account_id: "account_id",
                                    created_at: "2024-01-15T09:30:00Z",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    is_active: true,
                                    name: "name",
                                    price: 1.1,
                                    product_id: "product_id",
                                    provider_type: "schematic",
                                    quantity: 1.1,
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                singular_name: "singular_name",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_numeric: 1,
                            value_trait: {
                                created_at: "2024-01-15T09:30:00Z",
                                display_name: "display_name",
                                entity_type: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                trait_type: "boolean",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_trait_id: "value_trait_id",
                            value_type: "boolean",
                        },
                        price_behavior: "credit_burndown",
                        soft_limit: 1,
                        usage: 1,
                        yearly_usage_based_price: {
                            billing_scheme: "per_unit",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            is_active: true,
                            meter_event_name: "meter_event_name",
                            meter_event_payload_key: "meter_event_payload_key",
                            meter_id: "meter_id",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            product_external_id: "product_external_id",
                            product_id: "product_id",
                            product_name: "product_name",
                            provider_type: "schematic",
                            tiers_mode: "graduated",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "licensed",
                        },
                    },
                    {
                        access: true,
                        allocation: 1,
                        allocation_type: "boolean",
                        company_override: {
                            company: {
                                add_ons: [
                                    { id: "id", included_credit_grants: [], name: "name" },
                                    { id: "id", included_credit_grants: [], name: "name" },
                                ],
                                billing_credit_balances: { billing_credit_balances: 1.1 },
                                billing_subscription: {
                                    cancel_at_period_end: true,
                                    created_at: "2024-01-15T09:30:00Z",
                                    currency: "currency",
                                    customer_external_id: "customer_external_id",
                                    discounts: [],
                                    id: "id",
                                    interval: "interval",
                                    period_end: 1,
                                    period_start: 1,
                                    products: [],
                                    provider_type: "schematic",
                                    status: "status",
                                    subscription_external_id: "subscription_external_id",
                                    total_price: 1,
                                },
                                billing_subscriptions: [
                                    {
                                        cancel_at_period_end: true,
                                        created_at: "2024-01-15T09:30:00Z",
                                        currency: "currency",
                                        customer_external_id: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        period_end: 1,
                                        period_start: 1,
                                        products: [],
                                        provider_type: "schematic",
                                        status: "status",
                                        subscription_external_id: "subscription_external_id",
                                        total_price: 1,
                                    },
                                    {
                                        cancel_at_period_end: true,
                                        created_at: "2024-01-15T09:30:00Z",
                                        currency: "currency",
                                        customer_external_id: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        period_end: 1,
                                        period_start: 1,
                                        products: [],
                                        provider_type: "schematic",
                                        status: "status",
                                        subscription_external_id: "subscription_external_id",
                                        total_price: 1,
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                default_payment_method: {
                                    created_at: "2024-01-15T09:30:00Z",
                                    customer_external_id: "customer_external_id",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    id: "id",
                                    payment_method_type: "payment_method_type",
                                    provider_type: "schematic",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                entity_traits: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        environment_id: "environment_id",
                                        id: "id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        environment_id: "environment_id",
                                        id: "id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                ],
                                environment_id: "environment_id",
                                id: "id",
                                keys: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        entity_id: "entity_id",
                                        entity_type: "company",
                                        environment_id: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        definition_id: "definition_id",
                                        entity_id: "entity_id",
                                        entity_type: "company",
                                        environment_id: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updated_at: "2024-01-15T09:30:00Z",
                                        value: "value",
                                    },
                                ],
                                last_seen_at: "2024-01-15T09:30:00Z",
                                logo_url: "logo_url",
                                metrics: [
                                    {
                                        account_id: "account_id",
                                        captured_at_max: "2024-01-15T09:30:00Z",
                                        captured_at_min: "2024-01-15T09:30:00Z",
                                        company_id: "company_id",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        month_reset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                    {
                                        account_id: "account_id",
                                        captured_at_max: "2024-01-15T09:30:00Z",
                                        captured_at_min: "2024-01-15T09:30:00Z",
                                        company_id: "company_id",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        event_subtype: "event_subtype",
                                        month_reset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                ],
                                name: "name",
                                payment_methods: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        customer_external_id: "customer_external_id",
                                        environment_id: "environment_id",
                                        external_id: "external_id",
                                        id: "id",
                                        payment_method_type: "payment_method_type",
                                        provider_type: "schematic",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        customer_external_id: "customer_external_id",
                                        environment_id: "environment_id",
                                        external_id: "external_id",
                                        id: "id",
                                        payment_method_type: "payment_method_type",
                                        provider_type: "schematic",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                plan: { id: "id", included_credit_grants: [], name: "name" },
                                plans: [
                                    { id: "id", name: "name" },
                                    { id: "id", name: "name" },
                                ],
                                rules: [
                                    {
                                        account_id: "account_id",
                                        condition_groups: [],
                                        conditions: [],
                                        environment_id: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        rule_type: "default",
                                        value: true,
                                    },
                                    {
                                        account_id: "account_id",
                                        condition_groups: [],
                                        conditions: [],
                                        environment_id: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        rule_type: "default",
                                        value: true,
                                    },
                                ],
                                traits: { traits: { key: "value" } },
                                updated_at: "2024-01-15T09:30:00Z",
                                user_count: 1,
                            },
                            company_id: "company_id",
                            consumption_rate: 1.1,
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            expiration_date: "2024-01-15T09:30:00Z",
                            feature: {
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                event_subtype: "event_subtype",
                                feature_type: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecycle_phase: "add_on",
                                maintainer_id: "maintainer_id",
                                name: "name",
                                plural_name: "plural_name",
                                singular_name: "singular_name",
                                trait_id: "trait_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            feature_id: "feature_id",
                            id: "id",
                            metric_period: "metric_period",
                            metric_period_month_reset: "metric_period_month_reset",
                            notes: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    external_user_id: "external_user_id",
                                    external_user_name: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    external_user_id: "external_user_id",
                                    external_user_name: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            rule_id: "rule_id",
                            rule_id_usage_exceeded: "rule_id_usage_exceeded",
                            updated_at: "2024-01-15T09:30:00Z",
                            value_bool: true,
                            value_numeric: 1,
                            value_trait: {
                                created_at: "2024-01-15T09:30:00Z",
                                display_name: "display_name",
                                entity_type: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                trait_type: "boolean",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_trait_id: "value_trait_id",
                            value_type: "boolean",
                        },
                        credit_consumption_rate: 1.1,
                        credit_grant_counts: { credit_grant_counts: 1.1 },
                        credit_grant_details: [
                            {
                                credit_type_icon: "credit_type_icon",
                                expires_at: "2024-01-15T09:30:00Z",
                                grant_reason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                            {
                                credit_type_icon: "credit_type_icon",
                                expires_at: "2024-01-15T09:30:00Z",
                                grant_reason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                        ],
                        credit_grant_reason: "billing_credit_auto_topup",
                        credit_remaining: 1.1,
                        credit_total: 1.1,
                        credit_type_icon: "credit_type_icon",
                        credit_usage_aggregation: {
                            usage_this_billing_period: 1.1,
                            usage_this_calendar_month: 1.1,
                            usage_this_week: 1.1,
                            usage_today: 1.1,
                        },
                        credit_used: 1.1,
                        effective_limit: 1,
                        effective_price: 1.1,
                        entitlement_expiration_date: "2024-01-15T09:30:00Z",
                        entitlement_id: "entitlement_id",
                        entitlement_source: "entitlement_source",
                        entitlement_type: "company_override",
                        feature: {
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            event_subtype: "event_subtype",
                            event_summary: {
                                company_count: 1,
                                environment_id: "environment_id",
                                event_count: 1,
                                event_subtype: "event_subtype",
                                last_seen_at: "2024-01-15T09:30:00Z",
                                user_count: 1,
                            },
                            feature_type: "boolean",
                            flags: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    feature: {
                                        created_at: "2024-01-15T09:30:00Z",
                                        description: "description",
                                        feature_type: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                    feature_id: "feature_id",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    last_checked_at: "2024-01-15T09:30:00Z",
                                    maintainer_id: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    feature: {
                                        created_at: "2024-01-15T09:30:00Z",
                                        description: "description",
                                        feature_type: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                    feature_id: "feature_id",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    last_checked_at: "2024-01-15T09:30:00Z",
                                    maintainer_id: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                        {
                                            condition_groups: [],
                                            conditions: [],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            lifecycle_phase: "add_on",
                            maintainer_id: "maintainer_id",
                            name: "name",
                            plans: [
                                { description: "description", id: "id", image_url: "image_url", name: "name" },
                                { description: "description", id: "id", image_url: "image_url", name: "name" },
                            ],
                            plural_name: "plural_name",
                            singular_name: "singular_name",
                            trait: {
                                created_at: "2024-01-15T09:30:00Z",
                                display_name: "display_name",
                                entity_type: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                trait_type: "boolean",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            trait_id: "trait_id",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        has_valid_allocation: true,
                        is_unlimited: true,
                        metric_reset_at: "2024-01-15T09:30:00Z",
                        month_reset: "month_reset",
                        monthly_usage_based_price: {
                            billing_scheme: "per_unit",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            is_active: true,
                            meter_event_name: "meter_event_name",
                            meter_event_payload_key: "meter_event_payload_key",
                            meter_id: "meter_id",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            product_external_id: "product_external_id",
                            product_id: "product_id",
                            product_name: "product_name",
                            provider_type: "schematic",
                            tiers_mode: "graduated",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "licensed",
                        },
                        overuse: 1,
                        percent_used: 1.1,
                        period: "period",
                        plan: {
                            audience_type: "audience_type",
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plan_type: "plan",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                        plan_entitlement: {
                            billing_threshold: 1,
                            consumption_rate: 1.1,
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            feature: {
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                event_subtype: "event_subtype",
                                feature_type: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecycle_phase: "add_on",
                                maintainer_id: "maintainer_id",
                                name: "name",
                                plural_name: "plural_name",
                                singular_name: "singular_name",
                                trait_id: "trait_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            feature_id: "feature_id",
                            id: "id",
                            metered_monthly_price: {
                                billing_scheme: "per_unit",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                is_active: true,
                                meter_event_name: "meter_event_name",
                                meter_event_payload_key: "meter_event_payload_key",
                                meter_id: "meter_id",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}, {}],
                                product_external_id: "product_external_id",
                                product_id: "product_id",
                                product_name: "product_name",
                                provider_type: "schematic",
                                tiers_mode: "graduated",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "licensed",
                            },
                            metered_yearly_price: {
                                billing_scheme: "per_unit",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                is_active: true,
                                meter_event_name: "meter_event_name",
                                meter_event_payload_key: "meter_event_payload_key",
                                meter_id: "meter_id",
                                package_size: 1,
                                price: 1,
                                price_decimal: "price_decimal",
                                price_external_id: "price_external_id",
                                price_id: "price_id",
                                price_tier: [{}, {}],
                                product_external_id: "product_external_id",
                                product_id: "product_id",
                                product_name: "product_name",
                                provider_type: "schematic",
                                tiers_mode: "graduated",
                                updated_at: "2024-01-15T09:30:00Z",
                                usage_type: "licensed",
                            },
                            metric_period: "metric_period",
                            metric_period_month_reset: "metric_period_month_reset",
                            plan: {
                                audience_type: "audience_type",
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plan_type: "plan",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            plan_id: "plan_id",
                            price_behavior: "credit_burndown",
                            rule_id: "rule_id",
                            rule_id_usage_exceeded: "rule_id_usage_exceeded",
                            soft_limit: 1,
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_based_product: {
                                account_id: "account_id",
                                created_at: "2024-01-15T09:30:00Z",
                                currency: "currency",
                                environment_id: "environment_id",
                                external_id: "external_id",
                                is_active: true,
                                name: "name",
                                price: 1.1,
                                price_decimal: "price_decimal",
                                product_id: "product_id",
                                provider_type: "schematic",
                                quantity: 1.1,
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_bool: true,
                            value_credit: {
                                burn_strategy: "expiration_priority",
                                created_at: "2024-01-15T09:30:00Z",
                                default_expiry_unit: "billing_periods",
                                default_expiry_unit_count: 1,
                                default_rollover_policy: "expire",
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plural_name: "plural_name",
                                price: {
                                    currency: "currency",
                                    external_price_id: "external_price_id",
                                    id: "id",
                                    interval: "day",
                                    price: 1,
                                    provider_type: "schematic",
                                    scheme: "per_unit",
                                },
                                product: {
                                    account_id: "account_id",
                                    created_at: "2024-01-15T09:30:00Z",
                                    environment_id: "environment_id",
                                    external_id: "external_id",
                                    is_active: true,
                                    name: "name",
                                    price: 1.1,
                                    product_id: "product_id",
                                    provider_type: "schematic",
                                    quantity: 1.1,
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                                singular_name: "singular_name",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_numeric: 1,
                            value_trait: {
                                created_at: "2024-01-15T09:30:00Z",
                                display_name: "display_name",
                                entity_type: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                trait_type: "boolean",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                            value_trait_id: "value_trait_id",
                            value_type: "boolean",
                        },
                        price_behavior: "credit_burndown",
                        soft_limit: 1,
                        usage: 1,
                        yearly_usage_based_price: {
                            billing_scheme: "per_unit",
                            created_at: "2024-01-15T09:30:00Z",
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            is_active: true,
                            meter_event_name: "meter_event_name",
                            meter_event_payload_key: "meter_event_payload_key",
                            meter_id: "meter_id",
                            package_size: 1,
                            price: 1,
                            price_decimal: "price_decimal",
                            price_external_id: "price_external_id",
                            price_id: "price_id",
                            price_tier: [
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                                {
                                    flat_amount: 1,
                                    per_unit_price: 1,
                                    per_unit_price_decimal: "per_unit_price_decimal",
                                    up_to: 1,
                                },
                            ],
                            product_external_id: "product_external_id",
                            product_id: "product_id",
                            product_name: "product_name",
                            provider_type: "schematic",
                            tiers_mode: "graduated",
                            updated_at: "2024-01-15T09:30:00Z",
                            usage_type: "licensed",
                        },
                    },
                ],
            },
            params: { keys: { keys: "keys" } },
        };
        server.mockEndpoint().get("/usage-by-company").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.entitlements.getFeatureUsageByCompany({
            keys: {
                keys: "keys",
            },
        });
        expect(response).toEqual({
            data: {
                features: [
                    {
                        access: true,
                        allocation: 1,
                        allocationType: "boolean",
                        companyOverride: {
                            company: {
                                addOns: [
                                    {
                                        id: "id",
                                        includedCreditGrants: [],
                                        name: "name",
                                    },
                                    {
                                        id: "id",
                                        includedCreditGrants: [],
                                        name: "name",
                                    },
                                ],
                                billingCreditBalances: {
                                    billing_credit_balances: 1.1,
                                },
                                billingSubscription: {
                                    cancelAtPeriodEnd: true,
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    currency: "currency",
                                    customerExternalId: "customer_external_id",
                                    discounts: [],
                                    id: "id",
                                    interval: "interval",
                                    periodEnd: 1,
                                    periodStart: 1,
                                    products: [],
                                    providerType: "schematic",
                                    status: "status",
                                    subscriptionExternalId: "subscription_external_id",
                                    totalPrice: 1,
                                },
                                billingSubscriptions: [
                                    {
                                        cancelAtPeriodEnd: true,
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        currency: "currency",
                                        customerExternalId: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        periodEnd: 1,
                                        periodStart: 1,
                                        products: [],
                                        providerType: "schematic",
                                        status: "status",
                                        subscriptionExternalId: "subscription_external_id",
                                        totalPrice: 1,
                                    },
                                    {
                                        cancelAtPeriodEnd: true,
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        currency: "currency",
                                        customerExternalId: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        periodEnd: 1,
                                        periodStart: 1,
                                        products: [],
                                        providerType: "schematic",
                                        status: "status",
                                        subscriptionExternalId: "subscription_external_id",
                                        totalPrice: 1,
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                defaultPaymentMethod: {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    customerExternalId: "customer_external_id",
                                    environmentId: "environment_id",
                                    externalId: "external_id",
                                    id: "id",
                                    paymentMethodType: "payment_method_type",
                                    providerType: "schematic",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                entityTraits: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        environmentId: "environment_id",
                                        id: "id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        environmentId: "environment_id",
                                        id: "id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                ],
                                environmentId: "environment_id",
                                id: "id",
                                keys: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        entityId: "entity_id",
                                        entityType: "company",
                                        environmentId: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        entityId: "entity_id",
                                        entityType: "company",
                                        environmentId: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                ],
                                lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                                logoUrl: "logo_url",
                                metrics: [
                                    {
                                        accountId: "account_id",
                                        capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                                        capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                                        companyId: "company_id",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        eventSubtype: "event_subtype",
                                        monthReset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                    {
                                        accountId: "account_id",
                                        capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                                        capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                                        companyId: "company_id",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        eventSubtype: "event_subtype",
                                        monthReset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                ],
                                name: "name",
                                paymentMethods: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        customerExternalId: "customer_external_id",
                                        environmentId: "environment_id",
                                        externalId: "external_id",
                                        id: "id",
                                        paymentMethodType: "payment_method_type",
                                        providerType: "schematic",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        customerExternalId: "customer_external_id",
                                        environmentId: "environment_id",
                                        externalId: "external_id",
                                        id: "id",
                                        paymentMethodType: "payment_method_type",
                                        providerType: "schematic",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                plan: {
                                    id: "id",
                                    includedCreditGrants: [],
                                    name: "name",
                                },
                                plans: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                rules: [
                                    {
                                        accountId: "account_id",
                                        conditionGroups: [],
                                        conditions: [],
                                        environmentId: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        ruleType: "default",
                                        value: true,
                                    },
                                    {
                                        accountId: "account_id",
                                        conditionGroups: [],
                                        conditions: [],
                                        environmentId: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        ruleType: "default",
                                        value: true,
                                    },
                                ],
                                traits: {
                                    traits: {
                                        key: "value",
                                    },
                                },
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                userCount: 1,
                            },
                            companyId: "company_id",
                            consumptionRate: 1.1,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            expirationDate: new Date("2024-01-15T09:30:00.000Z"),
                            feature: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                eventSubtype: "event_subtype",
                                featureType: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecyclePhase: "add_on",
                                maintainerId: "maintainer_id",
                                name: "name",
                                pluralName: "plural_name",
                                singularName: "singular_name",
                                traitId: "trait_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            featureId: "feature_id",
                            id: "id",
                            metricPeriod: "metric_period",
                            metricPeriodMonthReset: "metric_period_month_reset",
                            notes: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    externalUserId: "external_user_id",
                                    externalUserName: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    externalUserId: "external_user_id",
                                    externalUserName: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            ruleId: "rule_id",
                            ruleIdUsageExceeded: "rule_id_usage_exceeded",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            valueBool: true,
                            valueNumeric: 1,
                            valueTrait: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                displayName: "display_name",
                                entityType: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                traitType: "boolean",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueTraitId: "value_trait_id",
                            valueType: "boolean",
                        },
                        creditConsumptionRate: 1.1,
                        creditGrantCounts: {
                            credit_grant_counts: 1.1,
                        },
                        creditGrantDetails: [
                            {
                                creditTypeIcon: "credit_type_icon",
                                expiresAt: new Date("2024-01-15T09:30:00.000Z"),
                                grantReason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                            {
                                creditTypeIcon: "credit_type_icon",
                                expiresAt: new Date("2024-01-15T09:30:00.000Z"),
                                grantReason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                        ],
                        creditGrantReason: "billing_credit_auto_topup",
                        creditRemaining: 1.1,
                        creditTotal: 1.1,
                        creditTypeIcon: "credit_type_icon",
                        creditUsageAggregation: {
                            usageThisBillingPeriod: 1.1,
                            usageThisCalendarMonth: 1.1,
                            usageThisWeek: 1.1,
                            usageToday: 1.1,
                        },
                        creditUsed: 1.1,
                        effectiveLimit: 1,
                        effectivePrice: 1.1,
                        entitlementExpirationDate: new Date("2024-01-15T09:30:00.000Z"),
                        entitlementId: "entitlement_id",
                        entitlementSource: "entitlement_source",
                        entitlementType: "company_override",
                        feature: {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            eventSubtype: "event_subtype",
                            eventSummary: {
                                companyCount: 1,
                                environmentId: "environment_id",
                                eventCount: 1,
                                eventSubtype: "event_subtype",
                                lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                                userCount: 1,
                            },
                            featureType: "boolean",
                            flags: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    feature: {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        description: "description",
                                        featureType: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                    featureId: "feature_id",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    maintainerId: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    feature: {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        description: "description",
                                        featureType: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                    featureId: "feature_id",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    maintainerId: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            lifecyclePhase: "add_on",
                            maintainerId: "maintainer_id",
                            name: "name",
                            plans: [
                                {
                                    description: "description",
                                    id: "id",
                                    imageUrl: "image_url",
                                    name: "name",
                                },
                                {
                                    description: "description",
                                    id: "id",
                                    imageUrl: "image_url",
                                    name: "name",
                                },
                            ],
                            pluralName: "plural_name",
                            singularName: "singular_name",
                            trait: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                displayName: "display_name",
                                entityType: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                traitType: "boolean",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            traitId: "trait_id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                        hasValidAllocation: true,
                        isUnlimited: true,
                        metricResetAt: new Date("2024-01-15T09:30:00.000Z"),
                        monthReset: "month_reset",
                        monthlyUsageBasedPrice: {
                            billingScheme: "per_unit",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            isActive: true,
                            meterEventName: "meter_event_name",
                            meterEventPayloadKey: "meter_event_payload_key",
                            meterId: "meter_id",
                            packageSize: 1,
                            price: 1,
                            priceDecimal: "price_decimal",
                            priceExternalId: "price_external_id",
                            priceId: "price_id",
                            priceTier: [
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                            ],
                            productExternalId: "product_external_id",
                            productId: "product_id",
                            productName: "product_name",
                            providerType: "schematic",
                            tiersMode: "graduated",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            usageType: "licensed",
                        },
                        overuse: 1,
                        percentUsed: 1.1,
                        period: "period",
                        plan: {
                            audienceType: "audience_type",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            icon: "icon",
                            id: "id",
                            name: "name",
                            planType: "plan",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                        planEntitlement: {
                            billingThreshold: 1,
                            consumptionRate: 1.1,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            feature: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                eventSubtype: "event_subtype",
                                featureType: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecyclePhase: "add_on",
                                maintainerId: "maintainer_id",
                                name: "name",
                                pluralName: "plural_name",
                                singularName: "singular_name",
                                traitId: "trait_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            featureId: "feature_id",
                            id: "id",
                            meteredMonthlyPrice: {
                                billingScheme: "per_unit",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                isActive: true,
                                meterEventName: "meter_event_name",
                                meterEventPayloadKey: "meter_event_payload_key",
                                meterId: "meter_id",
                                packageSize: 1,
                                price: 1,
                                priceDecimal: "price_decimal",
                                priceExternalId: "price_external_id",
                                priceId: "price_id",
                                priceTier: [{}, {}],
                                productExternalId: "product_external_id",
                                productId: "product_id",
                                productName: "product_name",
                                providerType: "schematic",
                                tiersMode: "graduated",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                usageType: "licensed",
                            },
                            meteredYearlyPrice: {
                                billingScheme: "per_unit",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                isActive: true,
                                meterEventName: "meter_event_name",
                                meterEventPayloadKey: "meter_event_payload_key",
                                meterId: "meter_id",
                                packageSize: 1,
                                price: 1,
                                priceDecimal: "price_decimal",
                                priceExternalId: "price_external_id",
                                priceId: "price_id",
                                priceTier: [{}, {}],
                                productExternalId: "product_external_id",
                                productId: "product_id",
                                productName: "product_name",
                                providerType: "schematic",
                                tiersMode: "graduated",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                usageType: "licensed",
                            },
                            metricPeriod: "metric_period",
                            metricPeriodMonthReset: "metric_period_month_reset",
                            plan: {
                                audienceType: "audience_type",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                planType: "plan",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            planId: "plan_id",
                            priceBehavior: "credit_burndown",
                            ruleId: "rule_id",
                            ruleIdUsageExceeded: "rule_id_usage_exceeded",
                            softLimit: 1,
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            usageBasedProduct: {
                                accountId: "account_id",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                isActive: true,
                                name: "name",
                                price: 1.1,
                                priceDecimal: "price_decimal",
                                productId: "product_id",
                                providerType: "schematic",
                                quantity: 1.1,
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueBool: true,
                            valueCredit: {
                                burnStrategy: "expiration_priority",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                defaultExpiryUnit: "billing_periods",
                                defaultExpiryUnitCount: 1,
                                defaultRolloverPolicy: "expire",
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                pluralName: "plural_name",
                                price: {
                                    currency: "currency",
                                    externalPriceId: "external_price_id",
                                    id: "id",
                                    interval: "day",
                                    price: 1,
                                    providerType: "schematic",
                                    scheme: "per_unit",
                                },
                                product: {
                                    accountId: "account_id",
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    environmentId: "environment_id",
                                    externalId: "external_id",
                                    isActive: true,
                                    name: "name",
                                    price: 1.1,
                                    productId: "product_id",
                                    providerType: "schematic",
                                    quantity: 1.1,
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                singularName: "singular_name",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueNumeric: 1,
                            valueTrait: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                displayName: "display_name",
                                entityType: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                traitType: "boolean",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueTraitId: "value_trait_id",
                            valueType: "boolean",
                        },
                        priceBehavior: "credit_burndown",
                        softLimit: 1,
                        usage: 1,
                        yearlyUsageBasedPrice: {
                            billingScheme: "per_unit",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            isActive: true,
                            meterEventName: "meter_event_name",
                            meterEventPayloadKey: "meter_event_payload_key",
                            meterId: "meter_id",
                            packageSize: 1,
                            price: 1,
                            priceDecimal: "price_decimal",
                            priceExternalId: "price_external_id",
                            priceId: "price_id",
                            priceTier: [
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                            ],
                            productExternalId: "product_external_id",
                            productId: "product_id",
                            productName: "product_name",
                            providerType: "schematic",
                            tiersMode: "graduated",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            usageType: "licensed",
                        },
                    },
                    {
                        access: true,
                        allocation: 1,
                        allocationType: "boolean",
                        companyOverride: {
                            company: {
                                addOns: [
                                    {
                                        id: "id",
                                        includedCreditGrants: [],
                                        name: "name",
                                    },
                                    {
                                        id: "id",
                                        includedCreditGrants: [],
                                        name: "name",
                                    },
                                ],
                                billingCreditBalances: {
                                    billing_credit_balances: 1.1,
                                },
                                billingSubscription: {
                                    cancelAtPeriodEnd: true,
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    currency: "currency",
                                    customerExternalId: "customer_external_id",
                                    discounts: [],
                                    id: "id",
                                    interval: "interval",
                                    periodEnd: 1,
                                    periodStart: 1,
                                    products: [],
                                    providerType: "schematic",
                                    status: "status",
                                    subscriptionExternalId: "subscription_external_id",
                                    totalPrice: 1,
                                },
                                billingSubscriptions: [
                                    {
                                        cancelAtPeriodEnd: true,
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        currency: "currency",
                                        customerExternalId: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        periodEnd: 1,
                                        periodStart: 1,
                                        products: [],
                                        providerType: "schematic",
                                        status: "status",
                                        subscriptionExternalId: "subscription_external_id",
                                        totalPrice: 1,
                                    },
                                    {
                                        cancelAtPeriodEnd: true,
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        currency: "currency",
                                        customerExternalId: "customer_external_id",
                                        discounts: [],
                                        id: "id",
                                        interval: "interval",
                                        periodEnd: 1,
                                        periodStart: 1,
                                        products: [],
                                        providerType: "schematic",
                                        status: "status",
                                        subscriptionExternalId: "subscription_external_id",
                                        totalPrice: 1,
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                defaultPaymentMethod: {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    customerExternalId: "customer_external_id",
                                    environmentId: "environment_id",
                                    externalId: "external_id",
                                    id: "id",
                                    paymentMethodType: "payment_method_type",
                                    providerType: "schematic",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                entityTraits: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        environmentId: "environment_id",
                                        id: "id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        environmentId: "environment_id",
                                        id: "id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                ],
                                environmentId: "environment_id",
                                id: "id",
                                keys: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        entityId: "entity_id",
                                        entityType: "company",
                                        environmentId: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        definitionId: "definition_id",
                                        entityId: "entity_id",
                                        entityType: "company",
                                        environmentId: "environment_id",
                                        id: "id",
                                        key: "key",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        value: "value",
                                    },
                                ],
                                lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                                logoUrl: "logo_url",
                                metrics: [
                                    {
                                        accountId: "account_id",
                                        capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                                        capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                                        companyId: "company_id",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        eventSubtype: "event_subtype",
                                        monthReset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                    {
                                        accountId: "account_id",
                                        capturedAtMax: new Date("2024-01-15T09:30:00.000Z"),
                                        capturedAtMin: new Date("2024-01-15T09:30:00.000Z"),
                                        companyId: "company_id",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        eventSubtype: "event_subtype",
                                        monthReset: "month_reset",
                                        period: "period",
                                        value: 1,
                                    },
                                ],
                                name: "name",
                                paymentMethods: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        customerExternalId: "customer_external_id",
                                        environmentId: "environment_id",
                                        externalId: "external_id",
                                        id: "id",
                                        paymentMethodType: "payment_method_type",
                                        providerType: "schematic",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        customerExternalId: "customer_external_id",
                                        environmentId: "environment_id",
                                        externalId: "external_id",
                                        id: "id",
                                        paymentMethodType: "payment_method_type",
                                        providerType: "schematic",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                plan: {
                                    id: "id",
                                    includedCreditGrants: [],
                                    name: "name",
                                },
                                plans: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                rules: [
                                    {
                                        accountId: "account_id",
                                        conditionGroups: [],
                                        conditions: [],
                                        environmentId: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        ruleType: "default",
                                        value: true,
                                    },
                                    {
                                        accountId: "account_id",
                                        conditionGroups: [],
                                        conditions: [],
                                        environmentId: "environment_id",
                                        id: "id",
                                        name: "name",
                                        priority: 1,
                                        ruleType: "default",
                                        value: true,
                                    },
                                ],
                                traits: {
                                    traits: {
                                        key: "value",
                                    },
                                },
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                userCount: 1,
                            },
                            companyId: "company_id",
                            consumptionRate: 1.1,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            expirationDate: new Date("2024-01-15T09:30:00.000Z"),
                            feature: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                eventSubtype: "event_subtype",
                                featureType: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecyclePhase: "add_on",
                                maintainerId: "maintainer_id",
                                name: "name",
                                pluralName: "plural_name",
                                singularName: "singular_name",
                                traitId: "trait_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            featureId: "feature_id",
                            id: "id",
                            metricPeriod: "metric_period",
                            metricPeriodMonthReset: "metric_period_month_reset",
                            notes: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    externalUserId: "external_user_id",
                                    externalUserName: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    externalUserId: "external_user_id",
                                    externalUserName: "external_user_name",
                                    id: "id",
                                    note: "note",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            ruleId: "rule_id",
                            ruleIdUsageExceeded: "rule_id_usage_exceeded",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            valueBool: true,
                            valueNumeric: 1,
                            valueTrait: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                displayName: "display_name",
                                entityType: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                traitType: "boolean",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueTraitId: "value_trait_id",
                            valueType: "boolean",
                        },
                        creditConsumptionRate: 1.1,
                        creditGrantCounts: {
                            credit_grant_counts: 1.1,
                        },
                        creditGrantDetails: [
                            {
                                creditTypeIcon: "credit_type_icon",
                                expiresAt: new Date("2024-01-15T09:30:00.000Z"),
                                grantReason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                            {
                                creditTypeIcon: "credit_type_icon",
                                expiresAt: new Date("2024-01-15T09:30:00.000Z"),
                                grantReason: "billing_credit_auto_topup",
                                quantity: 1.1,
                            },
                        ],
                        creditGrantReason: "billing_credit_auto_topup",
                        creditRemaining: 1.1,
                        creditTotal: 1.1,
                        creditTypeIcon: "credit_type_icon",
                        creditUsageAggregation: {
                            usageThisBillingPeriod: 1.1,
                            usageThisCalendarMonth: 1.1,
                            usageThisWeek: 1.1,
                            usageToday: 1.1,
                        },
                        creditUsed: 1.1,
                        effectiveLimit: 1,
                        effectivePrice: 1.1,
                        entitlementExpirationDate: new Date("2024-01-15T09:30:00.000Z"),
                        entitlementId: "entitlement_id",
                        entitlementSource: "entitlement_source",
                        entitlementType: "company_override",
                        feature: {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            eventSubtype: "event_subtype",
                            eventSummary: {
                                companyCount: 1,
                                environmentId: "environment_id",
                                eventCount: 1,
                                eventSubtype: "event_subtype",
                                lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                                userCount: 1,
                            },
                            featureType: "boolean",
                            flags: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    feature: {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        description: "description",
                                        featureType: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                    featureId: "feature_id",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    maintainerId: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    feature: {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        description: "description",
                                        featureType: "boolean",
                                        icon: "icon",
                                        id: "id",
                                        name: "name",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                    featureId: "feature_id",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    maintainerId: "maintainer_id",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                        {
                                            conditionGroups: [],
                                            conditions: [],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            lifecyclePhase: "add_on",
                            maintainerId: "maintainer_id",
                            name: "name",
                            plans: [
                                {
                                    description: "description",
                                    id: "id",
                                    imageUrl: "image_url",
                                    name: "name",
                                },
                                {
                                    description: "description",
                                    id: "id",
                                    imageUrl: "image_url",
                                    name: "name",
                                },
                            ],
                            pluralName: "plural_name",
                            singularName: "singular_name",
                            trait: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                displayName: "display_name",
                                entityType: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                traitType: "boolean",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            traitId: "trait_id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                        hasValidAllocation: true,
                        isUnlimited: true,
                        metricResetAt: new Date("2024-01-15T09:30:00.000Z"),
                        monthReset: "month_reset",
                        monthlyUsageBasedPrice: {
                            billingScheme: "per_unit",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            isActive: true,
                            meterEventName: "meter_event_name",
                            meterEventPayloadKey: "meter_event_payload_key",
                            meterId: "meter_id",
                            packageSize: 1,
                            price: 1,
                            priceDecimal: "price_decimal",
                            priceExternalId: "price_external_id",
                            priceId: "price_id",
                            priceTier: [
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                            ],
                            productExternalId: "product_external_id",
                            productId: "product_id",
                            productName: "product_name",
                            providerType: "schematic",
                            tiersMode: "graduated",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            usageType: "licensed",
                        },
                        overuse: 1,
                        percentUsed: 1.1,
                        period: "period",
                        plan: {
                            audienceType: "audience_type",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            icon: "icon",
                            id: "id",
                            name: "name",
                            planType: "plan",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                        planEntitlement: {
                            billingThreshold: 1,
                            consumptionRate: 1.1,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            feature: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                eventSubtype: "event_subtype",
                                featureType: "boolean",
                                icon: "icon",
                                id: "id",
                                lifecyclePhase: "add_on",
                                maintainerId: "maintainer_id",
                                name: "name",
                                pluralName: "plural_name",
                                singularName: "singular_name",
                                traitId: "trait_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            featureId: "feature_id",
                            id: "id",
                            meteredMonthlyPrice: {
                                billingScheme: "per_unit",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                isActive: true,
                                meterEventName: "meter_event_name",
                                meterEventPayloadKey: "meter_event_payload_key",
                                meterId: "meter_id",
                                packageSize: 1,
                                price: 1,
                                priceDecimal: "price_decimal",
                                priceExternalId: "price_external_id",
                                priceId: "price_id",
                                priceTier: [{}, {}],
                                productExternalId: "product_external_id",
                                productId: "product_id",
                                productName: "product_name",
                                providerType: "schematic",
                                tiersMode: "graduated",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                usageType: "licensed",
                            },
                            meteredYearlyPrice: {
                                billingScheme: "per_unit",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                id: "id",
                                interval: "day",
                                isActive: true,
                                meterEventName: "meter_event_name",
                                meterEventPayloadKey: "meter_event_payload_key",
                                meterId: "meter_id",
                                packageSize: 1,
                                price: 1,
                                priceDecimal: "price_decimal",
                                priceExternalId: "price_external_id",
                                priceId: "price_id",
                                priceTier: [{}, {}],
                                productExternalId: "product_external_id",
                                productId: "product_id",
                                productName: "product_name",
                                providerType: "schematic",
                                tiersMode: "graduated",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                usageType: "licensed",
                            },
                            metricPeriod: "metric_period",
                            metricPeriodMonthReset: "metric_period_month_reset",
                            plan: {
                                audienceType: "audience_type",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                planType: "plan",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            planId: "plan_id",
                            priceBehavior: "credit_burndown",
                            ruleId: "rule_id",
                            ruleIdUsageExceeded: "rule_id_usage_exceeded",
                            softLimit: 1,
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            usageBasedProduct: {
                                accountId: "account_id",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                currency: "currency",
                                environmentId: "environment_id",
                                externalId: "external_id",
                                isActive: true,
                                name: "name",
                                price: 1.1,
                                priceDecimal: "price_decimal",
                                productId: "product_id",
                                providerType: "schematic",
                                quantity: 1.1,
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueBool: true,
                            valueCredit: {
                                burnStrategy: "expiration_priority",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                defaultExpiryUnit: "billing_periods",
                                defaultExpiryUnitCount: 1,
                                defaultRolloverPolicy: "expire",
                                description: "description",
                                icon: "icon",
                                id: "id",
                                name: "name",
                                pluralName: "plural_name",
                                price: {
                                    currency: "currency",
                                    externalPriceId: "external_price_id",
                                    id: "id",
                                    interval: "day",
                                    price: 1,
                                    providerType: "schematic",
                                    scheme: "per_unit",
                                },
                                product: {
                                    accountId: "account_id",
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    environmentId: "environment_id",
                                    externalId: "external_id",
                                    isActive: true,
                                    name: "name",
                                    price: 1.1,
                                    productId: "product_id",
                                    providerType: "schematic",
                                    quantity: 1.1,
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                                singularName: "singular_name",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueNumeric: 1,
                            valueTrait: {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                displayName: "display_name",
                                entityType: "company",
                                hierarchy: ["hierarchy", "hierarchy"],
                                id: "id",
                                traitType: "boolean",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                            valueTraitId: "value_trait_id",
                            valueType: "boolean",
                        },
                        priceBehavior: "credit_burndown",
                        softLimit: 1,
                        usage: 1,
                        yearlyUsageBasedPrice: {
                            billingScheme: "per_unit",
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            currency: "currency",
                            id: "id",
                            interval: "day",
                            isActive: true,
                            meterEventName: "meter_event_name",
                            meterEventPayloadKey: "meter_event_payload_key",
                            meterId: "meter_id",
                            packageSize: 1,
                            price: 1,
                            priceDecimal: "price_decimal",
                            priceExternalId: "price_external_id",
                            priceId: "price_id",
                            priceTier: [
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                                {
                                    flatAmount: 1,
                                    perUnitPrice: 1,
                                    perUnitPriceDecimal: "per_unit_price_decimal",
                                    upTo: 1,
                                },
                            ],
                            productExternalId: "product_external_id",
                            productId: "product_id",
                            productName: "product_name",
                            providerType: "schematic",
                            tiersMode: "graduated",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            usageType: "licensed",
                        },
                    },
                ],
            },
            params: {
                keys: {
                    keys: "keys",
                },
            },
        });
    });

    test("getFeatureUsageByCompany (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/usage-by-company").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.getFeatureUsageByCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getFeatureUsageByCompany (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/usage-by-company").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.getFeatureUsageByCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getFeatureUsageByCompany (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/usage-by-company").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.getFeatureUsageByCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getFeatureUsageByCompany (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/usage-by-company").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.entitlements.getFeatureUsageByCompany({
                keys: {
                    keys: "keys",
                },
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });
});
