// This file was auto-generated by Fern from our API Definition.

import * as Schematic from "../../src/api/index";
import { SchematicClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("Crm", () => {
    test("upsertDealLineItemAssociation (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { deal_external_id: "deal_external_id", line_item_external_id: "line_item_external_id" };
        const rawResponseBody = {
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                deal_id: "deal_id",
                environment_id: "environment_id",
                product_external_id: "product_external_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/crm/associations/deal-line-item")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.crm.upsertDealLineItemAssociation({
            deal_external_id: "deal_external_id",
            line_item_external_id: "line_item_external_id",
        });
        expect(response).toEqual({
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                deal_id: "deal_id",
                environment_id: "environment_id",
                product_external_id: "product_external_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertDealLineItemAssociation (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { deal_external_id: "deal_external_id", line_item_external_id: "line_item_external_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/associations/deal-line-item")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertDealLineItemAssociation({
                deal_external_id: "deal_external_id",
                line_item_external_id: "line_item_external_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertDealLineItemAssociation (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { deal_external_id: "deal_external_id", line_item_external_id: "line_item_external_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/associations/deal-line-item")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertDealLineItemAssociation({
                deal_external_id: "deal_external_id",
                line_item_external_id: "line_item_external_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertDealLineItemAssociation (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { deal_external_id: "deal_external_id", line_item_external_id: "line_item_external_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/associations/deal-line-item")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertDealLineItemAssociation({
                deal_external_id: "deal_external_id",
                line_item_external_id: "line_item_external_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertDealLineItemAssociation (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { deal_external_id: "deal_external_id", line_item_external_id: "line_item_external_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/associations/deal-line-item")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertDealLineItemAssociation({
                deal_external_id: "deal_external_id",
                line_item_external_id: "line_item_external_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertDealLineItemAssociation (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { deal_external_id: "deal_external_id", line_item_external_id: "line_item_external_id" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/associations/deal-line-item")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertDealLineItemAssociation({
                deal_external_id: "deal_external_id",
                line_item_external_id: "line_item_external_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("upsertLineItem (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            amount: "amount",
            interval: "interval",
            line_item_external_id: "line_item_external_id",
            product_external_id: "product_external_id",
            quantity: 1,
        };
        const rawResponseBody = {
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                deal_id: "deal_id",
                environment_id: "environment_id",
                product_external_id: "product_external_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/crm/deal-line-item/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.crm.upsertLineItem({
            amount: "amount",
            interval: "interval",
            line_item_external_id: "line_item_external_id",
            product_external_id: "product_external_id",
            quantity: 1,
        });
        expect(response).toEqual({
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                deal_id: "deal_id",
                environment_id: "environment_id",
                product_external_id: "product_external_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertLineItem (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            amount: "amount",
            interval: "interval",
            line_item_external_id: "line_item_external_id",
            product_external_id: "product_external_id",
            quantity: 1,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deal-line-item/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertLineItem({
                amount: "amount",
                interval: "interval",
                line_item_external_id: "line_item_external_id",
                product_external_id: "product_external_id",
                quantity: 1,
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertLineItem (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            amount: "amount",
            interval: "interval",
            line_item_external_id: "line_item_external_id",
            product_external_id: "product_external_id",
            quantity: 1,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deal-line-item/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertLineItem({
                amount: "amount",
                interval: "interval",
                line_item_external_id: "line_item_external_id",
                product_external_id: "product_external_id",
                quantity: 1,
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertLineItem (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            amount: "amount",
            interval: "interval",
            line_item_external_id: "line_item_external_id",
            product_external_id: "product_external_id",
            quantity: 1,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deal-line-item/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertLineItem({
                amount: "amount",
                interval: "interval",
                line_item_external_id: "line_item_external_id",
                product_external_id: "product_external_id",
                quantity: 1,
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertLineItem (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            amount: "amount",
            interval: "interval",
            line_item_external_id: "line_item_external_id",
            product_external_id: "product_external_id",
            quantity: 1,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deal-line-item/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertLineItem({
                amount: "amount",
                interval: "interval",
                line_item_external_id: "line_item_external_id",
                product_external_id: "product_external_id",
                quantity: 1,
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertLineItem (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            amount: "amount",
            interval: "interval",
            line_item_external_id: "line_item_external_id",
            product_external_id: "product_external_id",
            quantity: 1,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deal-line-item/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertLineItem({
                amount: "amount",
                interval: "interval",
                line_item_external_id: "line_item_external_id",
                product_external_id: "product_external_id",
                quantity: 1,
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("upsertCrmDeal (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            crm_company_key: "crm_company_key",
            crm_type: "crm_type",
            deal_external_id: "deal_external_id",
        };
        const rawResponseBody = {
            data: {
                account_id: "account_id",
                arr: "arr",
                company_external_id: "company_external_id",
                created_at: "2024-01-15T09:30:00Z",
                deal_external_id: "deal_external_id",
                deal_id: "deal_id",
                environment_id: "environment_id",
                mrr: "mrr",
                name: "name",
                product_external_id: "product_external_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/crm/deals/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.crm.upsertCrmDeal({
            crm_company_key: "crm_company_key",
            crm_type: "crm_type",
            deal_external_id: "deal_external_id",
        });
        expect(response).toEqual({
            data: {
                account_id: "account_id",
                arr: "arr",
                company_external_id: "company_external_id",
                created_at: "2024-01-15T09:30:00Z",
                deal_external_id: "deal_external_id",
                deal_id: "deal_id",
                environment_id: "environment_id",
                mrr: "mrr",
                name: "name",
                product_external_id: "product_external_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertCrmDeal (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            crm_company_key: "crm_company_key",
            crm_type: "crm_type",
            deal_external_id: "deal_external_id",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deals/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmDeal({
                crm_company_key: "crm_company_key",
                crm_type: "crm_type",
                deal_external_id: "deal_external_id",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertCrmDeal (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            crm_company_key: "crm_company_key",
            crm_type: "crm_type",
            deal_external_id: "deal_external_id",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deals/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmDeal({
                crm_company_key: "crm_company_key",
                crm_type: "crm_type",
                deal_external_id: "deal_external_id",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertCrmDeal (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            crm_company_key: "crm_company_key",
            crm_type: "crm_type",
            deal_external_id: "deal_external_id",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deals/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmDeal({
                crm_company_key: "crm_company_key",
                crm_type: "crm_type",
                deal_external_id: "deal_external_id",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertCrmDeal (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            crm_company_key: "crm_company_key",
            crm_type: "crm_type",
            deal_external_id: "deal_external_id",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deals/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmDeal({
                crm_company_key: "crm_company_key",
                crm_type: "crm_type",
                deal_external_id: "deal_external_id",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertCrmDeal (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            crm_company_key: "crm_company_key",
            crm_type: "crm_type",
            deal_external_id: "deal_external_id",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/deals/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmDeal({
                crm_company_key: "crm_company_key",
                crm_type: "crm_type",
                deal_external_id: "deal_external_id",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listCrmProducts (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    name: "name",
                    price: "price",
                    product_id: "product_id",
                    quantity: 1.1,
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: { ids: ["ids"], limit: 1, name: "name", offset: 1 },
        };
        server.mockEndpoint().get("/crm/products").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.crm.listCrmProducts({
            name: "name",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    account_id: "account_id",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    environment_id: "environment_id",
                    external_id: "external_id",
                    name: "name",
                    price: "price",
                    product_id: "product_id",
                    quantity: 1.1,
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                ids: ["ids"],
                limit: 1,
                name: "name",
                offset: 1,
            },
        });
    });

    test("listCrmProducts (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/crm/products").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.crm.listCrmProducts();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listCrmProducts (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/crm/products").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.crm.listCrmProducts();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listCrmProducts (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/crm/products").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.crm.listCrmProducts();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listCrmProducts (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/crm/products").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.crm.listCrmProducts();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listCrmProducts (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/crm/products").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.crm.listCrmProducts();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("upsertCrmProduct (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            currency: "currency",
            description: "description",
            external_id: "external_id",
            interval: "interval",
            name: "name",
            price: "price",
            quantity: 1,
            sku: "sku",
        };
        const rawResponseBody = {
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                currency: "currency",
                environment_id: "environment_id",
                external_id: "external_id",
                name: "name",
                price: "price",
                product_id: "product_id",
                quantity: 1.1,
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/crm/products/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.crm.upsertCrmProduct({
            currency: "currency",
            description: "description",
            external_id: "external_id",
            interval: "interval",
            name: "name",
            price: "price",
            quantity: 1,
            sku: "sku",
        });
        expect(response).toEqual({
            data: {
                account_id: "account_id",
                created_at: "2024-01-15T09:30:00Z",
                currency: "currency",
                environment_id: "environment_id",
                external_id: "external_id",
                name: "name",
                price: "price",
                product_id: "product_id",
                quantity: 1.1,
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: {
                key: "value",
            },
        });
    });

    test("upsertCrmProduct (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            currency: "currency",
            description: "description",
            external_id: "external_id",
            interval: "interval",
            name: "name",
            price: "price",
            quantity: 1,
            sku: "sku",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/products/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmProduct({
                currency: "currency",
                description: "description",
                external_id: "external_id",
                interval: "interval",
                name: "name",
                price: "price",
                quantity: 1,
                sku: "sku",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("upsertCrmProduct (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            currency: "currency",
            description: "description",
            external_id: "external_id",
            interval: "interval",
            name: "name",
            price: "price",
            quantity: 1,
            sku: "sku",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/products/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmProduct({
                currency: "currency",
                description: "description",
                external_id: "external_id",
                interval: "interval",
                name: "name",
                price: "price",
                quantity: 1,
                sku: "sku",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("upsertCrmProduct (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            currency: "currency",
            description: "description",
            external_id: "external_id",
            interval: "interval",
            name: "name",
            price: "price",
            quantity: 1,
            sku: "sku",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/products/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmProduct({
                currency: "currency",
                description: "description",
                external_id: "external_id",
                interval: "interval",
                name: "name",
                price: "price",
                quantity: 1,
                sku: "sku",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("upsertCrmProduct (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            currency: "currency",
            description: "description",
            external_id: "external_id",
            interval: "interval",
            name: "name",
            price: "price",
            quantity: 1,
            sku: "sku",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/products/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmProduct({
                currency: "currency",
                description: "description",
                external_id: "external_id",
                interval: "interval",
                name: "name",
                price: "price",
                quantity: 1,
                sku: "sku",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("upsertCrmProduct (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            currency: "currency",
            description: "description",
            external_id: "external_id",
            interval: "interval",
            name: "name",
            price: "price",
            quantity: 1,
            sku: "sku",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/crm/products/upsert")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.crm.upsertCrmProduct({
                currency: "currency",
                description: "description",
                external_id: "external_id",
                interval: "interval",
                name: "name",
                price: "price",
                quantity: 1,
                sku: "sku",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });
});
