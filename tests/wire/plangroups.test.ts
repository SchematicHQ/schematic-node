// This file was auto-generated by Fern from our API Definition.

import * as Schematic from "../../src/api/index";
import { SchematicClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("PlangroupsClient", () => {
    test("getPlanGroup (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                add_ons: [
                    {
                        charge_type: "free",
                        company_count: 1,
                        compatible_plan_ids: ["compatible_plan_ids"],
                        controlled_by: "schematic",
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        entitlements: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                feature_id: "feature_id",
                                id: "id",
                                plan_id: "plan_id",
                                rule_id: "rule_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                value_type: "boolean",
                            },
                        ],
                        features: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                feature_type: "boolean",
                                flags: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        default_value: true,
                                        description: "description",
                                        flag_type: "boolean",
                                        id: "id",
                                        key: "key",
                                        name: "name",
                                        rules: [
                                            {
                                                condition_groups: [
                                                    {
                                                        conditions: [
                                                            {
                                                                condition_type: "condition_type",
                                                                created_at: "2024-01-15T09:30:00Z",
                                                                environment_id: "environment_id",
                                                                id: "id",
                                                                operator: "operator",
                                                                resource_ids: ["resource_ids"],
                                                                resources: [{ id: "id", name: "name" }],
                                                                rule_id: "rule_id",
                                                                trait_value: "trait_value",
                                                                updated_at: "2024-01-15T09:30:00Z",
                                                            },
                                                        ],
                                                        created_at: "2024-01-15T09:30:00Z",
                                                        environment_id: "environment_id",
                                                        id: "id",
                                                        rule_id: "rule_id",
                                                        updated_at: "2024-01-15T09:30:00Z",
                                                    },
                                                ],
                                                conditions: [
                                                    {
                                                        condition_type: "condition_type",
                                                        created_at: "2024-01-15T09:30:00Z",
                                                        environment_id: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resource_ids: ["resource_ids"],
                                                        resources: [{ id: "id", name: "name" }],
                                                        rule_id: "rule_id",
                                                        trait_value: "trait_value",
                                                        updated_at: "2024-01-15T09:30:00Z",
                                                    },
                                                ],
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                name: "name",
                                                priority: 1,
                                                rule_type: "rule_type",
                                                updated_at: "2024-01-15T09:30:00Z",
                                                value: true,
                                            },
                                        ],
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plans: [{ id: "id", name: "name" }],
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        is_custom: true,
                        is_default: true,
                        is_free: true,
                        is_trialable: true,
                        name: "name",
                        plan_type: "plan",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                checkout_settings: { collect_address: true, collect_email: true, collect_phone: true },
                component_settings: {
                    show_as_monthly_prices: true,
                    show_credits: true,
                    show_period_toggle: true,
                    show_zero_price_as_free: true,
                },
                custom_plan_config: { cta_text: "cta_text", cta_web_site: "cta_web_site", price_text: "price_text" },
                custom_plan_id: "custom_plan_id",
                default_plan: {
                    billing_product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                external_price_id: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        product_id: "product_id",
                        quantity: 1.1,
                        subscription_count: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    charge_type: "free",
                    company_count: 1,
                    compatible_plan_ids: ["compatible_plan_ids"],
                    controlled_by: "schematic",
                    created_at: "2024-01-15T09:30:00Z",
                    custom_plan_config: {
                        cta_text: "cta_text",
                        cta_web_site: "cta_web_site",
                        price_text: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            feature_id: "feature_id",
                            id: "id",
                            plan_id: "plan_id",
                            rule_id: "rule_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value_type: "boolean",
                        },
                    ],
                    features: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            feature_type: "boolean",
                            flags: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [
                                                {
                                                    conditions: [
                                                        {
                                                            condition_type: "condition_type",
                                                            created_at: "2024-01-15T09:30:00Z",
                                                            environment_id: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resource_ids: ["resource_ids"],
                                                            resources: [{ id: "id", name: "name" }],
                                                            rule_id: "rule_id",
                                                            trait_value: "trait_value",
                                                            updated_at: "2024-01-15T09:30:00Z",
                                                        },
                                                    ],
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    rule_id: "rule_id",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    condition_type: "condition_type",
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resource_ids: ["resource_ids"],
                                                    resources: [{ id: "id", name: "name" }],
                                                    rule_id: "rule_id",
                                                    trait_value: "trait_value",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [{ id: "id", name: "name" }],
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    included_credit_grants: [
                        {
                            auto_topup_enabled: true,
                            created_at: "2024-01-15T09:30:00Z",
                            credit_amount: 1,
                            credit_id: "credit_id",
                            credit_name: "credit_name",
                            id: "id",
                            plan_id: "plan_id",
                            plan_name: "plan_name",
                            reset_cadence: "daily",
                            reset_start: "billing_period",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    is_custom: true,
                    is_default: true,
                    is_free: true,
                    is_trialable: true,
                    monthly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    one_time_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    plan_type: "plan",
                    trial_days: 1,
                    updated_at: "2024-01-15T09:30:00Z",
                    yearly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                fallback_plan: {
                    billing_product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                external_price_id: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        product_id: "product_id",
                        quantity: 1.1,
                        subscription_count: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    charge_type: "free",
                    company_count: 1,
                    compatible_plan_ids: ["compatible_plan_ids"],
                    controlled_by: "schematic",
                    created_at: "2024-01-15T09:30:00Z",
                    custom_plan_config: {
                        cta_text: "cta_text",
                        cta_web_site: "cta_web_site",
                        price_text: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            feature_id: "feature_id",
                            id: "id",
                            plan_id: "plan_id",
                            rule_id: "rule_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value_type: "boolean",
                        },
                    ],
                    features: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            feature_type: "boolean",
                            flags: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [
                                                {
                                                    conditions: [
                                                        {
                                                            condition_type: "condition_type",
                                                            created_at: "2024-01-15T09:30:00Z",
                                                            environment_id: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resource_ids: ["resource_ids"],
                                                            resources: [{ id: "id", name: "name" }],
                                                            rule_id: "rule_id",
                                                            trait_value: "trait_value",
                                                            updated_at: "2024-01-15T09:30:00Z",
                                                        },
                                                    ],
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    rule_id: "rule_id",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    condition_type: "condition_type",
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resource_ids: ["resource_ids"],
                                                    resources: [{ id: "id", name: "name" }],
                                                    rule_id: "rule_id",
                                                    trait_value: "trait_value",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [{ id: "id", name: "name" }],
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    included_credit_grants: [
                        {
                            auto_topup_enabled: true,
                            created_at: "2024-01-15T09:30:00Z",
                            credit_amount: 1,
                            credit_id: "credit_id",
                            credit_name: "credit_name",
                            id: "id",
                            plan_id: "plan_id",
                            plan_name: "plan_name",
                            reset_cadence: "daily",
                            reset_start: "billing_period",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    is_custom: true,
                    is_default: true,
                    is_free: true,
                    is_trialable: true,
                    monthly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    one_time_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    plan_type: "plan",
                    trial_days: 1,
                    updated_at: "2024-01-15T09:30:00Z",
                    yearly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                fallback_plan_id: "fallback_plan_id",
                id: "id",
                initial_plan: {
                    billing_product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                external_price_id: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        product_id: "product_id",
                        quantity: 1.1,
                        subscription_count: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    charge_type: "free",
                    company_count: 1,
                    compatible_plan_ids: ["compatible_plan_ids"],
                    controlled_by: "schematic",
                    created_at: "2024-01-15T09:30:00Z",
                    custom_plan_config: {
                        cta_text: "cta_text",
                        cta_web_site: "cta_web_site",
                        price_text: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            feature_id: "feature_id",
                            id: "id",
                            plan_id: "plan_id",
                            rule_id: "rule_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value_type: "boolean",
                        },
                    ],
                    features: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            feature_type: "boolean",
                            flags: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [
                                                {
                                                    conditions: [
                                                        {
                                                            condition_type: "condition_type",
                                                            created_at: "2024-01-15T09:30:00Z",
                                                            environment_id: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resource_ids: ["resource_ids"],
                                                            resources: [{ id: "id", name: "name" }],
                                                            rule_id: "rule_id",
                                                            trait_value: "trait_value",
                                                            updated_at: "2024-01-15T09:30:00Z",
                                                        },
                                                    ],
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    rule_id: "rule_id",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    condition_type: "condition_type",
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resource_ids: ["resource_ids"],
                                                    resources: [{ id: "id", name: "name" }],
                                                    rule_id: "rule_id",
                                                    trait_value: "trait_value",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [{ id: "id", name: "name" }],
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    included_credit_grants: [
                        {
                            auto_topup_enabled: true,
                            created_at: "2024-01-15T09:30:00Z",
                            credit_amount: 1,
                            credit_id: "credit_id",
                            credit_name: "credit_name",
                            id: "id",
                            plan_id: "plan_id",
                            plan_name: "plan_name",
                            reset_cadence: "daily",
                            reset_start: "billing_period",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    is_custom: true,
                    is_default: true,
                    is_free: true,
                    is_trialable: true,
                    monthly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    one_time_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    plan_type: "plan",
                    trial_days: 1,
                    updated_at: "2024-01-15T09:30:00Z",
                    yearly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                initial_plan_id: "initial_plan_id",
                initial_plan_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                initial_plan_price_id: "initial_plan_price_id",
                ordered_add_on_list: [{ plan_id: "plan_id" }],
                ordered_bundle_list: [{ bundleId: "bundleId" }],
                ordered_plan_list: [{ plan_id: "plan_id" }],
                plans: [
                    {
                        charge_type: "free",
                        company_count: 1,
                        compatible_plan_ids: ["compatible_plan_ids"],
                        controlled_by: "schematic",
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        entitlements: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                feature_id: "feature_id",
                                id: "id",
                                plan_id: "plan_id",
                                rule_id: "rule_id",
                                updated_at: "2024-01-15T09:30:00Z",
                                value_type: "boolean",
                            },
                        ],
                        features: [
                            {
                                created_at: "2024-01-15T09:30:00Z",
                                description: "description",
                                feature_type: "boolean",
                                flags: [
                                    {
                                        created_at: "2024-01-15T09:30:00Z",
                                        default_value: true,
                                        description: "description",
                                        flag_type: "boolean",
                                        id: "id",
                                        key: "key",
                                        name: "name",
                                        rules: [
                                            {
                                                condition_groups: [
                                                    {
                                                        conditions: [
                                                            {
                                                                condition_type: "condition_type",
                                                                created_at: "2024-01-15T09:30:00Z",
                                                                environment_id: "environment_id",
                                                                id: "id",
                                                                operator: "operator",
                                                                resource_ids: ["resource_ids"],
                                                                resources: [{ id: "id", name: "name" }],
                                                                rule_id: "rule_id",
                                                                trait_value: "trait_value",
                                                                updated_at: "2024-01-15T09:30:00Z",
                                                            },
                                                        ],
                                                        created_at: "2024-01-15T09:30:00Z",
                                                        environment_id: "environment_id",
                                                        id: "id",
                                                        rule_id: "rule_id",
                                                        updated_at: "2024-01-15T09:30:00Z",
                                                    },
                                                ],
                                                conditions: [
                                                    {
                                                        condition_type: "condition_type",
                                                        created_at: "2024-01-15T09:30:00Z",
                                                        environment_id: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resource_ids: ["resource_ids"],
                                                        resources: [{ id: "id", name: "name" }],
                                                        rule_id: "rule_id",
                                                        trait_value: "trait_value",
                                                        updated_at: "2024-01-15T09:30:00Z",
                                                    },
                                                ],
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                name: "name",
                                                priority: 1,
                                                rule_type: "rule_type",
                                                updated_at: "2024-01-15T09:30:00Z",
                                                value: true,
                                            },
                                        ],
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plans: [{ id: "id", name: "name" }],
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        is_custom: true,
                        is_default: true,
                        is_free: true,
                        is_trialable: true,
                        name: "name",
                        plan_type: "plan",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                prevent_downgrades_when_over_limit: true,
                prevent_self_service_downgrade: true,
                prevent_self_service_downgrade_button_text: "prevent_self_service_downgrade_button_text",
                prevent_self_service_downgrade_url: "prevent_self_service_downgrade_url",
                proration_behavior: "proration_behavior",
                show_as_monthly_prices: true,
                show_credits: true,
                show_period_toggle: true,
                show_zero_price_as_free: true,
                sync_customer_billing_details: true,
                tax_collection_enabled: true,
                trial_days: 1,
                trial_expiry_plan: {
                    billing_product: {
                        account_id: "account_id",
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        external_id: "external_id",
                        is_active: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                external_price_id: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        product_id: "product_id",
                        quantity: 1.1,
                        subscription_count: 1,
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    charge_type: "free",
                    company_count: 1,
                    compatible_plan_ids: ["compatible_plan_ids"],
                    controlled_by: "schematic",
                    created_at: "2024-01-15T09:30:00Z",
                    custom_plan_config: {
                        cta_text: "cta_text",
                        cta_web_site: "cta_web_site",
                        price_text: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            feature_id: "feature_id",
                            id: "id",
                            plan_id: "plan_id",
                            rule_id: "rule_id",
                            updated_at: "2024-01-15T09:30:00Z",
                            value_type: "boolean",
                        },
                    ],
                    features: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            description: "description",
                            feature_type: "boolean",
                            flags: [
                                {
                                    created_at: "2024-01-15T09:30:00Z",
                                    default_value: true,
                                    description: "description",
                                    flag_type: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            condition_groups: [
                                                {
                                                    conditions: [
                                                        {
                                                            condition_type: "condition_type",
                                                            created_at: "2024-01-15T09:30:00Z",
                                                            environment_id: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resource_ids: ["resource_ids"],
                                                            resources: [{ id: "id", name: "name" }],
                                                            rule_id: "rule_id",
                                                            trait_value: "trait_value",
                                                            updated_at: "2024-01-15T09:30:00Z",
                                                        },
                                                    ],
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    rule_id: "rule_id",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    condition_type: "condition_type",
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resource_ids: ["resource_ids"],
                                                    resources: [{ id: "id", name: "name" }],
                                                    rule_id: "rule_id",
                                                    trait_value: "trait_value",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            rule_type: "rule_type",
                                            updated_at: "2024-01-15T09:30:00Z",
                                            value: true,
                                        },
                                    ],
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [{ id: "id", name: "name" }],
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    included_credit_grants: [
                        {
                            auto_topup_enabled: true,
                            created_at: "2024-01-15T09:30:00Z",
                            credit_amount: 1,
                            credit_id: "credit_id",
                            credit_name: "credit_name",
                            id: "id",
                            plan_id: "plan_id",
                            plan_name: "plan_name",
                            reset_cadence: "daily",
                            reset_start: "billing_period",
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    is_custom: true,
                    is_default: true,
                    is_free: true,
                    is_trialable: true,
                    monthly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    one_time_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    plan_type: "plan",
                    trial_days: 1,
                    updated_at: "2024-01-15T09:30:00Z",
                    yearly_price: {
                        currency: "currency",
                        external_price_id: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                trial_expiry_plan_id: "trial_expiry_plan_id",
                trial_expiry_plan_price: {
                    billing_scheme: "per_unit",
                    created_at: "2024-01-15T09:30:00Z",
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    is_active: true,
                    meter_event_name: "meter_event_name",
                    meter_event_payload_key: "meter_event_payload_key",
                    meter_id: "meter_id",
                    package_size: 1,
                    price: 1,
                    price_decimal: "price_decimal",
                    price_external_id: "price_external_id",
                    price_id: "price_id",
                    price_tier: [{}],
                    product_external_id: "product_external_id",
                    product_id: "product_id",
                    product_name: "product_name",
                    tiers_mode: "graduated",
                    updated_at: "2024-01-15T09:30:00Z",
                    usage_type: "licensed",
                },
                trial_expiry_plan_price_id: "trial_expiry_plan_price_id",
                trial_payment_method_required: true,
            },
            params: { key: "value" },
        };
        server.mockEndpoint().get("/plan-groups").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.plangroups.getPlanGroup();
        expect(response).toEqual({
            data: {
                addOns: [
                    {
                        chargeType: "free",
                        companyCount: 1,
                        compatiblePlanIds: ["compatible_plan_ids"],
                        controlledBy: "schematic",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        entitlements: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                featureId: "feature_id",
                                id: "id",
                                planId: "plan_id",
                                ruleId: "rule_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                valueType: "boolean",
                            },
                        ],
                        features: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                featureType: "boolean",
                                flags: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        defaultValue: true,
                                        description: "description",
                                        flagType: "boolean",
                                        id: "id",
                                        key: "key",
                                        name: "name",
                                        rules: [
                                            {
                                                conditionGroups: [
                                                    {
                                                        conditions: [
                                                            {
                                                                conditionType: "condition_type",
                                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                                environmentId: "environment_id",
                                                                id: "id",
                                                                operator: "operator",
                                                                resourceIds: ["resource_ids"],
                                                                resources: [
                                                                    {
                                                                        id: "id",
                                                                        name: "name",
                                                                    },
                                                                ],
                                                                ruleId: "rule_id",
                                                                traitValue: "trait_value",
                                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                            },
                                                        ],
                                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        environmentId: "environment_id",
                                                        id: "id",
                                                        ruleId: "rule_id",
                                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    },
                                                ],
                                                conditions: [
                                                    {
                                                        conditionType: "condition_type",
                                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        environmentId: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resourceIds: ["resource_ids"],
                                                        resources: [
                                                            {
                                                                id: "id",
                                                                name: "name",
                                                            },
                                                        ],
                                                        ruleId: "rule_id",
                                                        traitValue: "trait_value",
                                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    },
                                                ],
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                name: "name",
                                                priority: 1,
                                                ruleType: "rule_type",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                value: true,
                                            },
                                        ],
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plans: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        isCustom: true,
                        isDefault: true,
                        isFree: true,
                        isTrialable: true,
                        name: "name",
                        planType: "plan",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                checkoutSettings: {
                    collectAddress: true,
                    collectEmail: true,
                    collectPhone: true,
                },
                componentSettings: {
                    showAsMonthlyPrices: true,
                    showCredits: true,
                    showPeriodToggle: true,
                    showZeroPriceAsFree: true,
                },
                customPlanConfig: {
                    ctaText: "cta_text",
                    ctaWebSite: "cta_web_site",
                    priceText: "price_text",
                },
                customPlanId: "custom_plan_id",
                defaultPlan: {
                    billingProduct: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                externalPriceId: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        productId: "product_id",
                        quantity: 1.1,
                        subscriptionCount: 1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    chargeType: "free",
                    companyCount: 1,
                    compatiblePlanIds: ["compatible_plan_ids"],
                    controlledBy: "schematic",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    customPlanConfig: {
                        ctaText: "cta_text",
                        ctaWebSite: "cta_web_site",
                        priceText: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            featureId: "feature_id",
                            id: "id",
                            planId: "plan_id",
                            ruleId: "rule_id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            valueType: "boolean",
                        },
                    ],
                    features: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            featureType: "boolean",
                            flags: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [
                                                {
                                                    conditions: [
                                                        {
                                                            conditionType: "condition_type",
                                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                            environmentId: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resourceIds: ["resource_ids"],
                                                            resources: [
                                                                {
                                                                    id: "id",
                                                                    name: "name",
                                                                },
                                                            ],
                                                            ruleId: "rule_id",
                                                            traitValue: "trait_value",
                                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        },
                                                    ],
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    ruleId: "rule_id",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    conditionType: "condition_type",
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resourceIds: ["resource_ids"],
                                                    resources: [
                                                        {
                                                            id: "id",
                                                            name: "name",
                                                        },
                                                    ],
                                                    ruleId: "rule_id",
                                                    traitValue: "trait_value",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [
                                {
                                    id: "id",
                                    name: "name",
                                },
                            ],
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    includedCreditGrants: [
                        {
                            autoTopupEnabled: true,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            creditAmount: 1,
                            creditId: "credit_id",
                            creditName: "credit_name",
                            id: "id",
                            planId: "plan_id",
                            planName: "plan_name",
                            resetCadence: "daily",
                            resetStart: "billing_period",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    isCustom: true,
                    isDefault: true,
                    isFree: true,
                    isTrialable: true,
                    monthlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    oneTimePrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    planType: "plan",
                    trialDays: 1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    yearlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                fallbackPlan: {
                    billingProduct: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                externalPriceId: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        productId: "product_id",
                        quantity: 1.1,
                        subscriptionCount: 1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    chargeType: "free",
                    companyCount: 1,
                    compatiblePlanIds: ["compatible_plan_ids"],
                    controlledBy: "schematic",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    customPlanConfig: {
                        ctaText: "cta_text",
                        ctaWebSite: "cta_web_site",
                        priceText: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            featureId: "feature_id",
                            id: "id",
                            planId: "plan_id",
                            ruleId: "rule_id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            valueType: "boolean",
                        },
                    ],
                    features: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            featureType: "boolean",
                            flags: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [
                                                {
                                                    conditions: [
                                                        {
                                                            conditionType: "condition_type",
                                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                            environmentId: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resourceIds: ["resource_ids"],
                                                            resources: [
                                                                {
                                                                    id: "id",
                                                                    name: "name",
                                                                },
                                                            ],
                                                            ruleId: "rule_id",
                                                            traitValue: "trait_value",
                                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        },
                                                    ],
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    ruleId: "rule_id",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    conditionType: "condition_type",
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resourceIds: ["resource_ids"],
                                                    resources: [
                                                        {
                                                            id: "id",
                                                            name: "name",
                                                        },
                                                    ],
                                                    ruleId: "rule_id",
                                                    traitValue: "trait_value",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [
                                {
                                    id: "id",
                                    name: "name",
                                },
                            ],
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    includedCreditGrants: [
                        {
                            autoTopupEnabled: true,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            creditAmount: 1,
                            creditId: "credit_id",
                            creditName: "credit_name",
                            id: "id",
                            planId: "plan_id",
                            planName: "plan_name",
                            resetCadence: "daily",
                            resetStart: "billing_period",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    isCustom: true,
                    isDefault: true,
                    isFree: true,
                    isTrialable: true,
                    monthlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    oneTimePrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    planType: "plan",
                    trialDays: 1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    yearlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                fallbackPlanId: "fallback_plan_id",
                id: "id",
                initialPlan: {
                    billingProduct: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                externalPriceId: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        productId: "product_id",
                        quantity: 1.1,
                        subscriptionCount: 1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    chargeType: "free",
                    companyCount: 1,
                    compatiblePlanIds: ["compatible_plan_ids"],
                    controlledBy: "schematic",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    customPlanConfig: {
                        ctaText: "cta_text",
                        ctaWebSite: "cta_web_site",
                        priceText: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            featureId: "feature_id",
                            id: "id",
                            planId: "plan_id",
                            ruleId: "rule_id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            valueType: "boolean",
                        },
                    ],
                    features: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            featureType: "boolean",
                            flags: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [
                                                {
                                                    conditions: [
                                                        {
                                                            conditionType: "condition_type",
                                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                            environmentId: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resourceIds: ["resource_ids"],
                                                            resources: [
                                                                {
                                                                    id: "id",
                                                                    name: "name",
                                                                },
                                                            ],
                                                            ruleId: "rule_id",
                                                            traitValue: "trait_value",
                                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        },
                                                    ],
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    ruleId: "rule_id",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    conditionType: "condition_type",
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resourceIds: ["resource_ids"],
                                                    resources: [
                                                        {
                                                            id: "id",
                                                            name: "name",
                                                        },
                                                    ],
                                                    ruleId: "rule_id",
                                                    traitValue: "trait_value",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [
                                {
                                    id: "id",
                                    name: "name",
                                },
                            ],
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    includedCreditGrants: [
                        {
                            autoTopupEnabled: true,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            creditAmount: 1,
                            creditId: "credit_id",
                            creditName: "credit_name",
                            id: "id",
                            planId: "plan_id",
                            planName: "plan_name",
                            resetCadence: "daily",
                            resetStart: "billing_period",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    isCustom: true,
                    isDefault: true,
                    isFree: true,
                    isTrialable: true,
                    monthlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    oneTimePrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    planType: "plan",
                    trialDays: 1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    yearlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                initialPlanId: "initial_plan_id",
                initialPlanPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                initialPlanPriceId: "initial_plan_price_id",
                orderedAddOnList: [
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlanList: [
                    {
                        planId: "plan_id",
                    },
                ],
                plans: [
                    {
                        chargeType: "free",
                        companyCount: 1,
                        compatiblePlanIds: ["compatible_plan_ids"],
                        controlledBy: "schematic",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        entitlements: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                featureId: "feature_id",
                                id: "id",
                                planId: "plan_id",
                                ruleId: "rule_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                valueType: "boolean",
                            },
                        ],
                        features: [
                            {
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                description: "description",
                                featureType: "boolean",
                                flags: [
                                    {
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        defaultValue: true,
                                        description: "description",
                                        flagType: "boolean",
                                        id: "id",
                                        key: "key",
                                        name: "name",
                                        rules: [
                                            {
                                                conditionGroups: [
                                                    {
                                                        conditions: [
                                                            {
                                                                conditionType: "condition_type",
                                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                                environmentId: "environment_id",
                                                                id: "id",
                                                                operator: "operator",
                                                                resourceIds: ["resource_ids"],
                                                                resources: [
                                                                    {
                                                                        id: "id",
                                                                        name: "name",
                                                                    },
                                                                ],
                                                                ruleId: "rule_id",
                                                                traitValue: "trait_value",
                                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                            },
                                                        ],
                                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        environmentId: "environment_id",
                                                        id: "id",
                                                        ruleId: "rule_id",
                                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    },
                                                ],
                                                conditions: [
                                                    {
                                                        conditionType: "condition_type",
                                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        environmentId: "environment_id",
                                                        id: "id",
                                                        operator: "operator",
                                                        resourceIds: ["resource_ids"],
                                                        resources: [
                                                            {
                                                                id: "id",
                                                                name: "name",
                                                            },
                                                        ],
                                                        ruleId: "rule_id",
                                                        traitValue: "trait_value",
                                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    },
                                                ],
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                name: "name",
                                                priority: 1,
                                                ruleType: "rule_type",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                value: true,
                                            },
                                        ],
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                icon: "icon",
                                id: "id",
                                name: "name",
                                plans: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        icon: "icon",
                        id: "id",
                        isCustom: true,
                        isDefault: true,
                        isFree: true,
                        isTrialable: true,
                        name: "name",
                        planType: "plan",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                preventSelfServiceDowngradeButtonText: "prevent_self_service_downgrade_button_text",
                preventSelfServiceDowngradeUrl: "prevent_self_service_downgrade_url",
                prorationBehavior: "proration_behavior",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
                taxCollectionEnabled: true,
                trialDays: 1,
                trialExpiryPlan: {
                    billingProduct: {
                        accountId: "account_id",
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        externalId: "external_id",
                        isActive: true,
                        name: "name",
                        price: 1.1,
                        prices: [
                            {
                                currency: "currency",
                                externalPriceId: "external_price_id",
                                id: "id",
                                interval: "day",
                                price: 1,
                                scheme: "per_unit",
                            },
                        ],
                        productId: "product_id",
                        quantity: 1.1,
                        subscriptionCount: 1,
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    chargeType: "free",
                    companyCount: 1,
                    compatiblePlanIds: ["compatible_plan_ids"],
                    controlledBy: "schematic",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    customPlanConfig: {
                        ctaText: "cta_text",
                        ctaWebSite: "cta_web_site",
                        priceText: "price_text",
                    },
                    description: "description",
                    entitlements: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            featureId: "feature_id",
                            id: "id",
                            planId: "plan_id",
                            ruleId: "rule_id",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            valueType: "boolean",
                        },
                    ],
                    features: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            description: "description",
                            featureType: "boolean",
                            flags: [
                                {
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    defaultValue: true,
                                    description: "description",
                                    flagType: "boolean",
                                    id: "id",
                                    key: "key",
                                    name: "name",
                                    rules: [
                                        {
                                            conditionGroups: [
                                                {
                                                    conditions: [
                                                        {
                                                            conditionType: "condition_type",
                                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                            environmentId: "environment_id",
                                                            id: "id",
                                                            operator: "operator",
                                                            resourceIds: ["resource_ids"],
                                                            resources: [
                                                                {
                                                                    id: "id",
                                                                    name: "name",
                                                                },
                                                            ],
                                                            ruleId: "rule_id",
                                                            traitValue: "trait_value",
                                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                        },
                                                    ],
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    ruleId: "rule_id",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            conditions: [
                                                {
                                                    conditionType: "condition_type",
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resourceIds: ["resource_ids"],
                                                    resources: [
                                                        {
                                                            id: "id",
                                                            name: "name",
                                                        },
                                                    ],
                                                    ruleId: "rule_id",
                                                    traitValue: "trait_value",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            name: "name",
                                            priority: 1,
                                            ruleType: "rule_type",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            value: true,
                                        },
                                    ],
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            icon: "icon",
                            id: "id",
                            name: "name",
                            plans: [
                                {
                                    id: "id",
                                    name: "name",
                                },
                            ],
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    includedCreditGrants: [
                        {
                            autoTopupEnabled: true,
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            creditAmount: 1,
                            creditId: "credit_id",
                            creditName: "credit_name",
                            id: "id",
                            planId: "plan_id",
                            planName: "plan_name",
                            resetCadence: "daily",
                            resetStart: "billing_period",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    isCustom: true,
                    isDefault: true,
                    isFree: true,
                    isTrialable: true,
                    monthlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    name: "name",
                    oneTimePrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                    planType: "plan",
                    trialDays: 1,
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    yearlyPrice: {
                        currency: "currency",
                        externalPriceId: "external_price_id",
                        id: "id",
                        interval: "day",
                        price: 1,
                        scheme: "per_unit",
                    },
                },
                trialExpiryPlanId: "trial_expiry_plan_id",
                trialExpiryPlanPrice: {
                    billingScheme: "per_unit",
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    currency: "currency",
                    id: "id",
                    interval: "day",
                    isActive: true,
                    meterEventName: "meter_event_name",
                    meterEventPayloadKey: "meter_event_payload_key",
                    meterId: "meter_id",
                    packageSize: 1,
                    price: 1,
                    priceDecimal: "price_decimal",
                    priceExternalId: "price_external_id",
                    priceId: "price_id",
                    priceTier: [{}],
                    productExternalId: "product_external_id",
                    productId: "product_id",
                    productName: "product_name",
                    tiersMode: "graduated",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    usageType: "licensed",
                },
                trialExpiryPlanPriceId: "trial_expiry_plan_price_id",
                trialPaymentMethodRequired: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("getPlanGroup (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-groups").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.plangroups.getPlanGroup();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getPlanGroup (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-groups").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.plangroups.getPlanGroup();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getPlanGroup (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-groups").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.plangroups.getPlanGroup();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getPlanGroup (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/plan-groups").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.plangroups.getPlanGroup();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createPlanGroup (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = {
            data: {
                add_on_compatibilities: [
                    { compatible_plan_ids: ["compatible_plan_ids"], source_plan_id: "source_plan_id" },
                ],
                add_on_ids: ["add_on_ids"],
                checkout_settings: { collect_address: true, collect_email: true, collect_phone: true },
                component_settings: {
                    show_as_monthly_prices: true,
                    show_credits: true,
                    show_period_toggle: true,
                    show_zero_price_as_free: true,
                },
                fallback_plan_id: "fallback_plan_id",
                id: "id",
                initial_plan_id: "initial_plan_id",
                initial_plan_price_id: "initial_plan_price_id",
                ordered_add_on_ids: [{ plan_id: "plan_id" }],
                plan_ids: [{ plan_id: "plan_id" }],
                prevent_downgrades_when_over_limit: true,
                prevent_self_service_downgrade: true,
                prevent_self_service_downgrade_button_text: "prevent_self_service_downgrade_button_text",
                prevent_self_service_downgrade_url: "prevent_self_service_downgrade_url",
                proration_behavior: "proration_behavior",
                show_as_monthly_prices: true,
                show_credits: true,
                show_period_toggle: true,
                show_zero_price_as_free: true,
                sync_customer_billing_details: true,
                tax_collection_enabled: true,
                trial_days: 1,
                trial_expiry_plan_id: "trial_expiry_plan_id",
                trial_expiry_plan_price_id: "trial_expiry_plan_price_id",
                trial_payment_method_required: true,
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/plan-groups")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.plangroups.createPlanGroup({
            addOnIds: ["add_on_ids"],
            checkoutCollectAddress: true,
            checkoutCollectEmail: true,
            checkoutCollectPhone: true,
            enableTaxCollection: true,
            orderedAddOns: [
                {
                    planId: "plan_id",
                },
            ],
            orderedBundleList: [
                {
                    bundleId: "bundleId",
                },
            ],
            orderedPlans: [
                {
                    planId: "plan_id",
                },
            ],
            preventDowngradesWhenOverLimit: true,
            preventSelfServiceDowngrade: true,
            prorationBehavior: "create_prorations",
            showAsMonthlyPrices: true,
            showCredits: true,
            showPeriodToggle: true,
            showZeroPriceAsFree: true,
            syncCustomerBillingDetails: true,
        });
        expect(response).toEqual({
            data: {
                addOnCompatibilities: [
                    {
                        compatiblePlanIds: ["compatible_plan_ids"],
                        sourcePlanId: "source_plan_id",
                    },
                ],
                addOnIds: ["add_on_ids"],
                checkoutSettings: {
                    collectAddress: true,
                    collectEmail: true,
                    collectPhone: true,
                },
                componentSettings: {
                    showAsMonthlyPrices: true,
                    showCredits: true,
                    showPeriodToggle: true,
                    showZeroPriceAsFree: true,
                },
                fallbackPlanId: "fallback_plan_id",
                id: "id",
                initialPlanId: "initial_plan_id",
                initialPlanPriceId: "initial_plan_price_id",
                orderedAddOnIds: [
                    {
                        planId: "plan_id",
                    },
                ],
                planIds: [
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                preventSelfServiceDowngradeButtonText: "prevent_self_service_downgrade_button_text",
                preventSelfServiceDowngradeUrl: "prevent_self_service_downgrade_url",
                prorationBehavior: "proration_behavior",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
                taxCollectionEnabled: true,
                trialDays: 1,
                trialExpiryPlanId: "trial_expiry_plan_id",
                trialExpiryPlanPriceId: "trial_expiry_plan_price_id",
                trialPaymentMethodRequired: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("createPlanGroup (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-groups")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.createPlanGroup({
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createPlanGroup (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-groups")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.createPlanGroup({
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createPlanGroup (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-groups")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.createPlanGroup({
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createPlanGroup (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-groups")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.createPlanGroup({
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createPlanGroup (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/plan-groups")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.createPlanGroup({
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updatePlanGroup (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = {
            data: {
                add_on_compatibilities: [
                    { compatible_plan_ids: ["compatible_plan_ids"], source_plan_id: "source_plan_id" },
                ],
                add_on_ids: ["add_on_ids"],
                checkout_settings: { collect_address: true, collect_email: true, collect_phone: true },
                component_settings: {
                    show_as_monthly_prices: true,
                    show_credits: true,
                    show_period_toggle: true,
                    show_zero_price_as_free: true,
                },
                fallback_plan_id: "fallback_plan_id",
                id: "id",
                initial_plan_id: "initial_plan_id",
                initial_plan_price_id: "initial_plan_price_id",
                ordered_add_on_ids: [{ plan_id: "plan_id" }],
                plan_ids: [{ plan_id: "plan_id" }],
                prevent_downgrades_when_over_limit: true,
                prevent_self_service_downgrade: true,
                prevent_self_service_downgrade_button_text: "prevent_self_service_downgrade_button_text",
                prevent_self_service_downgrade_url: "prevent_self_service_downgrade_url",
                proration_behavior: "proration_behavior",
                show_as_monthly_prices: true,
                show_credits: true,
                show_period_toggle: true,
                show_zero_price_as_free: true,
                sync_customer_billing_details: true,
                tax_collection_enabled: true,
                trial_days: 1,
                trial_expiry_plan_id: "trial_expiry_plan_id",
                trial_expiry_plan_price_id: "trial_expiry_plan_price_id",
                trial_payment_method_required: true,
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/plan-groups/plan_group_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.plangroups.updatePlanGroup("plan_group_id", {
            addOnIds: ["add_on_ids"],
            checkoutCollectAddress: true,
            checkoutCollectEmail: true,
            checkoutCollectPhone: true,
            enableTaxCollection: true,
            orderedAddOns: [
                {
                    planId: "plan_id",
                },
            ],
            orderedBundleList: [
                {
                    bundleId: "bundleId",
                },
            ],
            orderedPlans: [
                {
                    planId: "plan_id",
                },
            ],
            preventDowngradesWhenOverLimit: true,
            preventSelfServiceDowngrade: true,
            prorationBehavior: "create_prorations",
            showAsMonthlyPrices: true,
            showCredits: true,
            showPeriodToggle: true,
            showZeroPriceAsFree: true,
            syncCustomerBillingDetails: true,
        });
        expect(response).toEqual({
            data: {
                addOnCompatibilities: [
                    {
                        compatiblePlanIds: ["compatible_plan_ids"],
                        sourcePlanId: "source_plan_id",
                    },
                ],
                addOnIds: ["add_on_ids"],
                checkoutSettings: {
                    collectAddress: true,
                    collectEmail: true,
                    collectPhone: true,
                },
                componentSettings: {
                    showAsMonthlyPrices: true,
                    showCredits: true,
                    showPeriodToggle: true,
                    showZeroPriceAsFree: true,
                },
                fallbackPlanId: "fallback_plan_id",
                id: "id",
                initialPlanId: "initial_plan_id",
                initialPlanPriceId: "initial_plan_price_id",
                orderedAddOnIds: [
                    {
                        planId: "plan_id",
                    },
                ],
                planIds: [
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                preventSelfServiceDowngradeButtonText: "prevent_self_service_downgrade_button_text",
                preventSelfServiceDowngradeUrl: "prevent_self_service_downgrade_url",
                prorationBehavior: "proration_behavior",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
                taxCollectionEnabled: true,
                trialDays: 1,
                trialExpiryPlanId: "trial_expiry_plan_id",
                trialExpiryPlanPriceId: "trial_expiry_plan_price_id",
                trialPaymentMethodRequired: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("updatePlanGroup (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-groups/plan_group_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.updatePlanGroup("plan_group_id", {
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updatePlanGroup (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-groups/plan_group_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.updatePlanGroup("plan_group_id", {
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updatePlanGroup (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-groups/plan_group_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.updatePlanGroup("plan_group_id", {
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updatePlanGroup (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-groups/plan_group_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.updatePlanGroup("plan_group_id", {
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updatePlanGroup (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            add_on_ids: ["add_on_ids", "add_on_ids"],
            checkout_collect_address: true,
            checkout_collect_email: true,
            checkout_collect_phone: true,
            enable_tax_collection: true,
            ordered_add_ons: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            ordered_bundle_list: [{ bundleId: "bundleId" }, { bundleId: "bundleId" }],
            ordered_plans: [{ plan_id: "plan_id" }, { plan_id: "plan_id" }],
            prevent_downgrades_when_over_limit: true,
            prevent_self_service_downgrade: true,
            proration_behavior: "create_prorations",
            show_as_monthly_prices: true,
            show_credits: true,
            show_period_toggle: true,
            show_zero_price_as_free: true,
            sync_customer_billing_details: true,
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/plan-groups/plan_group_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.plangroups.updatePlanGroup("plan_group_id", {
                addOnIds: ["add_on_ids", "add_on_ids"],
                checkoutCollectAddress: true,
                checkoutCollectEmail: true,
                checkoutCollectPhone: true,
                enableTaxCollection: true,
                orderedAddOns: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                orderedBundleList: [
                    {
                        bundleId: "bundleId",
                    },
                    {
                        bundleId: "bundleId",
                    },
                ],
                orderedPlans: [
                    {
                        planId: "plan_id",
                    },
                    {
                        planId: "plan_id",
                    },
                ],
                preventDowngradesWhenOverLimit: true,
                preventSelfServiceDowngrade: true,
                prorationBehavior: "create_prorations",
                showAsMonthlyPrices: true,
                showCredits: true,
                showPeriodToggle: true,
                showZeroPriceAsFree: true,
                syncCustomerBillingDetails: true,
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });
});
