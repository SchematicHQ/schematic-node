// This file was auto-generated by Fern from our API Definition.

import * as Schematic from "../../src/api/index";
import { SchematicClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("FeaturesClient", () => {
    test("listFeatures (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    event_summary: {
                        company_count: 1,
                        environment_id: "environment_id",
                        event_count: 1,
                        event_subtype: "event_subtype",
                        user_count: 1,
                    },
                    feature_type: "boolean",
                    flags: [
                        {
                            created_at: "2024-01-15T09:30:00Z",
                            default_value: true,
                            description: "description",
                            flag_type: "boolean",
                            id: "id",
                            key: "key",
                            name: "name",
                            rules: [
                                {
                                    condition_groups: [
                                        {
                                            conditions: [
                                                {
                                                    condition_type: "condition_type",
                                                    created_at: "2024-01-15T09:30:00Z",
                                                    environment_id: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resource_ids: ["resource_ids"],
                                                    resources: [{ id: "id", name: "name" }],
                                                    rule_id: "rule_id",
                                                    trait_value: "trait_value",
                                                    updated_at: "2024-01-15T09:30:00Z",
                                                },
                                            ],
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            rule_id: "rule_id",
                                            updated_at: "2024-01-15T09:30:00Z",
                                        },
                                    ],
                                    conditions: [
                                        {
                                            condition_type: "condition_type",
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resource_ids: ["resource_ids"],
                                            resources: [{ id: "id", name: "name" }],
                                            rule_id: "rule_id",
                                            trait_value: "trait_value",
                                            updated_at: "2024-01-15T09:30:00Z",
                                        },
                                    ],
                                    created_at: "2024-01-15T09:30:00Z",
                                    environment_id: "environment_id",
                                    id: "id",
                                    name: "name",
                                    priority: 1,
                                    rule_type: "rule_type",
                                    updated_at: "2024-01-15T09:30:00Z",
                                    value: true,
                                },
                            ],
                            updated_at: "2024-01-15T09:30:00Z",
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plans: [{ id: "id", name: "name" }],
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait: {
                        created_at: "2024-01-15T09:30:00Z",
                        display_name: "display_name",
                        entity_type: "company",
                        hierarchy: ["hierarchy"],
                        id: "id",
                        trait_type: "boolean",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: {
                boolean_require_event: true,
                feature_type: ["boolean"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                without_company_override_for: "without_company_override_for",
                without_plan_entitlement_for: "without_plan_entitlement_for",
            },
        };
        server.mockEndpoint().get("/features").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.features.listFeatures({
            q: "q",
            withoutCompanyOverrideFor: "without_company_override_for",
            withoutPlanEntitlementFor: "without_plan_entitlement_for",
            booleanRequireEvent: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    eventSummary: {
                        companyCount: 1,
                        environmentId: "environment_id",
                        eventCount: 1,
                        eventSubtype: "event_subtype",
                        userCount: 1,
                    },
                    featureType: "boolean",
                    flags: [
                        {
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            defaultValue: true,
                            description: "description",
                            flagType: "boolean",
                            id: "id",
                            key: "key",
                            name: "name",
                            rules: [
                                {
                                    conditionGroups: [
                                        {
                                            conditions: [
                                                {
                                                    conditionType: "condition_type",
                                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                    environmentId: "environment_id",
                                                    id: "id",
                                                    operator: "operator",
                                                    resourceIds: ["resource_ids"],
                                                    resources: [
                                                        {
                                                            id: "id",
                                                            name: "name",
                                                        },
                                                    ],
                                                    ruleId: "rule_id",
                                                    traitValue: "trait_value",
                                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                                },
                                            ],
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            ruleId: "rule_id",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        },
                                    ],
                                    conditions: [
                                        {
                                            conditionType: "condition_type",
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resourceIds: ["resource_ids"],
                                            resources: [
                                                {
                                                    id: "id",
                                                    name: "name",
                                                },
                                            ],
                                            ruleId: "rule_id",
                                            traitValue: "trait_value",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        },
                                    ],
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    environmentId: "environment_id",
                                    id: "id",
                                    name: "name",
                                    priority: 1,
                                    ruleType: "rule_type",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    value: true,
                                },
                            ],
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        },
                    ],
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    plans: [
                        {
                            id: "id",
                            name: "name",
                        },
                    ],
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    trait: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        displayName: "display_name",
                        entityType: "company",
                        hierarchy: ["hierarchy"],
                        id: "id",
                        traitType: "boolean",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
            ],
            params: {
                booleanRequireEvent: true,
                featureType: ["boolean"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                withoutCompanyOverrideFor: "without_company_override_for",
                withoutPlanEntitlementFor: "without_plan_entitlement_for",
            },
        });
    });

    test("listFeatures (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFeatures();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listFeatures (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFeatures();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listFeatures (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFeatures();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listFeatures (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFeatures();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listFeatures (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFeatures();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createFeature (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { description: "description", feature_type: "boolean", name: "name" };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                description: "description",
                event_subtype: "event_subtype",
                event_summary: {
                    company_count: 1,
                    environment_id: "environment_id",
                    event_count: 1,
                    event_subtype: "event_subtype",
                    last_seen_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
                feature_type: "boolean",
                flags: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        default_value: true,
                        description: "description",
                        flag_type: "boolean",
                        id: "id",
                        key: "key",
                        name: "name",
                        rules: [
                            {
                                condition_groups: [
                                    {
                                        conditions: [
                                            {
                                                condition_type: "condition_type",
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resource_ids: ["resource_ids"],
                                                resources: [{ id: "id", name: "name" }],
                                                rule_id: "rule_id",
                                                trait_value: "trait_value",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        rule_id: "rule_id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                conditions: [
                                    {
                                        condition_type: "condition_type",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        resources: [{ id: "id", name: "name" }],
                                        rule_id: "rule_id",
                                        trait_value: "trait_value",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                rule_type: "rule_type",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: true,
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                icon: "icon",
                id: "id",
                lifecycle_phase: "add_on",
                maintainer_id: "maintainer_id",
                name: "name",
                plans: [{ id: "id", name: "name" }],
                plural_name: "plural_name",
                singular_name: "singular_name",
                trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                trait_id: "trait_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/features")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.createFeature({
            description: "description",
            featureType: "boolean",
            name: "name",
        });
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                description: "description",
                eventSubtype: "event_subtype",
                eventSummary: {
                    companyCount: 1,
                    environmentId: "environment_id",
                    eventCount: 1,
                    eventSubtype: "event_subtype",
                    lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                    userCount: 1,
                },
                featureType: "boolean",
                flags: [
                    {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        defaultValue: true,
                        description: "description",
                        flagType: "boolean",
                        id: "id",
                        key: "key",
                        name: "name",
                        rules: [
                            {
                                conditionGroups: [
                                    {
                                        conditions: [
                                            {
                                                conditionType: "condition_type",
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resourceIds: ["resource_ids"],
                                                resources: [
                                                    {
                                                        id: "id",
                                                        name: "name",
                                                    },
                                                ],
                                                ruleId: "rule_id",
                                                traitValue: "trait_value",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        ruleId: "rule_id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                conditions: [
                                    {
                                        conditionType: "condition_type",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resourceIds: ["resource_ids"],
                                        resources: [
                                            {
                                                id: "id",
                                                name: "name",
                                            },
                                        ],
                                        ruleId: "rule_id",
                                        traitValue: "trait_value",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                ruleType: "rule_type",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: true,
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                icon: "icon",
                id: "id",
                lifecyclePhase: "add_on",
                maintainerId: "maintainer_id",
                name: "name",
                plans: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                pluralName: "plural_name",
                singularName: "singular_name",
                trait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                traitId: "trait_id",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
            },
            params: {
                key: "value",
            },
        });
    });

    test("createFeature (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { description: "description", feature_type: "boolean", name: "name" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/features")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFeature({
                description: "description",
                featureType: "boolean",
                name: "name",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createFeature (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { description: "description", feature_type: "boolean", name: "name" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/features")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFeature({
                description: "description",
                featureType: "boolean",
                name: "name",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createFeature (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { description: "description", feature_type: "boolean", name: "name" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/features")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFeature({
                description: "description",
                featureType: "boolean",
                name: "name",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createFeature (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { description: "description", feature_type: "boolean", name: "name" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/features")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFeature({
                description: "description",
                featureType: "boolean",
                name: "name",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createFeature (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { description: "description", feature_type: "boolean", name: "name" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/features")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFeature({
                description: "description",
                featureType: "boolean",
                name: "name",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getFeature (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                description: "description",
                event_subtype: "event_subtype",
                event_summary: {
                    company_count: 1,
                    environment_id: "environment_id",
                    event_count: 1,
                    event_subtype: "event_subtype",
                    last_seen_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
                feature_type: "boolean",
                flags: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        default_value: true,
                        description: "description",
                        flag_type: "boolean",
                        id: "id",
                        key: "key",
                        name: "name",
                        rules: [
                            {
                                condition_groups: [
                                    {
                                        conditions: [
                                            {
                                                condition_type: "condition_type",
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resource_ids: ["resource_ids"],
                                                resources: [{ id: "id", name: "name" }],
                                                rule_id: "rule_id",
                                                trait_value: "trait_value",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        rule_id: "rule_id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                conditions: [
                                    {
                                        condition_type: "condition_type",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        resources: [{ id: "id", name: "name" }],
                                        rule_id: "rule_id",
                                        trait_value: "trait_value",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                rule_type: "rule_type",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: true,
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                icon: "icon",
                id: "id",
                lifecycle_phase: "add_on",
                maintainer_id: "maintainer_id",
                name: "name",
                plans: [{ id: "id", name: "name" }],
                plural_name: "plural_name",
                singular_name: "singular_name",
                trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                trait_id: "trait_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/features/feature_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.getFeature("feature_id");
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                description: "description",
                eventSubtype: "event_subtype",
                eventSummary: {
                    companyCount: 1,
                    environmentId: "environment_id",
                    eventCount: 1,
                    eventSubtype: "event_subtype",
                    lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                    userCount: 1,
                },
                featureType: "boolean",
                flags: [
                    {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        defaultValue: true,
                        description: "description",
                        flagType: "boolean",
                        id: "id",
                        key: "key",
                        name: "name",
                        rules: [
                            {
                                conditionGroups: [
                                    {
                                        conditions: [
                                            {
                                                conditionType: "condition_type",
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resourceIds: ["resource_ids"],
                                                resources: [
                                                    {
                                                        id: "id",
                                                        name: "name",
                                                    },
                                                ],
                                                ruleId: "rule_id",
                                                traitValue: "trait_value",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        ruleId: "rule_id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                conditions: [
                                    {
                                        conditionType: "condition_type",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resourceIds: ["resource_ids"],
                                        resources: [
                                            {
                                                id: "id",
                                                name: "name",
                                            },
                                        ],
                                        ruleId: "rule_id",
                                        traitValue: "trait_value",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                ruleType: "rule_type",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: true,
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                icon: "icon",
                id: "id",
                lifecyclePhase: "add_on",
                maintainerId: "maintainer_id",
                name: "name",
                plans: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                pluralName: "plural_name",
                singularName: "singular_name",
                trait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                traitId: "trait_id",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
            },
            params: {
                key: "value",
            },
        });
    });

    test("getFeature (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/features/feature_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.getFeature("feature_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getFeature (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/features/feature_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.getFeature("feature_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getFeature (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/features/feature_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.getFeature("feature_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getFeature (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/features/feature_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.getFeature("feature_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updateFeature (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                description: "description",
                event_subtype: "event_subtype",
                event_summary: {
                    company_count: 1,
                    environment_id: "environment_id",
                    event_count: 1,
                    event_subtype: "event_subtype",
                    last_seen_at: "2024-01-15T09:30:00Z",
                    user_count: 1,
                },
                feature_type: "boolean",
                flags: [
                    {
                        created_at: "2024-01-15T09:30:00Z",
                        default_value: true,
                        description: "description",
                        flag_type: "boolean",
                        id: "id",
                        key: "key",
                        name: "name",
                        rules: [
                            {
                                condition_groups: [
                                    {
                                        conditions: [
                                            {
                                                condition_type: "condition_type",
                                                created_at: "2024-01-15T09:30:00Z",
                                                environment_id: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resource_ids: ["resource_ids"],
                                                resources: [{ id: "id", name: "name" }],
                                                rule_id: "rule_id",
                                                trait_value: "trait_value",
                                                updated_at: "2024-01-15T09:30:00Z",
                                            },
                                        ],
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        rule_id: "rule_id",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                conditions: [
                                    {
                                        condition_type: "condition_type",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        resources: [{ id: "id", name: "name" }],
                                        rule_id: "rule_id",
                                        trait_value: "trait_value",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                rule_type: "rule_type",
                                updated_at: "2024-01-15T09:30:00Z",
                                value: true,
                            },
                        ],
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                ],
                icon: "icon",
                id: "id",
                lifecycle_phase: "add_on",
                maintainer_id: "maintainer_id",
                name: "name",
                plans: [{ id: "id", name: "name" }],
                plural_name: "plural_name",
                singular_name: "singular_name",
                trait: {
                    created_at: "2024-01-15T09:30:00Z",
                    display_name: "display_name",
                    entity_type: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    trait_type: "boolean",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                trait_id: "trait_id",
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/features/feature_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.updateFeature("feature_id");
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                description: "description",
                eventSubtype: "event_subtype",
                eventSummary: {
                    companyCount: 1,
                    environmentId: "environment_id",
                    eventCount: 1,
                    eventSubtype: "event_subtype",
                    lastSeenAt: new Date("2024-01-15T09:30:00.000Z"),
                    userCount: 1,
                },
                featureType: "boolean",
                flags: [
                    {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        defaultValue: true,
                        description: "description",
                        flagType: "boolean",
                        id: "id",
                        key: "key",
                        name: "name",
                        rules: [
                            {
                                conditionGroups: [
                                    {
                                        conditions: [
                                            {
                                                conditionType: "condition_type",
                                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                                environmentId: "environment_id",
                                                id: "id",
                                                operator: "operator",
                                                resourceIds: ["resource_ids"],
                                                resources: [
                                                    {
                                                        id: "id",
                                                        name: "name",
                                                    },
                                                ],
                                                ruleId: "rule_id",
                                                traitValue: "trait_value",
                                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                            },
                                        ],
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        ruleId: "rule_id",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                conditions: [
                                    {
                                        conditionType: "condition_type",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resourceIds: ["resource_ids"],
                                        resources: [
                                            {
                                                id: "id",
                                                name: "name",
                                            },
                                        ],
                                        ruleId: "rule_id",
                                        traitValue: "trait_value",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                name: "name",
                                priority: 1,
                                ruleType: "rule_type",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                value: true,
                            },
                        ],
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                ],
                icon: "icon",
                id: "id",
                lifecyclePhase: "add_on",
                maintainerId: "maintainer_id",
                name: "name",
                plans: [
                    {
                        id: "id",
                        name: "name",
                    },
                ],
                pluralName: "plural_name",
                singularName: "singular_name",
                trait: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    displayName: "display_name",
                    entityType: "company",
                    hierarchy: ["hierarchy"],
                    id: "id",
                    traitType: "boolean",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                traitId: "trait_id",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
            },
            params: {
                key: "value",
            },
        });
    });

    test("updateFeature (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/features/feature_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFeature("feature_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updateFeature (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/features/feature_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFeature("feature_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updateFeature (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/features/feature_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFeature("feature_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updateFeature (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/features/feature_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFeature("feature_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updateFeature (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/features/feature_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFeature("feature_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteFeature (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server
            .mockEndpoint()
            .delete("/features/feature_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.deleteFeature("feature_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteFeature (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/features/feature_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.deleteFeature("feature_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteFeature (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/features/feature_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.deleteFeature("feature_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteFeature (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/features/feature_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.deleteFeature("feature_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteFeature (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/features/feature_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.deleteFeature("feature_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteFeature (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/features/feature_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.deleteFeature("feature_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countFeatures (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: {
                boolean_require_event: true,
                feature_type: ["boolean"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                without_company_override_for: "without_company_override_for",
                without_plan_entitlement_for: "without_plan_entitlement_for",
            },
        };
        server.mockEndpoint().get("/features/count").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.features.countFeatures({
            q: "q",
            withoutCompanyOverrideFor: "without_company_override_for",
            withoutPlanEntitlementFor: "without_plan_entitlement_for",
            booleanRequireEvent: true,
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                booleanRequireEvent: true,
                featureType: ["boolean"],
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                withoutCompanyOverrideFor: "without_company_override_for",
                withoutPlanEntitlementFor: "without_plan_entitlement_for",
            },
        });
    });

    test("countFeatures (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features/count").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFeatures();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countFeatures (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features/count").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFeatures();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countFeatures (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features/count").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFeatures();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countFeatures (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features/count").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFeatures();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countFeatures (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/features/count").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFeatures();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listFlags (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    default_value: true,
                    description: "description",
                    feature: {
                        created_at: "2024-01-15T09:30:00Z",
                        description: "description",
                        feature_type: "boolean",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        updated_at: "2024-01-15T09:30:00Z",
                    },
                    feature_id: "feature_id",
                    flag_type: "boolean",
                    id: "id",
                    key: "key",
                    last_checked_at: "2024-01-15T09:30:00Z",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    rules: [
                        {
                            condition_groups: [
                                {
                                    conditions: [
                                        {
                                            condition_type: "condition_type",
                                            created_at: "2024-01-15T09:30:00Z",
                                            environment_id: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resource_ids: ["resource_ids"],
                                            resources: [{ id: "id", name: "name" }],
                                            rule_id: "rule_id",
                                            trait_value: "trait_value",
                                            updated_at: "2024-01-15T09:30:00Z",
                                        },
                                    ],
                                    created_at: "2024-01-15T09:30:00Z",
                                    environment_id: "environment_id",
                                    id: "id",
                                    rule_id: "rule_id",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            conditions: [
                                {
                                    condition_type: "condition_type",
                                    created_at: "2024-01-15T09:30:00Z",
                                    environment_id: "environment_id",
                                    id: "id",
                                    operator: "operator",
                                    resource_ids: ["resource_ids"],
                                    resources: [{ id: "id", name: "name" }],
                                    rule_id: "rule_id",
                                    trait_value: "trait_value",
                                    updated_at: "2024-01-15T09:30:00Z",
                                },
                            ],
                            created_at: "2024-01-15T09:30:00Z",
                            environment_id: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            rule_type: "rule_type",
                            updated_at: "2024-01-15T09:30:00Z",
                            value: true,
                        },
                    ],
                    updated_at: "2024-01-15T09:30:00Z",
                },
            ],
            params: { feature_id: "feature_id", ids: ["ids"], limit: 1, offset: 1, q: "q" },
        };
        server.mockEndpoint().get("/flags").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.features.listFlags({
            featureId: "feature_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultValue: true,
                    description: "description",
                    feature: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        description: "description",
                        featureType: "boolean",
                        icon: "icon",
                        id: "id",
                        name: "name",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    },
                    featureId: "feature_id",
                    flagType: "boolean",
                    id: "id",
                    key: "key",
                    lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                    maintainerId: "maintainer_id",
                    name: "name",
                    rules: [
                        {
                            conditionGroups: [
                                {
                                    conditions: [
                                        {
                                            conditionType: "condition_type",
                                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                            environmentId: "environment_id",
                                            id: "id",
                                            operator: "operator",
                                            resourceIds: ["resource_ids"],
                                            resources: [
                                                {
                                                    id: "id",
                                                    name: "name",
                                                },
                                            ],
                                            ruleId: "rule_id",
                                            traitValue: "trait_value",
                                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                        },
                                    ],
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    environmentId: "environment_id",
                                    id: "id",
                                    ruleId: "rule_id",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            conditions: [
                                {
                                    conditionType: "condition_type",
                                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                    environmentId: "environment_id",
                                    id: "id",
                                    operator: "operator",
                                    resourceIds: ["resource_ids"],
                                    resources: [
                                        {
                                            id: "id",
                                            name: "name",
                                        },
                                    ],
                                    ruleId: "rule_id",
                                    traitValue: "trait_value",
                                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                },
                            ],
                            createdAt: new Date("2024-01-15T09:30:00.000Z"),
                            environmentId: "environment_id",
                            id: "id",
                            name: "name",
                            priority: 1,
                            ruleType: "rule_type",
                            updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            value: true,
                        },
                    ],
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
            ],
            params: {
                featureId: "feature_id",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("listFlags (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFlags();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listFlags (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFlags();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listFlags (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFlags();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listFlags (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFlags();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listFlags (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.listFlags();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createFlag (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                default_value: true,
                description: "description",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                flag_type: "boolean",
                id: "id",
                key: "key",
                last_checked_at: "2024-01-15T09:30:00Z",
                maintainer_id: "maintainer_id",
                name: "name",
                rules: [
                    {
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        condition_type: "condition_type",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        resources: [{ id: "id", name: "name" }],
                                        rule_id: "rule_id",
                                        trait_value: "trait_value",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                rule_id: "rule_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        conditions: [
                            {
                                condition_type: "condition_type",
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                resources: [{ id: "id", name: "name" }],
                                rule_id: "rule_id",
                                trait_value: "trait_value",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: true,
                    },
                ],
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/flags")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.createFlag({
            defaultValue: true,
            description: "description",
            flagType: "boolean",
            key: "key",
            name: "name",
        });
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                defaultValue: true,
                description: "description",
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                flagType: "boolean",
                id: "id",
                key: "key",
                lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                maintainerId: "maintainer_id",
                name: "name",
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "condition_type",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resourceIds: ["resource_ids"],
                                        resources: [
                                            {
                                                id: "id",
                                                name: "name",
                                            },
                                        ],
                                        ruleId: "rule_id",
                                        traitValue: "trait_value",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                ruleId: "rule_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "condition_type",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                operator: "operator",
                                resourceIds: ["resource_ids"],
                                resources: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                ruleId: "rule_id",
                                traitValue: "trait_value",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        ruleType: "rule_type",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        value: true,
                    },
                ],
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
            },
            params: {
                key: "value",
            },
        });
    });

    test("createFlag (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFlag({
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createFlag (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFlag({
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createFlag (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFlag({
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createFlag (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFlag({
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createFlag (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.createFlag({
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getFlag (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                default_value: true,
                description: "description",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                flag_type: "boolean",
                id: "id",
                key: "key",
                last_checked_at: "2024-01-15T09:30:00Z",
                maintainer_id: "maintainer_id",
                name: "name",
                rules: [
                    {
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        condition_type: "condition_type",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        resources: [{ id: "id", name: "name" }],
                                        rule_id: "rule_id",
                                        trait_value: "trait_value",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                rule_id: "rule_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        conditions: [
                            {
                                condition_type: "condition_type",
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                resources: [{ id: "id", name: "name" }],
                                rule_id: "rule_id",
                                trait_value: "trait_value",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: true,
                    },
                ],
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server.mockEndpoint().get("/flags/flag_id").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.features.getFlag("flag_id");
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                defaultValue: true,
                description: "description",
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                flagType: "boolean",
                id: "id",
                key: "key",
                lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                maintainerId: "maintainer_id",
                name: "name",
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "condition_type",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resourceIds: ["resource_ids"],
                                        resources: [
                                            {
                                                id: "id",
                                                name: "name",
                                            },
                                        ],
                                        ruleId: "rule_id",
                                        traitValue: "trait_value",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                ruleId: "rule_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "condition_type",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                operator: "operator",
                                resourceIds: ["resource_ids"],
                                resources: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                ruleId: "rule_id",
                                traitValue: "trait_value",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        ruleType: "rule_type",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        value: true,
                    },
                ],
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
            },
            params: {
                key: "value",
            },
        });
    });

    test("getFlag (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/flag_id").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.getFlag("flag_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getFlag (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/flag_id").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.getFlag("flag_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getFlag (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/flag_id").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.getFlag("flag_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getFlag (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/flag_id").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.getFlag("flag_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updateFlag (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                default_value: true,
                description: "description",
                feature: {
                    created_at: "2024-01-15T09:30:00Z",
                    description: "description",
                    event_subtype: "event_subtype",
                    feature_type: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecycle_phase: "add_on",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    plural_name: "plural_name",
                    singular_name: "singular_name",
                    trait_id: "trait_id",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                feature_id: "feature_id",
                flag_type: "boolean",
                id: "id",
                key: "key",
                last_checked_at: "2024-01-15T09:30:00Z",
                maintainer_id: "maintainer_id",
                name: "name",
                rules: [
                    {
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        condition_type: "condition_type",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        resources: [{ id: "id", name: "name" }],
                                        rule_id: "rule_id",
                                        trait_value: "trait_value",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                rule_id: "rule_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        conditions: [
                            {
                                condition_type: "condition_type",
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                resources: [{ id: "id", name: "name" }],
                                rule_id: "rule_id",
                                trait_value: "trait_value",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: true,
                    },
                ],
                updated_at: "2024-01-15T09:30:00Z",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/flags/flag_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.updateFlag("flag_id", {
            defaultValue: true,
            description: "description",
            flagType: "boolean",
            key: "key",
            name: "name",
        });
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                defaultValue: true,
                description: "description",
                feature: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    description: "description",
                    eventSubtype: "event_subtype",
                    featureType: "boolean",
                    icon: "icon",
                    id: "id",
                    lifecyclePhase: "add_on",
                    maintainerId: "maintainer_id",
                    name: "name",
                    pluralName: "plural_name",
                    singularName: "singular_name",
                    traitId: "trait_id",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                featureId: "feature_id",
                flagType: "boolean",
                id: "id",
                key: "key",
                lastCheckedAt: new Date("2024-01-15T09:30:00.000Z"),
                maintainerId: "maintainer_id",
                name: "name",
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "condition_type",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resourceIds: ["resource_ids"],
                                        resources: [
                                            {
                                                id: "id",
                                                name: "name",
                                            },
                                        ],
                                        ruleId: "rule_id",
                                        traitValue: "trait_value",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                ruleId: "rule_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "condition_type",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                operator: "operator",
                                resourceIds: ["resource_ids"],
                                resources: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                ruleId: "rule_id",
                                traitValue: "trait_value",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        ruleType: "rule_type",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        value: true,
                    },
                ],
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
            },
            params: {
                key: "value",
            },
        });
    });

    test("updateFlag (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlag("flag_id", {
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updateFlag (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlag("flag_id", {
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updateFlag (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlag("flag_id", {
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updateFlag (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlag("flag_id", {
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updateFlag (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            default_value: true,
            description: "description",
            flag_type: "boolean",
            key: "key",
            name: "name",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlag("flag_id", {
                defaultValue: true,
                description: "description",
                flagType: "boolean",
                key: "key",
                name: "name",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteFlag (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server.mockEndpoint().delete("/flags/flag_id").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.features.deleteFlag("flag_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteFlag (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/flags/flag_id").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.deleteFlag("flag_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteFlag (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/flags/flag_id").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.deleteFlag("flag_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteFlag (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/flags/flag_id").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.deleteFlag("flag_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteFlag (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/flags/flag_id").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.deleteFlag("flag_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteFlag (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().delete("/flags/flag_id").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.deleteFlag("flag_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updateFlagRules (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            rules: [
                {
                    condition_groups: [
                        { conditions: [{ condition_type: "company", operator: "eq", resource_ids: ["resource_ids"] }] },
                    ],
                    conditions: [{ condition_type: "company", operator: "eq", resource_ids: ["resource_ids"] }],
                    name: "name",
                    priority: 1,
                    value: true,
                },
            ],
        };
        const rawResponseBody = {
            data: {
                flag: {
                    created_at: "2024-01-15T09:30:00Z",
                    default_value: true,
                    description: "description",
                    feature_id: "feature_id",
                    flag_type: "boolean",
                    id: "id",
                    key: "key",
                    maintainer_id: "maintainer_id",
                    name: "name",
                    updated_at: "2024-01-15T09:30:00Z",
                },
                rules: [
                    {
                        condition_groups: [
                            {
                                conditions: [
                                    {
                                        condition_type: "condition_type",
                                        created_at: "2024-01-15T09:30:00Z",
                                        environment_id: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resource_ids: ["resource_ids"],
                                        resources: [{ id: "id", name: "name" }],
                                        rule_id: "rule_id",
                                        trait_value: "trait_value",
                                        updated_at: "2024-01-15T09:30:00Z",
                                    },
                                ],
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                rule_id: "rule_id",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        conditions: [
                            {
                                condition_type: "condition_type",
                                created_at: "2024-01-15T09:30:00Z",
                                environment_id: "environment_id",
                                id: "id",
                                operator: "operator",
                                resource_ids: ["resource_ids"],
                                resources: [{ id: "id", name: "name" }],
                                rule_id: "rule_id",
                                trait_value: "trait_value",
                                updated_at: "2024-01-15T09:30:00Z",
                            },
                        ],
                        created_at: "2024-01-15T09:30:00Z",
                        environment_id: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        rule_type: "rule_type",
                        updated_at: "2024-01-15T09:30:00Z",
                        value: true,
                    },
                ],
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/flags/flag_id/rules")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.updateFlagRules("flag_id", {
            rules: [
                {
                    conditionGroups: [
                        {
                            conditions: [
                                {
                                    conditionType: "company",
                                    operator: "eq",
                                    resourceIds: ["resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        {
                            conditionType: "company",
                            operator: "eq",
                            resourceIds: ["resource_ids"],
                        },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
            ],
        });
        expect(response).toEqual({
            data: {
                flag: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    defaultValue: true,
                    description: "description",
                    featureId: "feature_id",
                    flagType: "boolean",
                    id: "id",
                    key: "key",
                    maintainerId: "maintainer_id",
                    name: "name",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                },
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "condition_type",
                                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                        environmentId: "environment_id",
                                        id: "id",
                                        operator: "operator",
                                        resourceIds: ["resource_ids"],
                                        resources: [
                                            {
                                                id: "id",
                                                name: "name",
                                            },
                                        ],
                                        ruleId: "rule_id",
                                        traitValue: "trait_value",
                                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                                    },
                                ],
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                ruleId: "rule_id",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "condition_type",
                                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                                environmentId: "environment_id",
                                id: "id",
                                operator: "operator",
                                resourceIds: ["resource_ids"],
                                resources: [
                                    {
                                        id: "id",
                                        name: "name",
                                    },
                                ],
                                ruleId: "rule_id",
                                traitValue: "trait_value",
                                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                            },
                        ],
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        environmentId: "environment_id",
                        id: "id",
                        name: "name",
                        priority: 1,
                        ruleType: "rule_type",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        value: true,
                    },
                ],
            },
            params: {
                key: "value",
            },
        });
    });

    test("updateFlagRules (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            rules: [
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id/rules")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlagRules("flag_id", {
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                ],
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updateFlagRules (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            rules: [
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id/rules")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlagRules("flag_id", {
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                ],
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updateFlagRules (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            rules: [
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id/rules")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlagRules("flag_id", {
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                ],
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updateFlagRules (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            rules: [
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id/rules")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlagRules("flag_id", {
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                ],
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updateFlagRules (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            rules: [
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
                {
                    condition_groups: [
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                        {
                            conditions: [
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                                {
                                    condition_type: "company",
                                    operator: "eq",
                                    resource_ids: ["resource_ids", "resource_ids"],
                                },
                            ],
                        },
                    ],
                    conditions: [
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                        { condition_type: "company", operator: "eq", resource_ids: ["resource_ids", "resource_ids"] },
                    ],
                    name: "name",
                    priority: 1,
                    value: true,
                },
            ],
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/flags/flag_id/rules")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.updateFlagRules("flag_id", {
                rules: [
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                    {
                        conditionGroups: [
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                            {
                                conditions: [
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                    {
                                        conditionType: "company",
                                        operator: "eq",
                                        resourceIds: ["resource_ids", "resource_ids"],
                                    },
                                ],
                            },
                        ],
                        conditions: [
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                            {
                                conditionType: "company",
                                operator: "eq",
                                resourceIds: ["resource_ids", "resource_ids"],
                            },
                        ],
                        name: "name",
                        priority: 1,
                        value: true,
                    },
                ],
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("checkFlag (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = {
            data: {
                company_id: "company_id",
                error: "error",
                feature_allocation: 1,
                feature_usage: 1,
                feature_usage_event: "feature_usage_event",
                feature_usage_period: "feature_usage_period",
                feature_usage_reset_at: "2024-01-15T09:30:00Z",
                flag: "flag",
                flag_id: "flag_id",
                reason: "reason",
                rule_id: "rule_id",
                rule_type: "rule_type",
                user_id: "user_id",
                value: true,
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/flags/key/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.checkFlag("key", {});
        expect(response).toEqual({
            data: {
                companyId: "company_id",
                error: "error",
                featureAllocation: 1,
                featureUsage: 1,
                featureUsageEvent: "feature_usage_event",
                featureUsagePeriod: "feature_usage_period",
                featureUsageResetAt: new Date("2024-01-15T09:30:00.000Z"),
                flag: "flag",
                flagId: "flag_id",
                reason: "reason",
                ruleId: "rule_id",
                ruleType: "rule_type",
                userId: "user_id",
                value: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("checkFlag (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/key/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlag("key", {});
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("checkFlag (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/key/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlag("key", {});
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("checkFlag (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/key/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlag("key", {});
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("checkFlag (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/key/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlag("key", {});
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("checkFlag (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/key/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlag("key", {});
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("checkFlags (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = {
            data: { flags: [{ flag: "flag", reason: "reason", value: true }] },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/flags/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.checkFlags({});
        expect(response).toEqual({
            data: {
                flags: [
                    {
                        flag: "flag",
                        reason: "reason",
                        value: true,
                    },
                ],
            },
            params: {
                key: "value",
            },
        });
    });

    test("checkFlags (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlags({});
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("checkFlags (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlags({});
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("checkFlags (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlags({});
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("checkFlags (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlags({});
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("checkFlags (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlags({});
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("checkFlagsBulk (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { contexts: [{}] };
        const rawResponseBody = {
            data: { data: [{ flags: [{ flag: "flag", reason: "reason", value: true }] }] },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/flags/check-bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.features.checkFlagsBulk({
            contexts: [{}],
        });
        expect(response).toEqual({
            data: {
                data: [
                    {
                        flags: [
                            {
                                flag: "flag",
                                reason: "reason",
                                value: true,
                            },
                        ],
                    },
                ],
            },
            params: {
                key: "value",
            },
        });
    });

    test("checkFlagsBulk (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { contexts: [{}, {}] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check-bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlagsBulk({
                contexts: [{}, {}],
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("checkFlagsBulk (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { contexts: [{}, {}] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check-bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlagsBulk({
                contexts: [{}, {}],
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("checkFlagsBulk (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { contexts: [{}, {}] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check-bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlagsBulk({
                contexts: [{}, {}],
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("checkFlagsBulk (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { contexts: [{}, {}] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check-bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlagsBulk({
                contexts: [{}, {}],
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("checkFlagsBulk (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { contexts: [{}, {}] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/flags/check-bulk")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.features.checkFlagsBulk({
                contexts: [{}, {}],
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countFlags (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: { feature_id: "feature_id", ids: ["ids"], limit: 1, offset: 1, q: "q" },
        };
        server.mockEndpoint().get("/flags/count").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.features.countFlags({
            featureId: "feature_id",
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                featureId: "feature_id",
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("countFlags (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/count").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFlags();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countFlags (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/count").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFlags();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countFlags (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/count").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFlags();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countFlags (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/count").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFlags();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countFlags (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/flags/count").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.features.countFlags();
        }).rejects.toThrow(Schematic.InternalServerError);
    });
});
