// This file was auto-generated by Fern from our API Definition.

import * as Schematic from "../../src/api/index";
import { SchematicClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("WebhooksClient", () => {
    test("listWebhookEvents (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    id: "id",
                    payload: "payload",
                    request_type: "subscription.trial.ended",
                    response_code: 1,
                    sent_at: "2024-01-15T09:30:00Z",
                    status: "failure",
                    updated_at: "2024-01-15T09:30:00Z",
                    webhook: {
                        created_at: "2024-01-15T09:30:00Z",
                        id: "id",
                        name: "name",
                        request_types: ["subscription.trial.ended"],
                        secret: "secret",
                        status: "active",
                        updated_at: "2024-01-15T09:30:00Z",
                        url: "url",
                    },
                    webhook_id: "webhook_id",
                },
            ],
            params: { ids: ["ids"], limit: 1, offset: 1, q: "q", webhook_id: "webhook_id" },
        };
        server.mockEndpoint().get("/webhook-events").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.webhooks.listWebhookEvents({
            q: "q",
            webhookId: "webhook_id",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    id: "id",
                    payload: "payload",
                    requestType: "subscription.trial.ended",
                    responseCode: 1,
                    sentAt: new Date("2024-01-15T09:30:00.000Z"),
                    status: "failure",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    webhook: {
                        createdAt: new Date("2024-01-15T09:30:00.000Z"),
                        id: "id",
                        name: "name",
                        requestTypes: ["subscription.trial.ended"],
                        secret: "secret",
                        status: "active",
                        updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                        url: "url",
                    },
                    webhookId: "webhook_id",
                },
            ],
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                webhookId: "webhook_id",
            },
        });
    });

    test("listWebhookEvents (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhook-events").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhookEvents();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listWebhookEvents (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhook-events").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhookEvents();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listWebhookEvents (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhook-events").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhookEvents();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listWebhookEvents (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhook-events").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhookEvents();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listWebhookEvents (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhook-events").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhookEvents();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getWebhookEvent (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                id: "id",
                payload: "payload",
                request_type: "subscription.trial.ended",
                response_code: 1,
                sent_at: "2024-01-15T09:30:00Z",
                status: "failure",
                updated_at: "2024-01-15T09:30:00Z",
                webhook: {
                    created_at: "2024-01-15T09:30:00Z",
                    credit_trigger_configs: [{ credit_id: "credit_id" }],
                    entitlement_trigger_configs: [{ feature_id: "feature_id" }],
                    id: "id",
                    name: "name",
                    request_types: ["subscription.trial.ended"],
                    secret: "secret",
                    status: "active",
                    updated_at: "2024-01-15T09:30:00Z",
                    url: "url",
                },
                webhook_id: "webhook_id",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/webhook-events/webhook_event_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.webhooks.getWebhookEvent("webhook_event_id");
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                id: "id",
                payload: "payload",
                requestType: "subscription.trial.ended",
                responseCode: 1,
                sentAt: new Date("2024-01-15T09:30:00.000Z"),
                status: "failure",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                webhook: {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    creditTriggerConfigs: [
                        {
                            creditId: "credit_id",
                        },
                    ],
                    entitlementTriggerConfigs: [
                        {
                            featureId: "feature_id",
                        },
                    ],
                    id: "id",
                    name: "name",
                    requestTypes: ["subscription.trial.ended"],
                    secret: "secret",
                    status: "active",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    url: "url",
                },
                webhookId: "webhook_id",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getWebhookEvent (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/webhook_event_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhookEvent("webhook_event_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getWebhookEvent (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/webhook_event_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhookEvent("webhook_event_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getWebhookEvent (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/webhook_event_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhookEvent("webhook_event_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getWebhookEvent (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/webhook_event_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhookEvent("webhook_event_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countWebhookEvents (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: { count: 1 },
            params: { ids: ["ids"], limit: 1, offset: 1, q: "q", webhook_id: "webhook_id" },
        };
        server
            .mockEndpoint()
            .get("/webhook-events/count")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.webhooks.countWebhookEvents({
            q: "q",
            webhookId: "webhook_id",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                ids: ["ids"],
                limit: 1,
                offset: 1,
                q: "q",
                webhookId: "webhook_id",
            },
        });
    });

    test("countWebhookEvents (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/count")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.countWebhookEvents();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countWebhookEvents (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/count")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.countWebhookEvents();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countWebhookEvents (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/count")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.countWebhookEvents();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countWebhookEvents (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/count")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.countWebhookEvents();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countWebhookEvents (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhook-events/count")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.countWebhookEvents();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("listWebhooks (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    created_at: "2024-01-15T09:30:00Z",
                    credit_trigger_configs: [{ credit_id: "credit_id" }],
                    entitlement_trigger_configs: [{ feature_id: "feature_id" }],
                    id: "id",
                    name: "name",
                    request_types: ["subscription.trial.ended"],
                    secret: "secret",
                    status: "active",
                    updated_at: "2024-01-15T09:30:00Z",
                    url: "url",
                },
            ],
            params: { limit: 1, offset: 1, q: "q" },
        };
        server.mockEndpoint().get("/webhooks").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.webhooks.listWebhooks({
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: [
                {
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    creditTriggerConfigs: [
                        {
                            creditId: "credit_id",
                        },
                    ],
                    entitlementTriggerConfigs: [
                        {
                            featureId: "feature_id",
                        },
                    ],
                    id: "id",
                    name: "name",
                    requestTypes: ["subscription.trial.ended"],
                    secret: "secret",
                    status: "active",
                    updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                    url: "url",
                },
            ],
            params: {
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("listWebhooks (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhooks();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("listWebhooks (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhooks();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("listWebhooks (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhooks();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("listWebhooks (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhooks();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("listWebhooks (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.listWebhooks();
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("createWebhook (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { name: "name", request_types: ["subscription.trial.ended"], url: "url" };
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                credit_trigger_configs: [{ credit_id: "credit_id" }],
                entitlement_trigger_configs: [{ feature_id: "feature_id" }],
                id: "id",
                name: "name",
                request_types: ["subscription.trial.ended"],
                secret: "secret",
                status: "active",
                updated_at: "2024-01-15T09:30:00Z",
                url: "url",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .post("/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.webhooks.createWebhook({
            name: "name",
            requestTypes: ["subscription.trial.ended"],
            url: "url",
        });
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                creditTriggerConfigs: [
                    {
                        creditId: "credit_id",
                    },
                ],
                entitlementTriggerConfigs: [
                    {
                        featureId: "feature_id",
                    },
                ],
                id: "id",
                name: "name",
                requestTypes: ["subscription.trial.ended"],
                secret: "secret",
                status: "active",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                url: "url",
            },
            params: {
                key: "value",
            },
        });
    });

    test("createWebhook (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "name",
            request_types: ["subscription.trial.ended", "subscription.trial.ended"],
            url: "url",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.createWebhook({
                name: "name",
                requestTypes: ["subscription.trial.ended", "subscription.trial.ended"],
                url: "url",
            });
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("createWebhook (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "name",
            request_types: ["subscription.trial.ended", "subscription.trial.ended"],
            url: "url",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.createWebhook({
                name: "name",
                requestTypes: ["subscription.trial.ended", "subscription.trial.ended"],
                url: "url",
            });
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("createWebhook (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "name",
            request_types: ["subscription.trial.ended", "subscription.trial.ended"],
            url: "url",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.createWebhook({
                name: "name",
                requestTypes: ["subscription.trial.ended", "subscription.trial.ended"],
                url: "url",
            });
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("createWebhook (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "name",
            request_types: ["subscription.trial.ended", "subscription.trial.ended"],
            url: "url",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.createWebhook({
                name: "name",
                requestTypes: ["subscription.trial.ended", "subscription.trial.ended"],
                url: "url",
            });
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("createWebhook (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "name",
            request_types: ["subscription.trial.ended", "subscription.trial.ended"],
            url: "url",
        };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/webhooks")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.createWebhook({
                name: "name",
                requestTypes: ["subscription.trial.ended", "subscription.trial.ended"],
                url: "url",
            });
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("getWebhook (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                credit_trigger_configs: [{ credit_id: "credit_id" }],
                entitlement_trigger_configs: [{ feature_id: "feature_id" }],
                id: "id",
                name: "name",
                request_types: ["subscription.trial.ended"],
                secret: "secret",
                status: "active",
                updated_at: "2024-01-15T09:30:00Z",
                url: "url",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .get("/webhooks/webhook_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.webhooks.getWebhook("webhook_id");
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                creditTriggerConfigs: [
                    {
                        creditId: "credit_id",
                    },
                ],
                entitlementTriggerConfigs: [
                    {
                        featureId: "feature_id",
                    },
                ],
                id: "id",
                name: "name",
                requestTypes: ["subscription.trial.ended"],
                secret: "secret",
                status: "active",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                url: "url",
            },
            params: {
                key: "value",
            },
        });
    });

    test("getWebhook (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhooks/webhook_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhook("webhook_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("getWebhook (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhooks/webhook_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhook("webhook_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("getWebhook (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhooks/webhook_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhook("webhook_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("getWebhook (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .get("/webhooks/webhook_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.getWebhook("webhook_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("updateWebhook (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = {
            data: {
                created_at: "2024-01-15T09:30:00Z",
                credit_trigger_configs: [{ credit_id: "credit_id" }],
                entitlement_trigger_configs: [{ feature_id: "feature_id" }],
                id: "id",
                name: "name",
                request_types: ["subscription.trial.ended"],
                secret: "secret",
                status: "active",
                updated_at: "2024-01-15T09:30:00Z",
                url: "url",
            },
            params: { key: "value" },
        };
        server
            .mockEndpoint()
            .put("/webhooks/webhook_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.webhooks.updateWebhook("webhook_id");
        expect(response).toEqual({
            data: {
                createdAt: new Date("2024-01-15T09:30:00.000Z"),
                creditTriggerConfigs: [
                    {
                        creditId: "credit_id",
                    },
                ],
                entitlementTriggerConfigs: [
                    {
                        featureId: "feature_id",
                    },
                ],
                id: "id",
                name: "name",
                requestTypes: ["subscription.trial.ended"],
                secret: "secret",
                status: "active",
                updatedAt: new Date("2024-01-15T09:30:00.000Z"),
                url: "url",
            },
            params: {
                key: "value",
            },
        });
    });

    test("updateWebhook (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/webhooks/webhook_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.updateWebhook("webhook_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("updateWebhook (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/webhooks/webhook_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.updateWebhook("webhook_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("updateWebhook (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/webhooks/webhook_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.updateWebhook("webhook_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("updateWebhook (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/webhooks/webhook_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.updateWebhook("webhook_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("updateWebhook (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .put("/webhooks/webhook_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.updateWebhook("webhook_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("deleteWebhook (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { deleted: true }, params: { key: "value" } };
        server
            .mockEndpoint()
            .delete("/webhooks/webhook_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.webhooks.deleteWebhook("webhook_id");
        expect(response).toEqual({
            data: {
                deleted: true,
            },
            params: {
                key: "value",
            },
        });
    });

    test("deleteWebhook (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/webhooks/webhook_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.deleteWebhook("webhook_id");
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("deleteWebhook (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/webhooks/webhook_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.deleteWebhook("webhook_id");
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("deleteWebhook (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/webhooks/webhook_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.deleteWebhook("webhook_id");
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("deleteWebhook (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/webhooks/webhook_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.deleteWebhook("webhook_id");
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("deleteWebhook (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .delete("/webhooks/webhook_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.webhooks.deleteWebhook("webhook_id");
        }).rejects.toThrow(Schematic.InternalServerError);
    });

    test("countWebhooks (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { data: { count: 1 }, params: { limit: 1, offset: 1, q: "q" } };
        server.mockEndpoint().get("/webhooks/count").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.webhooks.countWebhooks({
            q: "q",
            limit: 1,
            offset: 1,
        });
        expect(response).toEqual({
            data: {
                count: 1,
            },
            params: {
                limit: 1,
                offset: 1,
                q: "q",
            },
        });
    });

    test("countWebhooks (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks/count").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.countWebhooks();
        }).rejects.toThrow(Schematic.BadRequestError);
    });

    test("countWebhooks (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks/count").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.countWebhooks();
        }).rejects.toThrow(Schematic.UnauthorizedError);
    });

    test("countWebhooks (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks/count").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.countWebhooks();
        }).rejects.toThrow(Schematic.ForbiddenError);
    });

    test("countWebhooks (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks/count").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.countWebhooks();
        }).rejects.toThrow(Schematic.NotFoundError);
    });

    test("countWebhooks (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SchematicClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { error: "error" };
        server.mockEndpoint().get("/webhooks/count").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.webhooks.countWebhooks();
        }).rejects.toThrow(Schematic.InternalServerError);
    });
});
